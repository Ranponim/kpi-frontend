# E2E 테스트 케이스 정의서

## 🎯 목적

3GPP KPI 대시보드 시스템의 전체 사용자 여정을 검증하여 모든 기능이 유기적으로 동작하는지 확인합니다.

## 🔍 테스트 환경

- **Frontend**: React (Vite) - http://localhost:5173
- **Backend**: FastAPI - http://localhost:8000
- **Databases**:
  - **PostgreSQL**: Raw KPI 데이터 - localhost:5432 (netperf DB)
  - **MongoDB**: Backend 저장소 - localhost:27017 (kpi DB)
- **실제 데이터**: 테스트용 PEG 마스터 데이터 및 KPI 데이터 사용

---

## 📋 핵심 사용자 여정 테스트 케이스

### 🚀 **TC001: 완전한 워크플로우 - Preference → Statistics → Dashboard**

**목적**: 가장 핵심적인 사용자 워크플로우 검증

**사전 조건**:

- 시스템이 정상적으로 실행 중
- MongoDB에 테스트 데이터 존재
- 브라우저에서 http://localhost:5173 접근 가능

**테스트 단계**:

1. **Preference 설정**

   - Preference 메뉴 접근
   - Dashboard 설정에서 기본 PEG 2-3개 선택
   - Statistics 설정에서 기본 NE: "eNB_001", Cell ID: "Cell_001" 설정
   - 설정 저장 확인

2. **Statistics 분석 수행**

   - Statistics 메뉴 접근
   - Basic 탭에서 두 날짜 구간 설정:
     - Period 1: 2025-08-09 ~ 2025-08-10
     - Period 2: 2025-08-11 ~ 2025-08-12
   - Preference에서 설정한 NE/Cell이 기본값으로 표시되는지 확인
   - 실제 DB PEG 목록이 로드되는지 확인
   - 분석 실행 및 결과 확인

3. **Dashboard 저장 기능**

   - Statistics 결과에서 일부 PEG 체크박스 선택
   - "Dashboard에 저장" 버튼 클릭
   - 성공 메시지 확인

4. **Dashboard 확인**
   - Dashboard 메뉴 접근
   - Statistics에서 저장한 PEG가 표시되는지 확인
   - 차트가 정상적으로 렌더링되는지 확인

**예상 결과**: 전체 워크플로우가 끊김 없이 동작하며, 설정한 값들이 각 단계에서 올바르게 반영됨

---

### 🔄 **TC002: Preference Import/Export 기능**

**목적**: 설정 관리 기능의 완전성 검증

**테스트 단계**:

1. **초기 설정 생성**

   - Preference에서 Dashboard, Statistics, Derived PEG 설정 구성
   - 각 탭에서 다양한 설정값 입력

2. **Export 기능**

   - "설정 내보내기" 클릭
   - 생성된 JSON 파일 다운로드 확인
   - JSON 파일 내용 검증

3. **설정 변경**

   - 기존 설정을 다른 값으로 변경
   - 변경사항 저장 확인

4. **Import 기능**
   - "설정 가져오기"로 이전에 내보낸 JSON 파일 업로드
   - 모든 설정이 원래 값으로 복원되는지 확인

**예상 결과**: Import/Export가 정확히 동작하며 모든 설정이 손실 없이 보존됨

---

### 📊 **TC003: LLM 분석 결과 관리 워크플로우**

**목적**: LLM 분석 결과 저장, 조회, 필터링 기능 검증

**테스트 단계**:

1. **분석 결과 조회**

   - "분석 결과" 메뉴 접근
   - 기존 분석 결과 목록 확인
   - 날짜, NE, Cell ID로 구분 가능한지 확인

2. **필터링 기능**

   - 날짜 범위 필터 적용
   - NE 필터 적용
   - Cell ID 필터 적용
   - 복합 필터 적용

3. **상세보기 및 비교**

   - 개별 결과 클릭하여 상세보기 확인
   - 여러 결과 선택하여 비교 기능 확인
   - 비교 차트 및 테이블 표시 확인

4. **결과 관리**
   - 결과 삭제 기능 확인
   - 대량 선택 및 삭제 확인

**예상 결과**: 분석 결과가 체계적으로 관리되며 사용자가 원하는 데이터를 쉽게 찾을 수 있음

---

### 🧮 **TC004: Derived PEG 관리 및 활용**

**목적**: 사용자 정의 PEG 공식 기능의 완전성 검증

**테스트 단계**:

1. **Derived PEG 생성**

   - Preference → Derived PEG 탭 접근
   - 새로운 공식 추가: `RACH_SUCCESS_RATE = (rrc_success_rate / availability) * 100`
   - 공식 검증 및 저장

2. **공식 활용**

   - Dashboard 설정에서 생성한 Derived PEG가 선택 가능한지 확인
   - Statistics에서 Derived PEG가 PEG 목록에 포함되는지 확인

3. **공식 관리**
   - 공식 수정 기능 확인
   - 공식 삭제 기능 확인
   - 순환 참조 방지 검증

**예상 결과**: 사용자 정의 PEG가 시스템 전반에서 기본 PEG와 동일하게 취급됨

---

### 🌐 **TC005: 실제 데이터 API 연동**

**목적**: Mock 데이터가 아닌 실제 MongoDB 데이터 연동 검증

**테스트 단계**:

1. **Master API 검증**

   - 브라우저 개발자 도구에서 `/api/master/pegs` 호출 확인
   - 실제 MongoDB 데이터 반환 확인

2. **Statistics API 검증**

   - Statistics 분석 시 실제 데이터 사용 확인
   - 데이터 부족 시 적절한 오류 메시지 표시 확인

3. **Preference API 검증**
   - 설정 저장/로드 시 실제 MongoDB 저장 확인
   - 여러 사용자 설정 격리 확인

**예상 결과**: 모든 API가 실제 데이터베이스와 정상적으로 연동되어 동작함

---

### 🔄 **TC006: 비동기 분석 워크플로우**

**목적**: 비동기 LLM 분석 기능의 완전성 검증

**테스트 단계**:

1. **비동기 분석 시작**

   - "비동기 분석" 메뉴 접근
   - 분석 파라미터 설정 (NE ID, Cell ID, 기간 등)
   - 분석 시작 버튼 클릭
   - 분석 ID 생성 및 상태 확인

2. **진행 상황 모니터링**

   - 분석 상태 실시간 업데이트 확인 (queued → processing → completed)
   - 진행률 표시 확인
   - 예상 완료 시간 표시 확인

3. **결과 조회 및 관리**

   - 분석 완료 후 결과 조회
   - 결과 상세보기 및 시각화 확인
   - 분석 취소 기능 확인 (진행 중인 경우)

4. **에러 처리**
   - 분석 실패 시 적절한 오류 메시지 표시
   - 재시도 기능 확인

**예상 결과**: 비동기 분석이 안정적으로 동작하며 사용자에게 적절한 피드백 제공

---

## 📈 **성능 및 사용성 검증 항목**

### ⚡ **성능 테스트**

- **응답 시간**: API 호출 응답 시간 < 2초
- **차트 렌더링**: 대시보드 차트 로딩 시간 < 3초
- **대용량 데이터**: 100개 이상 분석 결과 처리 가능

### 🎨 **UI/UX 검증**

- **반응형 디자인**: 다양한 화면 크기에서 정상 동작
- **에러 처리**: 네트워크 오류 시 적절한 사용자 피드백
- **로딩 상태**: 비동기 작업 시 로딩 스피너 표시

### 🔒 **데이터 무결성**

- **동시성**: 여러 사용자가 동시 접근 시 데이터 충돌 없음
- **트랜잭션**: 설정 저장 실패 시 부분 업데이트 방지
- **백업**: 중요 설정 변경 시 이전 상태 복구 가능

---

## 🛠 **테스트 실행 가이드**

### **수동 테스트 체크리스트**

- [ ] TC001: 완전한 워크플로우
- [ ] TC002: Preference Import/Export
- [ ] TC003: LLM 분석 결과 관리
- [ ] TC004: Derived PEG 관리
- [ ] TC005: 실제 데이터 API 연동
- [ ] TC006: 비동기 분석 워크플로우

### **자동화 테스트 준비사항**

1. **Cypress/Playwright 설치**
2. **테스트 데이터 시딩 스크립트**
3. **CI/CD 파이프라인 구성**
4. **테스트 결과 리포팅**

### **테스트 환경 설정**

```bash
# 1. 시스템 시작
docker compose up -d

# 2. 프론트엔드 시작
cd frontend && npm run dev

# 3. 테스트 데이터 확인
docker exec -it kpi-mongo mongosh --eval "db.peg_master.find()"

# 4. 브라우저에서 테스트 수행
# http://localhost:5173
```

---

## 📊 **테스트 결과 기록 양식**

| 테스트 케이스 | 실행일시 | 상태 | 발견된 이슈 | 해결방안 |
| ------------- | -------- | ---- | ----------- | -------- |
| TC001         | -        | ⏳   | -           | -        |
| TC002         | -        | ⏳   | -           | -        |
| TC003         | -        | ⏳   | -           | -        |
| TC004         | -        | ⏳   | -           | -        |
| TC005         | -        | ⏳   | -           | -        |
| TC006         | -        | ⏳   | -           | -        |

**범례**: ✅ 성공 | ❌ 실패 | ⚠️ 부분성공 | ⏳ 미실행

---

## 🎯 **성공 기준**

- 모든 핵심 테스트 케이스 통과율 100%
- 중대한 UI/UX 이슈 0건
- API 응답 시간 목표 달성
- 실제 사용자 시나리오에서 끊김 없는 경험 제공



