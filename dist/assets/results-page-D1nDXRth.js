import{N as e,r as t,O as B}from"./vendor-Cw6wx6N3.js";import{c as te,t as Qe,C as le,b as me,d as xe,B as re,a as R,e as ne,L as he,I as ue,p as ts,T as as,q as ls,r as pe,s as Ne,S as ve,f as we,g as ye,h as be,i as V,u as ns,v as rs,w as _e,x as ee,y as is,z as se}from"./common-components-BsYW0TmQ.js";import{F as cs,G as os,H as ds,J as hs,K as ms,M as xs,N as us,Q as gs,U as js}from"./ui-vendor-FYf9CHse.js";import{a as De,D as fs,b as ps,c as Ns,d as vs}from"./dashboard-page-CxSfgQ35.js";import{F as Ae,X as ae,C as ke,b as ws,I as ys,J as bs,c as Se,E as Cs,M as Ds,h as ks,L as Re,d as Ie,R as Ss,g as Rs,x as Fe,K as Is,N as Fs,e as As,z as Le,l as zs,O as Te}from"./icon-vendor-1p3lj7wq.js";import{R as Ee,B as Me,C as Pe,X as $e,Y as Oe,T as Ke,L as He,a as Ce}from"./chart-vendor-C0DB73VJ.js";function Ve({...d}){return e.jsx(cs,{"data-slot":"alert-dialog",...d})}function Be({...d}){return e.jsx(os,{"data-slot":"alert-dialog-trigger",...d})}function _s({...d}){return e.jsx(gs,{"data-slot":"alert-dialog-portal",...d})}function Ls({className:d,...h}){return e.jsx(js,{"data-slot":"alert-dialog-overlay",className:te("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",d),...h})}function Ge({className:d,...h}){return e.jsxs(_s,{children:[e.jsx(Ls,{}),e.jsx(ds,{"data-slot":"alert-dialog-content",className:te("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",d),...h})]})}function Ue({className:d,...h}){return e.jsx("div",{"data-slot":"alert-dialog-header",className:te("flex flex-col gap-2 text-center sm:text-left",d),...h})}function We({className:d,...h}){return e.jsx("div",{"data-slot":"alert-dialog-footer",className:te("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",d),...h})}function qe({className:d,...h}){return e.jsx(hs,{"data-slot":"alert-dialog-title",className:te("text-lg font-semibold",d),...h})}function Xe({className:d,...h}){return e.jsx(ms,{"data-slot":"alert-dialog-description",className:te("text-muted-foreground text-sm",d),...h})}function Je({className:d,...h}){return e.jsx(us,{className:te(Qe(),d),...h})}function Ye({className:d,...h}){return e.jsx(xs,{className:te(Qe({variant:"outline"}),d),...h})}const Ts=({initialLimit:d=20,autoFetch:h=!0,initialFilters:I={}}={})=>{const[F,K]=t.useState([]),[_,T]=t.useState(!1),[$,H]=t.useState(null),[L,G]=t.useState(!0),[P,k]=t.useState({limit:d,skip:0,total:0}),[j,A]=t.useState({neId:"ALL",cellId:"ALL",startDate:null,endDate:null,status:"",...I}),l=t.useCallback((v,g={})=>{console.log(`[useAnalysisResults] ${v}`,g)},[]),S=t.useCallback((v,g)=>{console.error(`[useAnalysisResults] ${v}`,g)},[]),w=t.useCallback(async({limit:v=P.limit,skip:g=0,append:q=!1,showToast:J=!0}={})=>{var E,X,ce,s,a,r,o,i,u,x,C;try{T(!0),H(null),l("ë¶„ì„ ê²°ê³¼ ì¡°íšŒ ì‹œì‘",{limit:v,skip:g,filters:j});const f={limit:v,skip:g};(E=j.neId)!=null&&E.trim()&&(f.ne_id=j.neId.trim()),(X=j.cellId)!=null&&X.trim()&&(f.cell_id=j.cellId.trim()),j.startDate&&(f.date_from=j.startDate),j.endDate&&(f.date_to=j.endDate),(ce=j.status)!=null&&ce.trim()&&(f.status=j.status.trim());const p=await De.get("/api/analysis/results",{params:f});l("ë¶„ì„ ê²°ê³¼ ì¡°íšŒ ì„±ê³µ",{resultCount:((a=(s=p.data)==null?void 0:s.items)==null?void 0:a.length)||0,total:((r=p.data)==null?void 0:r.total)||0,totalRequested:v});const M=(((o=p.data)==null?void 0:o.items)||[]).filter(b=>((b==null?void 0:b.analysis_type)||(b==null?void 0:b.analysisType))==="llm_analysis");return K(q?b=>[...b,...M]:M),k(b=>{var Z;return{...b,skip:q?b.skip+M.length:g+M.length,total:((Z=p.data)==null?void 0:Z.total)||0}}),G(((i=p.data)==null?void 0:i.has_next)||!1),J&&!q&&B.success(`${M.length}ê°œì˜ ë¶„ì„ ê²°ê³¼ë¥¼ ë¶ˆëŸ¬ì™”ìŠµë‹ˆë‹¤.`),M}catch(f){const p=((C=(x=(u=f==null?void 0:f.response)==null?void 0:u.data)==null?void 0:x.error)==null?void 0:C.message)||(f==null?void 0:f.message)||"ë¶„ì„ ê²°ê³¼ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.";return S("ë¶„ì„ ê²°ê³¼ ì¡°íšŒ ì‹¤íŒ¨",f),H(p),J&&B.error(`ë°ì´í„° ì¡°íšŒ ì‹¤íŒ¨: ${p}`),[]}finally{T(!1)}},[P.limit,j,l,S]),U=t.useCallback(v=>{l("í•„í„° ì—…ë°ì´íŠ¸",{ì´ì „:j,ìƒˆë¡œìš´:v}),A(g=>({...g,...v})),k(g=>({...g,skip:0}))},[j,l]),W=t.useCallback(()=>{l("í•„í„° ì´ˆê¸°í™”"),A({neId:"",cellId:"",startDate:null,endDate:null,status:""}),k(v=>({...v,skip:0}))},[l]),O=t.useCallback(async()=>{if(_||!L){l("ì¶”ê°€ ë¡œë”© ê±´ë„ˆëœ€",{loading:_,hasMore:L});return}l("ì¶”ê°€ ê²°ê³¼ ë¡œë”© ì‹œì‘"),await w({skip:P.skip,append:!0,showToast:!1})},[_,L,w,P.skip,l]),n=t.useCallback(async()=>{l("ë°ì´í„° ìƒˆë¡œê³ ì¹¨ ì‹œì‘"),k(v=>({...v,skip:0})),await w({skip:0,append:!1})},[w,l]),m=t.useCallback(async v=>{var g,q,J;try{l("ë¶„ì„ ê²°ê³¼ ì‚­ì œ ì‹œì‘",{resultId:v}),await De.delete(`/api/analysis/results/${v}`),K(E=>E.filter(X=>X.id!==v)),l("ë¶„ì„ ê²°ê³¼ ì‚­ì œ ì„±ê³µ",{resultId:v}),B.success("ë¶„ì„ ê²°ê³¼ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.")}catch(E){const X=((J=(q=(g=E==null?void 0:E.response)==null?void 0:g.data)==null?void 0:q.error)==null?void 0:J.message)||(E==null?void 0:E.message)||"ë¶„ì„ ê²°ê³¼ ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.";S("ë¶„ì„ ê²°ê³¼ ì‚­ì œ ì‹¤íŒ¨",E),B.error(`ì‚­ì œ ì‹¤íŒ¨: ${X}`)}},[l,S]);t.useEffect(()=>{h&&(l("ì»´í¬ë„ŒíŠ¸ ë§ˆìš´íŠ¸ - ìë™ ë°ì´í„° ì¡°íšŒ ì‹œì‘"),w({skip:0,append:!1,showToast:!1}))},[h]),t.useEffect(()=>{h&&(l("í•„í„° ë³€ê²½ ê°ì§€ - ë°ì´í„° ì¬ì¡°íšŒ"),w({skip:0,append:!1,showToast:!1}))},[h,j,w,l]);const z=t.useMemo(()=>!_&&F.length===0,[_,F.length]),N=t.useMemo(()=>Object.values(j).some(v=>v!=null&&v!==""),[j]),Q=t.useMemo(()=>F.length,[F.length]),ie=t.useMemo(()=>({resultCount:Q,loading:_,hasMore:L,isEmpty:z,isFiltered:N,pagination:P,filters:j,error:$}),[Q,_,L,z,N,P,j,$]);return t.useEffect(()=>{},[ie]),{results:F,loading:_,error:$,isEmpty:z,hasMore:L,isFiltered:N,resultCount:Q,pagination:P,filters:j,updateFilters:U,clearFilters:W,fetchResults:w,refresh:n,loadMore:O,deleteResult:m,debugInfo:ie}},Es=({filters:d={},onFilterChange:h,onClearFilters:I,isCollapsed:F=!1,onToggleCollapse:K,showActiveCount:_=!0})=>{const T=t.useCallback((n,m={})=>{console.log(`[ResultFilter] ${n}`,m)},[]),{neId:$="",cellId:H="",startDate:L=null,endDate:G=null,status:P=""}=d,k={...$&&{"NE ID":$},...H&&{"Cell ID":H},...L&&{ì‹œì‘ì¼:new Date(L).toLocaleDateString("ko-KR")},...G&&{ì¢…ë£Œì¼:new Date(G).toLocaleDateString("ko-KR")},...P&&{ìƒíƒœ:P}},j=Object.keys(k).length,A=j>0,l=t.useCallback((n,m)=>{T("í•„í„° ë³€ê²½",{key:n,value:m}),h&&h(n,m)},[h,T]),S=t.useCallback(n=>{T("ê°œë³„ í•„í„° ì´ˆê¸°í™”",{key:n}),l(n,n==="startDate"||n==="endDate"?null:"")},[l,T]),w=t.useCallback(()=>{T("ì „ì²´ í•„í„° ì´ˆê¸°í™”"),I&&I()},[I,T]),U=t.useCallback(n=>{if(!n)return"";try{return new Date(n).toISOString().split("T")[0]}catch{return""}},[]),W=t.useCallback(n=>{if(!n)return null;try{return new Date(n).toISOString()}catch{return null}},[]),O=t.useCallback(()=>{T("í•„í„° íŒ¨ë„ í† ê¸€",{isCollapsed:!F}),K&&K()},[F,K,T]);return e.jsxs(le,{className:"w-full",children:[e.jsxs(me,{className:"pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(xe,{className:"text-lg flex items-center gap-2",children:[e.jsx(Ae,{className:"h-5 w-5"}),"í•„í„°"]}),_&&A&&e.jsxs(re,{variant:"secondary",className:"text-xs",children:[j,"ê°œ í™œì„±"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[A&&e.jsxs(R,{variant:"ghost",size:"sm",onClick:w,className:"text-destructive hover:text-destructive",children:[e.jsx(ae,{className:"h-4 w-4 mr-1"}),"ì „ì²´ ì´ˆê¸°í™”"]}),e.jsx(R,{variant:"ghost",size:"sm",onClick:O,children:F?e.jsx(ke,{className:"h-4 w-4"}):e.jsx(ws,{className:"h-4 w-4"})})]})]}),A&&!F&&e.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:Object.entries(k).map(([n,m])=>e.jsxs(re,{variant:"outline",className:"flex items-center gap-1 pr-1",children:[e.jsxs("span",{className:"text-xs",children:[n,": ",m]}),e.jsx(R,{variant:"ghost",size:"sm",className:"h-4 w-4 p-0 hover:bg-destructive hover:text-destructive-foreground",onClick:()=>{const N={"NE ID":"neId","Cell ID":"cellId",ì‹œì‘ì¼:"startDate",ì¢…ë£Œì¼:"endDate",ìƒíƒœ:"status"}[n];N&&S(N)},children:e.jsx(ae,{className:"h-3 w-3"})})]},n))})]}),!F&&e.jsxs(ne,{className:"pt-0",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(he,{htmlFor:"filter-ne",className:"flex items-center gap-2",children:[e.jsx(ys,{className:"h-4 w-4"}),"NE ID"]}),e.jsxs("div",{className:"relative",children:[e.jsx(ue,{id:"filter-ne",placeholder:"NE ID ê²€ìƒ‰...",value:$,onChange:n=>l("neId",n.target.value),className:"pr-8"}),$&&e.jsx(R,{variant:"ghost",size:"sm",className:"absolute right-1 top-1/2 -translate-y-1/2 h-6 w-6 p-0",onClick:()=>S("neId"),children:e.jsx(ae,{className:"h-3 w-3"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(he,{htmlFor:"filter-cell",className:"flex items-center gap-2",children:[e.jsx(bs,{className:"h-4 w-4"}),"Cell ID"]}),e.jsxs("div",{className:"relative",children:[e.jsx(ue,{id:"filter-cell",placeholder:"Cell ID ê²€ìƒ‰...",value:H,onChange:n=>l("cellId",n.target.value),className:"pr-8"}),H&&e.jsx(R,{variant:"ghost",size:"sm",className:"absolute right-1 top-1/2 -translate-y-1/2 h-6 w-6 p-0",onClick:()=>S("cellId"),children:e.jsx(ae,{className:"h-3 w-3"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(he,{htmlFor:"filter-start",className:"flex items-center gap-2",children:[e.jsx(Se,{className:"h-4 w-4"}),"ì‹œì‘ ë‚ ì§œ"]}),e.jsxs("div",{className:"relative",children:[e.jsx(ue,{id:"filter-start",type:"date",value:U(L),onChange:n=>l("startDate",W(n.target.value)),className:"pr-8"}),L&&e.jsx(R,{variant:"ghost",size:"sm",className:"absolute right-1 top-1/2 -translate-y-1/2 h-6 w-6 p-0",onClick:()=>S("startDate"),children:e.jsx(ae,{className:"h-3 w-3"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(he,{htmlFor:"filter-end",className:"flex items-center gap-2",children:[e.jsx(Se,{className:"h-4 w-4"}),"ì¢…ë£Œ ë‚ ì§œ"]}),e.jsxs("div",{className:"relative",children:[e.jsx(ue,{id:"filter-end",type:"date",value:U(G),onChange:n=>l("endDate",W(n.target.value)),className:"pr-8"}),G&&e.jsx(R,{variant:"ghost",size:"sm",className:"absolute right-1 top-1/2 -translate-y-1/2 h-6 w-6 p-0",onClick:()=>S("endDate"),children:e.jsx(ae,{className:"h-3 w-3"})})]})]})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t",children:[e.jsx(he,{className:"text-sm font-medium mb-3 block",children:"ë¹ ë¥¸ ë‚ ì§œ ì„ íƒ"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:[{label:"ì˜¤ëŠ˜",days:0},{label:"ì–´ì œ",days:1},{label:"ìµœê·¼ 7ì¼",days:7},{label:"ìµœê·¼ 30ì¼",days:30},{label:"ìµœê·¼ 90ì¼",days:90}].map(({label:n,days:m})=>e.jsx(R,{variant:"outline",size:"sm",onClick:()=>{const z=new Date,N=new Date;m===0?(N.setHours(0,0,0,0),z.setHours(23,59,59,999)):m===1?(N.setDate(N.getDate()-1),N.setHours(0,0,0,0),z.setDate(z.getDate()-1),z.setHours(23,59,59,999)):(N.setDate(N.getDate()-m),N.setHours(0,0,0,0),z.setHours(23,59,59,999)),l("startDate",N.toISOString()),l("endDate",z.toISOString()),T("ë¹ ë¥¸ ë‚ ì§œ ì„ íƒ",{label:n,startDate:N,endDate:z})},children:n},n))})]})]})]})},Ze=({isOpen:d,onClose:h,resultIds:I=[],mode:F="single"})=>{const[K,_]=t.useState([]),[T,$]=t.useState(!1),[H,L]=t.useState(null),[G,P]=t.useState("overview"),[k,j]=t.useState(!1);t.useEffect(()=>{const a=r=>{r.key==="F11"?(r.preventDefault(),j(o=>!o)):r.key==="Escape"&&k&&j(!1)};if(d)return window.addEventListener("keydown",a),()=>window.removeEventListener("keydown",a)},[d,k]);const[A,l]=t.useState(0),[S,w]=t.useState(10),[U,W]=t.useState(""),[O,n]=t.useState("all"),[m,z]=t.useState("all"),N=F==="compare"&&I.length>1;F==="single"&&I.length;const Q=async a=>{$(!0),L(null);try{console.log("ğŸ“Š ë¶„ì„ ê²°ê³¼ ìƒì„¸ ì •ë³´ ìš”ì²­:",a);const r=a.map(async i=>{try{return{...(await De.get(`/api/analysis/results/${i}`)).data,id:i}}catch(u){return console.error(`âŒ ê²°ê³¼ ${i} ë¡œë”© ì‹¤íŒ¨:`,u),{id:i,error:u.message||"ë¡œë”© ì‹¤íŒ¨",analysisDate:new Date().toISOString(),neId:"-",cellId:"-",status:"error"}}}),o=await Promise.all(r);_(o),console.log("âœ… ë¶„ì„ ê²°ê³¼ ìƒì„¸ ì •ë³´ ë¡œë”© ì™„ë£Œ:",o)}catch(r){console.error("âŒ ë¶„ì„ ê²°ê³¼ ìƒì„¸ ì •ë³´ ë¡œë”© ì‹¤íŒ¨:",r),L(r.message||"ë°ì´í„° ë¡œë”©ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤"),B.error("ë¶„ì„ ê²°ê³¼ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤")}finally{$(!1)}};t.useEffect(()=>{d&&I.length>0&&Q(I)},[d,I]);const ie=a=>{switch(a==null?void 0:a.toLowerCase()){case"success":return"default";case"error":case"failed":return"destructive";case"warning":return"secondary";case"pending":case"processing":return"outline";default:return"secondary"}},v=a=>{try{return new Date(a).toLocaleString("ko-KR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",weekday:"short"})}catch{return a||"-"}},g=t.useMemo(()=>K.filter(a=>!a.error),[K]),q=t.useMemo(()=>{var r,o;return N?(((o=(r=g[0])==null?void 0:r.kpiResults)==null?void 0:o.map(i=>i.name))||[]).map(i=>{const u={name:i};return g.forEach((x,C)=>{var p;const f=(p=x.kpiResults)==null?void 0:p.find(y=>y.name===i);u[`ê²°ê³¼${C+1}`]=parseFloat((f==null?void 0:f.value)||0)}),u}):null},[g,N]),J=t.useMemo(()=>{var ze;if(N||!g.length||!g[0].stats)return{kpiResults:[],sortedKpiResults:[],filteredResults:[],dataWithTrends:[],trendFilteredResults:[],totalPages:0,paginatedResults:[],data:[],summaryStats:{improved:0,declined:0,stable:0,avgChange:0,weightedAvgChange:0}};const a=g[0],r=a.stats||[],o={};r.forEach(c=>{const D=c.kpi_name;o[D]||(o[D]={peg_name:D,weight:5}),c.period==="N-1"?o[D]["N-1"]=c.avg:c.period==="N"&&(o[D].N=c.avg)});const i=((ze=a.request_params)==null?void 0:ze.peg_definitions)||{};Object.keys(o).forEach(c=>{var D;(D=i[c])!=null&&D.weight&&(o[c].weight=i[c].weight)});const u=Object.values(o).filter(c=>c["N-1"]!==void 0&&c.N!==void 0),x=[...u].sort((c,D)=>(D.weight||0)-(c.weight||0)),C=x.filter(c=>{const D=!U||c.peg_name.toLowerCase().includes(U.toLowerCase()),de=c.weight||0;let Y=!0;return O==="high"?Y=de>=8:O==="medium"?Y=de>=6&&de<8:O==="low"&&(Y=de<6),D&&Y}),f=C.map(c=>{const D=c["N-1"]||0,Y=(c.N||0)-D,es=D!==0?Y/D*100:0,ss=Y>0?"up":Y<0?"down":"stable";return{...c,change:Y,changePercent:es,trend:ss}}),p=f.filter(c=>m==="all"?!0:c.trend===m),y=Math.ceil(p.length/S),M=p.slice(A*S,(A+1)*S),b=M.map(c=>({name:c.peg_name,"N-1":c["N-1"]||0,N:c.N||0,change:c.change,changePercent:c.changePercent,trend:c.trend,weight:c.weight,unit:"%",peg:c.weight||0})),Z=b.filter(c=>c.trend==="up").length,ge=b.filter(c=>c.trend==="down").length,je=b.filter(c=>c.trend==="stable").length,fe=b.length>0?b.reduce((c,D)=>c+D.change,0)/b.length:0,oe=b.length>0?b.reduce((c,D)=>c+D.change*D.weight,0)/b.reduce((c,D)=>c+D.weight,0):0;return{kpiResults:u,sortedKpiResults:x,filteredResults:C,dataWithTrends:f,trendFilteredResults:p,totalPages:y,paginatedResults:M,data:b,summaryStats:{improved:Z,declined:ge,stable:je,avgChange:fe,weightedAvgChange:oe}}},[N,g,U,O,m,A,S]),E=()=>{const{kpiResults:a,trendFilteredResults:r,totalPages:o,data:i,summaryStats:u}=J;return N?e.jsx(Ee,{width:"100%",height:400,children:e.jsxs(Me,{data:q,children:[e.jsx(Pe,{strokeDasharray:"3 3"}),e.jsx($e,{dataKey:"name"}),e.jsx(Oe,{}),e.jsx(Ke,{}),e.jsx(He,{}),g.map((x,C)=>e.jsx(Ce,{dataKey:`ê²°ê³¼${C+1}`,fill:`hsl(${C*60}, 70%, 50%)`},`result${C+1}`))]})}):a.length?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 p-4 bg-muted/30 rounded-lg",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold text-green-600",children:u.improved}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"ê°œì„  ğŸ“ˆ"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold text-red-600",children:u.declined}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"í•˜ë½ ğŸ“‰"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold text-gray-600",children:u.stable}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"ì•ˆì • â¡ï¸"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:`text-lg font-bold ${u.avgChange>=0?"text-green-600":"text-red-600"}`,children:[u.avgChange>0?"+":"",u.avgChange.toFixed(2),"%"]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"í‰ê·  ë³€í™”"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:`text-lg font-bold ${u.weightedAvgChange>=0?"text-green-600":"text-red-600"}`,children:[u.weightedAvgChange>0?"+":"",u.weightedAvgChange.toFixed(2),"%"]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"ê°€ì¤‘ í‰ê·  ë³€í™”"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[e.jsx("span",{children:"ğŸ“Š PEGë³„ N-1/N ì„±ëŠ¥ ë¹„êµ (ê°€ì¤‘ì¹˜ ë†’ì€ ìˆœ)"}),e.jsxs(re,{variant:"outline",children:["ì „ì²´ ",a.length,"ê°œ ì¤‘ ",r.length,"ê°œ í‘œì‹œ"]})]}),e.jsxs("div",{className:`grid gap-3 transition-all duration-300 ${k?"grid-cols-1 md:grid-cols-6 lg:grid-cols-8":"grid-cols-1 md:grid-cols-5"}`,children:[e.jsxs("div",{className:"relative",children:[e.jsx(Fe,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(ue,{placeholder:"PEG ì´ë¦„ ê²€ìƒ‰...",value:U,onChange:x=>{W(x.target.value),l(0)},className:"pl-8"})]}),e.jsxs(ve,{value:O,onValueChange:x=>{n(x),l(0)},children:[e.jsxs(we,{children:[e.jsx(Ae,{className:"h-4 w-4 mr-2"}),e.jsx(ye,{placeholder:"ê°€ì¤‘ì¹˜ í•„í„°"})]}),e.jsxs(be,{children:[e.jsx(V,{value:"all",children:"ì „ì²´"}),e.jsx(V,{value:"high",children:"ë†’ìŒ (â‰¥8)"}),e.jsx(V,{value:"medium",children:"ì¤‘ê°„ (6-7.9)"}),e.jsx(V,{value:"low",children:"ë‚®ìŒ (<6)"})]})]}),e.jsxs(ve,{value:m,onValueChange:x=>{z(x),l(0)},children:[e.jsx(we,{children:e.jsx(ye,{placeholder:"íŠ¸ë Œë“œ í•„í„°"})}),e.jsxs(be,{children:[e.jsx(V,{value:"all",children:"ì „ì²´ íŠ¸ë Œë“œ"}),e.jsx(V,{value:"up",children:"ê°œì„  ğŸ“ˆ"}),e.jsx(V,{value:"down",children:"í•˜ë½ ğŸ“‰"}),e.jsx(V,{value:"stable",children:"ì•ˆì • â¡ï¸"})]})]}),e.jsxs(ve,{value:S.toString(),onValueChange:x=>{w(parseInt(x)),l(0)},children:[e.jsx(we,{children:e.jsx(ye,{placeholder:"í‘œì‹œ ê°œìˆ˜"})}),e.jsxs(be,{children:[e.jsx(V,{value:"5",children:"5ê°œì”©"}),e.jsx(V,{value:"10",children:"10ê°œì”©"}),e.jsx(V,{value:"20",children:"20ê°œì”©"}),e.jsx(V,{value:"50",children:"50ê°œì”©"})]})]}),e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(R,{variant:"outline",size:"sm",onClick:()=>l(Math.max(0,A-1)),disabled:A===0,children:e.jsx(Is,{className:"h-4 w-4"})}),e.jsxs("span",{className:"text-sm",children:[A+1," / ",o||1]}),e.jsx(R,{variant:"outline",size:"sm",onClick:()=>l(Math.min(o-1,A+1)),disabled:A>=o-1,children:e.jsx(Fs,{className:"h-4 w-4"})})]})]})]}),e.jsx(Ee,{width:"100%",height:k?Math.min(window.innerHeight*.55,900):Math.min(window.innerHeight*.4,500),className:"transition-all duration-300",children:e.jsxs(Me,{data:i,margin:{top:20,right:30,left:20,bottom:60},children:[e.jsx(Pe,{strokeDasharray:"3 3"}),e.jsx($e,{dataKey:"name",angle:-45,textAnchor:"end",height:100,interval:0,fontSize:10}),e.jsx(Oe,{}),e.jsx(Ke,{formatter:(x,C,f)=>[`${x==null?void 0:x.toFixed(2)} ${f.payload.unit}`,C],labelFormatter:x=>{const C=i.find(f=>f.name===x);return`${x} (ê°€ì¤‘ì¹˜: ${(C==null?void 0:C.weight)||0})`},content:({active:x,payload:C,label:f})=>{var b,Z,ge,je,fe;if(!x||!(C!=null&&C.length))return null;const p=(b=C[0])==null?void 0:b.payload;if(!p)return null;const y=oe=>{switch(oe){case"up":return"ğŸ“ˆ";case"down":return"ğŸ“‰";default:return"â¡ï¸"}},M=oe=>{switch(oe){case"up":return"text-green-600";case"down":return"text-red-600";default:return"text-gray-600"}};return e.jsxs("div",{className:"bg-white border rounded-lg shadow-lg p-3 min-w-[200px]",children:[e.jsx("div",{className:"font-semibold mb-2",children:f}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-orange-600",children:"N-1 ê¸°ê°„:"}),e.jsxs("span",{className:"font-medium",children:[(Z=p["N-1"])==null?void 0:Z.toFixed(2),"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-blue-600",children:"N ê¸°ê°„:"}),e.jsxs("span",{className:"font-medium",children:[(ge=p.N)==null?void 0:ge.toFixed(2),"%"]})]}),e.jsxs("div",{className:"border-t pt-1 mt-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:"ì„±ëŠ¥ ë³€í™”:"}),e.jsxs("div",{className:`flex items-center gap-1 font-medium ${M(p.trend)}`,children:[e.jsx("span",{children:y(p.trend)}),e.jsxs("span",{children:[p.change>0?"+":"",(je=p.change)==null?void 0:je.toFixed(2),"%"]}),e.jsxs("span",{className:"text-xs",children:["(",p.changePercent>0?"+":"",(fe=p.changePercent)==null?void 0:fe.toFixed(1),"%)"]})]})]}),e.jsxs("div",{className:"flex justify-between mt-1",children:[e.jsx("span",{className:"text-gray-600",children:"ê°€ì¤‘ì¹˜:"}),e.jsxs("span",{className:"font-medium",children:[p.weight,"/10"]})]})]})]})]})}}),e.jsx(He,{}),e.jsx(Ce,{dataKey:"N-1",fill:"#ff7300",name:"N-1 ê¸°ê°„"}),e.jsx(Ce,{dataKey:"N",fill:"#8884d8",name:"N ê¸°ê°„"})]})})]}):e.jsx("div",{className:"text-center text-muted-foreground",children:"PEG ë¹„êµ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤."})},X=a=>{var p;const r=(a==null?void 0:a[0])||{},o=((p=r==null?void 0:r.data)==null?void 0:p.data)||(r==null?void 0:r.data)||r,i=(o==null?void 0:o.analysis)||{},u=i.executive_summary||i.overall_summary||i.comprehensive_summary||"ìš”ì•½ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.",x=Array.isArray(i.diagnostic_findings)&&i.diagnostic_findings.length?i.diagnostic_findings:Array.isArray(i.key_findings)?i.key_findings.map(y=>({primary_hypothesis:String(y)})):[],f=(Array.isArray(i.recommended_actions)?i.recommended_actions:[]).map(y=>y&&typeof y=="object"?y:{priority:"",action:String(y||""),details:""});return e.jsxs("div",{className:"space-y-4",children:[e.jsxs(le,{children:[e.jsx(me,{children:e.jsx(xe,{children:"ì¢…í•© ë¶„ì„ ìš”ì•½"})}),e.jsx(ne,{children:e.jsx("div",{className:"text-sm text-muted-foreground whitespace-pre-line",children:u})})]}),x.length>0&&e.jsxs(le,{children:[e.jsx(me,{children:e.jsx(xe,{children:"í•µì‹¬ ê´€ì°° ì‚¬í•­"})}),e.jsx(ne,{children:e.jsx("div",{className:"space-y-3",children:x.map((y,M)=>e.jsxs("div",{className:"space-y-1",children:[y.primary_hypothesis&&e.jsxs("div",{className:"text-sm",children:[e.jsxs("span",{className:"font-semibold",children:["ê°€ì„¤ ",M+1,":"]})," ",y.primary_hypothesis]}),y.supporting_evidence&&e.jsxs("div",{className:"text-xs text-muted-foreground",children:["ì¦ê±°: ",y.supporting_evidence]}),y.confounding_factors_assessment&&e.jsxs("div",{className:"text-xs text-muted-foreground",children:["êµë€ ë³€ìˆ˜ í‰ê°€: ",y.confounding_factors_assessment]})]},M))})})]}),f.length>0&&e.jsxs(le,{children:[e.jsx(me,{children:e.jsx(xe,{children:"ê¶Œì¥ ì¡°ì¹˜"})}),e.jsx(ne,{children:e.jsx("div",{className:"space-y-3",children:f.map((y,M)=>e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"mt-0.5",children:e.jsx(As,{className:"h-5 w-5 text-green-500"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[y.priority&&e.jsx(re,{variant:"outline",children:y.priority}),e.jsx("div",{className:"text-sm font-medium",children:y.action||"-"})]}),y.details&&e.jsx("div",{className:"text-xs text-muted-foreground mt-1 whitespace-pre-line",children:y.details})]})]},M))})})]})]})},ce=()=>e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-semibold",children:[g.length,"ê°œ ê²°ê³¼ ë¹„êµ"]}),e.jsx("div",{className:"flex gap-2",children:g.map((a,r)=>e.jsxs(re,{variant:"outline",className:"gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:`hsl(${r*60}, 70%, 50%)`}}),"ê²°ê³¼ ",r+1]},a.id))})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:g.map((a,r)=>e.jsx(le,{className:"border-l-4",style:{borderLeftColor:`hsl(${r*60}, 70%, 50%)`},children:e.jsx(ne,{className:"pt-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"font-medium",children:["ê²°ê³¼ ",r+1]}),e.jsx(re,{variant:ie(a.status),children:a.status})]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:v(a.analysisDate)}),e.jsxs("div",{className:"text-sm",children:["NE: ",a.neId," | Cell: ",a.cellId]})]})})},a.id))})]}),s=()=>T?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Re,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"ë¶„ì„ ê²°ê³¼ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘..."})]})}):H?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Ie,{className:"h-12 w-12 text-destructive mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"ë°ì´í„° ë¡œë”© ì˜¤ë¥˜"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:H}),e.jsxs(R,{onClick:()=>Q(I),variant:"outline",children:[e.jsx(Ss,{className:"h-4 w-4 mr-2"}),"ë‹¤ì‹œ ì‹œë„"]})]})}):g.length===0?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Ie,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"ë¶„ì„ ê²°ê³¼ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."})]})}):e.jsxs(as,{value:G,onValueChange:P,className:"w-full",children:[e.jsxs(ls,{className:"grid w-full grid-cols-3",children:[e.jsx(pe,{value:"overview",children:"ê°œìš”"}),e.jsx(pe,{value:"kpi",children:"PEG ë¹„êµ ê²°ê³¼"}),e.jsx(pe,{value:"recommendations",children:"LLM ë¶„ì„ ë¦¬í¬íŠ¸"})]}),e.jsx(Ne,{value:"overview",className:"space-y-4 mt-6",children:N?ce():renderSingleOverview(g[0])}),e.jsx(Ne,{value:"kpi",className:"space-y-4 mt-6",children:e.jsxs(le,{children:[e.jsx(me,{children:e.jsxs(xe,{className:"flex items-center gap-2",children:[e.jsx(Rs,{className:"h-5 w-5"}),N?"PEG ì„±ëŠ¥ ë¹„êµ ì°¨íŠ¸":"PEG ë¹„êµ ê²°ê³¼ (N-1 vs N)"]})}),e.jsx(ne,{children:E()})]})}),e.jsx(Ne,{value:"recommendations",className:"space-y-4 mt-6",children:X(g)})]});return e.jsx(fs,{open:d,onOpenChange:h,children:e.jsxs(ps,{className:`transition-all duration-500 ease-in-out transform ${k?"max-w-[99vw] h-[98vh] w-[99vw] scale-100":"max-w-6xl max-h-[85vh] w-[90vw] scale-100"}`,children:[e.jsx(Ns,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(vs,{className:"flex items-center gap-2",children:[e.jsx(Cs,{className:"h-5 w-5"}),N?"ë¶„ì„ ê²°ê³¼ ë¹„êµ":"ë¶„ì„ ê²°ê³¼ ìƒì„¸"]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(R,{variant:"ghost",size:"sm",onClick:()=>j(!k),className:"transition-all duration-200 hover:scale-110 hover:bg-accent",title:k?"ì›ë˜ í¬ê¸°ë¡œ (ESC)":"ìµœëŒ€í™” (F11)",children:k?e.jsx(Ds,{className:"h-4 w-4"}):e.jsx(ks,{className:"h-4 w-4"})})})]})}),e.jsx(ts,{className:`transition-all duration-300 ${k?"h-[85vh]":"max-h-[70vh]"}`,children:e.jsx("div",{className:"px-1",children:s()})})]})})},Gs=Object.freeze(Object.defineProperty({__proto__:null,default:Ze},Symbol.toStringTag,{value:"Module"})),Ms=()=>{const{results:d,loading:h,error:I,isEmpty:F,hasMore:K,isFiltered:_,resultCount:T,filters:$,updateFilters:H,clearFilters:L,refresh:G,loadMore:P,deleteResult:k}=Ts({initialLimit:20,autoFetch:!0}),[j,A]=t.useState(!1),[l,S]=t.useState(new Set),[w,U]=t.useState({key:"analysisDate",direction:"desc"}),[W,O]=t.useState({isOpen:!1,resultIds:[],mode:"single"}),n=t.useCallback((s,a={})=>{console.log(`[ResultsList] ${s}`,a)},[]),m=t.useMemo(()=>d!=null&&d.length?[...d].sort((a,r)=>{const o=a[w.key],i=r[w.key];if(o==null)return 1;if(i==null)return-1;if(w.key==="analysisDate"){const u=new Date(o),x=new Date(i);return w.direction==="asc"?u-x:x-u}if(typeof o=="string"&&typeof i=="string"){const u=o.localeCompare(i);return w.direction==="asc"?u:-u}return typeof o=="number"&&typeof i=="number"?w.direction==="asc"?o-i:i-o:0}):[],[d,w]),z=t.useCallback(s=>{U(a=>{const r=a.key===s&&a.direction==="asc"?"desc":"asc";return n("ì •ë ¬ ë³€ê²½",{key:s,direction:r}),{key:s,direction:r}})},[n]),N=t.useCallback(s=>{S(a=>{const r=new Set(a);return r.has(s)?r.delete(s):r.add(s),r})},[]),Q=t.useCallback(()=>{l.size===m.length?S(new Set):S(new Set(m.map(s=>s.id)))},[l.size,m]),ie=t.useCallback(async s=>{try{n("ë¶„ì„ ê²°ê³¼ ì‚­ì œ ì‹œì‘",{resultId:s}),await k(s),S(a=>{const r=new Set(a);return r.delete(s),r})}catch(a){n("ë¶„ì„ ê²°ê³¼ ì‚­ì œ ì‹¤íŒ¨",{resultId:s,error:a})}},[k,n]),v=t.useCallback(async()=>{if(l.size!==0)try{n("ë²Œí¬ ì‚­ì œ ì‹œì‘",{count:l.size});const s=Array.from(l).map(a=>k(a));await Promise.all(s),S(new Set),B.success(`${l.size}ê°œì˜ ê²°ê³¼ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.`)}catch(s){n("ë²Œí¬ ì‚­ì œ ì‹¤íŒ¨",{error:s}),B.error("ì¼ë¶€ ê²°ê³¼ ì‚­ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}},[l,k,n]),g=t.useCallback(s=>{n("ìƒì„¸ ë³´ê¸° ìš”ì²­",{resultId:s}),O({isOpen:!0,resultIds:[s],mode:"single"})},[n]),q=t.useCallback(()=>{if(l.size<2){B.error("ë¹„êµí•  ê²°ê³¼ë¥¼ 2ê°œ ì´ìƒ ì„ íƒí•´ì£¼ì„¸ìš”");return}if(l.size>5){B.error("ìµœëŒ€ 5ê°œê¹Œì§€ë§Œ ë¹„êµí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤");return}const s=Array.from(l);n("ë¹„êµ ë³´ê¸° ìš”ì²­",{resultIds:s,count:s.length}),O({isOpen:!0,resultIds:s,mode:"compare"})},[l,n]),J=t.useCallback(()=>{O({isOpen:!1,resultIds:[],mode:"single"})},[]),E=t.useCallback(()=>{if(!(m!=null&&m.length)){B.error("ë‚´ë³´ë‚¼ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.");return}try{n("ë°ì´í„° ë‚´ë³´ë‚´ê¸° ì‹œì‘",{count:m.length});const s=m.map(i=>{var u,x;return{"ë¶„ì„ ë‚ ì§œ":new Date(i.analysisDate).toLocaleString("ko-KR"),"NE ID":i.neId,"Cell ID":i.cellId,ìƒíƒœ:i.status,"ê²°ê³¼ ìˆ˜":((u=i.results)==null?void 0:u.length)||0,"í†µê³„ ìˆ˜":((x=i.stats)==null?void 0:x.length)||0}}),a=[Object.keys(s[0]).join(","),...s.map(i=>Object.values(i).join(","))].join(`
`),r=new Blob([a],{type:"text/csv;charset=utf-8;"}),o=document.createElement("a");o.href=URL.createObjectURL(r),o.download=`analysis_results_${new Date().toISOString().split("T")[0]}.csv`,o.click(),B.success("ë°ì´í„°ê°€ ë‚´ë³´ë‚´ê¸° ë˜ì—ˆìŠµë‹ˆë‹¤."),n("ë°ì´í„° ë‚´ë³´ë‚´ê¸° ì™„ë£Œ")}catch(s){n("ë°ì´í„° ë‚´ë³´ë‚´ê¸° ì‹¤íŒ¨",{error:s}),B.error("ë°ì´í„° ë‚´ë³´ë‚´ê¸°ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}},[m,n]),X=t.useCallback(s=>{switch(s==null?void 0:s.toLowerCase()){case"success":return"default";case"error":case"failed":return"destructive";case"warning":return"secondary";case"pending":case"processing":return"outline";default:return"secondary"}},[]),ce=t.useCallback(s=>{try{return new Date(s).toLocaleString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}catch{return s||"-"}},[]);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold",children:"LLM ë¶„ì„ ê²°ê³¼"}),e.jsxs("p",{className:"text-muted-foreground",children:["ì´ ",T,"ê°œì˜ ë¶„ì„ ê²°ê³¼",_&&" (í•„í„° ì ìš©ë¨)"]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[l.size>0&&e.jsxs(e.Fragment,{children:[l.size>=2&&e.jsxs(R,{variant:"default",size:"sm",onClick:q,children:[e.jsx(BarChart3,{className:"h-4 w-4 mr-2"}),"ë¹„êµí•˜ê¸° (",l.size,")"]}),e.jsxs(Ve,{children:[e.jsx(Be,{asChild:!0,children:e.jsxs(R,{variant:"destructive",size:"sm",children:[e.jsx(Le,{className:"h-4 w-4 mr-2"}),"ì„ íƒ ì‚­ì œ (",l.size,")"]})}),e.jsxs(Ge,{children:[e.jsxs(Ue,{children:[e.jsx(qe,{children:"ì„ íƒëœ ê²°ê³¼ ì‚­ì œ"}),e.jsxs(Xe,{children:["ì„ íƒëœ ",l.size,"ê°œì˜ ë¶„ì„ ê²°ê³¼ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? ì´ ì‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."]})]}),e.jsxs(We,{children:[e.jsx(Ye,{children:"ì·¨ì†Œ"}),e.jsx(Je,{onClick:v,children:"ì‚­ì œ"})]})]})]})]}),e.jsxs(R,{variant:"outline",size:"sm",onClick:E,disabled:!(m!=null&&m.length),children:[e.jsx(zs,{className:"h-4 w-4 mr-2"}),"ë‚´ë³´ë‚´ê¸°"]}),e.jsxs(R,{variant:"outline",size:"sm",onClick:()=>A(!j),children:[e.jsx(Ae,{className:"h-4 w-4 mr-2"}),"í•„í„°",e.jsx(ke,{className:`h-4 w-4 ml-2 transition-transform ${j?"rotate-180":""}`})]}),e.jsxs(R,{variant:"outline",size:"sm",onClick:G,disabled:h,children:[e.jsx(Te,{className:`h-4 w-4 mr-2 ${h?"animate-spin":""}`}),"ìƒˆë¡œê³ ì¹¨"]})]})]}),j&&e.jsx(Es,{filters:$,onFilterChange:(s,a)=>H({[s]:a}),onClearFilters:L,isCollapsed:!1,onToggleCollapse:()=>A(!1),showActiveCount:!0}),e.jsx(le,{children:e.jsxs(ne,{className:"p-0",children:[I&&e.jsxs("div",{className:"p-6 text-center",children:[e.jsx(Ie,{className:"h-12 w-12 text-destructive mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"ë°ì´í„° ë¡œë”© ì˜¤ë¥˜"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:I}),e.jsxs(R,{onClick:G,variant:"outline",children:[e.jsx(Te,{className:"h-4 w-4 mr-2"}),"ë‹¤ì‹œ ì‹œë„"]})]}),h&&F&&e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(Re,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"ë¶„ì„ ê²°ê³¼ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘..."})]}),!h&&F&&!I&&e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(Fe,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:_?"ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤":"ë¶„ì„ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:_?"ë‹¤ë¥¸ ì¡°ê±´ìœ¼ë¡œ ê²€ìƒ‰í•´ë³´ì„¸ìš”.":"ì•„ì§ ìƒì„±ëœ ë¶„ì„ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤."}),_&&e.jsxs(R,{onClick:L,variant:"outline",children:[e.jsx(ae,{className:"h-4 w-4 mr-2"}),"í•„í„° ì´ˆê¸°í™”"]})]}),!F&&!I&&e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(ns,{children:[e.jsx(rs,{children:e.jsxs(_e,{children:[e.jsx(ee,{className:"w-12",children:e.jsx("input",{type:"checkbox",checked:l.size===m.length&&m.length>0,onChange:Q,className:"rounded border-gray-300"})}),e.jsxs(ee,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>z("analysisDate"),children:["ë¶„ì„ ë‚ ì§œ",w.key==="analysisDate"&&e.jsx("span",{className:"ml-2",children:w.direction==="asc"?"â†‘":"â†“"})]}),e.jsxs(ee,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>z("neId"),children:["NE ID",w.key==="neId"&&e.jsx("span",{className:"ml-2",children:w.direction==="asc"?"â†‘":"â†“"})]}),e.jsxs(ee,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>z("cellId"),children:["Cell ID",w.key==="cellId"&&e.jsx("span",{className:"ml-2",children:w.direction==="asc"?"â†‘":"â†“"})]}),e.jsx(ee,{children:"ìƒíƒœ"}),e.jsx(ee,{className:"text-center",children:"ê²°ê³¼ ìˆ˜"}),e.jsx(ee,{className:"text-center",children:"í†µê³„ ìˆ˜"}),e.jsx(ee,{className:"w-20",children:"ì‘ì—…"})]})}),e.jsx(is,{children:m.map(s=>{var a,r;return e.jsxs(_e,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>g(s.id),children:[e.jsx(se,{onClick:o=>o.stopPropagation(),children:e.jsx("input",{type:"checkbox",checked:l.has(s.id),onChange:()=>N(s.id),className:"rounded border-gray-300"})}),e.jsx(se,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Se,{className:"h-4 w-4 text-muted-foreground"}),ce(s.analysisDate)]})}),e.jsx(se,{className:"font-medium",children:s.neId||"-"}),e.jsx(se,{className:"font-medium",children:s.cellId||"-"}),e.jsx(se,{children:e.jsx(re,{variant:X(s.status),children:s.status||"unknown"})}),e.jsx(se,{className:"text-center",children:((a=s.results)==null?void 0:a.length)||0}),e.jsx(se,{className:"text-center",children:((r=s.stats)==null?void 0:r.length)||0}),e.jsx(se,{onClick:o=>o.stopPropagation(),children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(R,{variant:"ghost",size:"sm",onClick:()=>g(s.id),title:"ìƒì„¸ ë³´ê¸°",children:e.jsx(Fe,{className:"h-4 w-4"})}),e.jsxs(Ve,{children:[e.jsx(Be,{asChild:!0,children:e.jsx(R,{variant:"ghost",size:"sm",title:"ì‚­ì œ",children:e.jsx(Le,{className:"h-4 w-4 text-destructive"})})}),e.jsxs(Ge,{children:[e.jsxs(Ue,{children:[e.jsx(qe,{children:"ë¶„ì„ ê²°ê³¼ ì‚­ì œ"}),e.jsx(Xe,{children:"ì´ ë¶„ì„ ê²°ê³¼ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? ì´ ì‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."})]}),e.jsxs(We,{children:[e.jsx(Ye,{children:"ì·¨ì†Œ"}),e.jsx(Je,{onClick:()=>ie(s.id),children:"ì‚­ì œ"})]})]})]})]})})]},s.id)})})]})}),K&&!h&&!I&&e.jsx("div",{className:"p-6 text-center border-t",children:e.jsxs(R,{variant:"outline",onClick:P,disabled:h,children:[h?e.jsx(Re,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(ke,{className:"h-4 w-4 mr-2"}),"ë” ë³´ê¸°"]})})]})}),e.jsx(Ze,{isOpen:W.isOpen,onClose:J,resultIds:W.resultIds,mode:W.mode})]})},Us=Object.freeze(Object.defineProperty({__proto__:null,default:Ms},Symbol.toStringTag,{value:"Module"}));export{Gs as R,Us as a};
