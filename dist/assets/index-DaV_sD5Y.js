const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/chunk-DX3kcswl.js","assets/chunk-CTtn32jH.js","assets/chunk-BziMVLSE.js","assets/chunk-BBx_fWpL.js","assets/chunk-M6kWLAXF.js","assets/chunk-DAqvpfSU.js","assets/chunk-1tnzff7l.js","assets/webVitals-BpaQWgNB.js"])))=>i.map(i=>d[i]);
var O=Object.defineProperty;var A=(r,o,t)=>o in r?O(r,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[o]=t;var b=(r,o,t)=>A(r,typeof o!="symbol"?o+"":o,t);import{r as m,j as e,g as S,z as T,y as L,D as E}from"./chunk-CTtn32jH.js";import{f as C,P as M}from"./chunk-DX3kcswl.js";import{e as I,p as $,S as k}from"./chunk-M6kWLAXF.js";import"./chunk-BziMVLSE.js";import"./chunk-BBx_fWpL.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))u(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const c of n.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&u(c)}).observe(document,{childList:!0,subtree:!0});function t(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function u(s){if(s.ep)return;s.ep=!0;const n=t(s);fetch(s.href,n)}})();const V="modulepreload",z=function(r){return"/"+r},y={},h=function(o,t,u){let s=Promise.resolve();if(t&&t.length>0){let c=function(d){return Promise.all(d.map(i=>Promise.resolve(i).then(x=>({status:"fulfilled",value:x}),x=>({status:"rejected",reason:x}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),p=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=c(t.map(d=>{if(d=z(d),d in y)return;y[d]=!0;const i=d.endsWith(".css"),x=i?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${x}`))return;const f=document.createElement("link");if(f.rel=i?"stylesheet":V,i||(f.as="script"),f.crossOrigin="",f.href=d,p&&f.setAttribute("nonce",p),document.head.appendChild(f),i)return new Promise((P,D)=>{f.addEventListener("load",P),f.addEventListener("error",()=>D(new Error(`Unable to preload CSS for ${d}`)))})}))}function n(c){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=c,window.dispatchEvent(a),!a.defaultPrevented)throw c}return s.then(c=>{for(const a of c||[])a.status==="rejected"&&n(a.reason);return o().catch(n)})};m.lazy(()=>h(()=>import("./chunk-DX3kcswl.js").then(r=>r.x),__vite__mapDeps([0,1,2,3,4])));m.lazy(()=>h(()=>import("./chunk-DAqvpfSU.js").then(r=>r.P),__vite__mapDeps([5,1,2,0,3,4])));m.lazy(()=>h(()=>import("./chunk-1tnzff7l.js").then(r=>r.a),__vite__mapDeps([6,1,2,0,3,4,5])));m.lazy(()=>h(()=>import("./chunk-1tnzff7l.js").then(r=>r.R),__vite__mapDeps([6,1,2,0,3,4,5])));const w=()=>h(()=>import("./chunk-DX3kcswl.js").then(r=>r.x),__vite__mapDeps([0,1,2,3,4])),R=()=>h(()=>import("./chunk-DAqvpfSU.js").then(r=>r.P),__vite__mapDeps([5,1,2,0,3,4])),_=()=>h(()=>import("./chunk-1tnzff7l.js").then(r=>r.a),__vite__mapDeps([6,1,2,0,3,4,5])),B=()=>{if("connection"in navigator){const o=navigator.connection.effectiveType;console.log(`🌐 네트워크 속도: ${o}`),o==="4g"||o==="3g"?(console.log("🚀 빠른 네트워크 감지 - 컴포넌트 프리로딩 시작"),setTimeout(()=>{w().catch(console.warn)},1e3),setTimeout(()=>{R().catch(console.warn),_().catch(console.warn)},2e3)):console.log("📶 느린 네트워크 - 필요시에만 로드")}else console.log("📶 네트워크 정보 불가 - 기본 프리로딩"),setTimeout(()=>{w().catch(console.warn)},2e3)},U=({children:r,activeMenu:o,setActiveMenu:t})=>{const u=[{id:"dashboard",label:"Dashboard",icon:I,preload:w},{id:"results",label:"분석 결과",icon:$,preload:_},{id:"preference",label:"Preference",icon:k,preload:R}];m.useEffect(()=>{B()},[]);const s=n=>{n.preload&&o!==n.id&&(console.log(`🎯 메뉴 호버 감지 - ${n.label} 프리로딩 시작`),n.preload().catch(c=>{console.warn(`⚠️ ${n.label} 프리로딩 실패:`,c)}))};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("header",{className:"bg-white shadow-sm border-b",children:e.jsx("div",{className:"px-6 py-4",children:e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"PVT KPI Dashboard"})})}),e.jsxs("div",{className:"flex",children:[e.jsxs("aside",{className:"w-64 bg-white shadow-sm min-h-screen flex flex-col",children:[e.jsx("nav",{className:"p-4",children:e.jsx("div",{className:"space-y-2",children:u.map(n=>{const c=n.icon;return e.jsxs(C,{variant:o===n.id?"default":"ghost",className:"w-full justify-start",onClick:()=>t(n.id),onMouseEnter:()=>s(n),children:[e.jsx(c,{className:"mr-2 h-4 w-4"}),n.label]},n.id)})})}),e.jsx("div",{className:"mt-auto p-4 text-xs text-gray-400",children:"Powered by PVT AI Crew"})]}),e.jsx("main",{className:"flex-1 p-6",children:r})]})]})};class W extends S.Component{constructor(t){super(t);b(this,"handleRetry",()=>{console.log("🔄 앱 재시도 중..."),this.setState(t=>({hasError:!1,error:null,errorInfo:null,retryCount:t.retryCount+1}))});b(this,"handleReload",()=>{console.log("🔄 페이지 새로고침 중..."),window.location.reload()});this.state={hasError:!1,error:null,errorInfo:null,retryCount:0}}static getDerivedStateFromError(t){return{hasError:!0}}componentDidCatch(t,u){var c,a,p,d;console.error("🚨 ErrorBoundary에서 에러 발생:",t),console.error("🚨 에러 메시지:",t.message),console.error("🚨 에러 스택:",t.stack),console.error("🚨 에러 정보:",u),console.error("🚨 컴포넌트 스택:",u.componentStack),console.error("🚨🚨🚨 === ERROR SUMMARY === 🚨🚨🚨"),console.error(`📝 Error Type: ${t.name}`),console.error(`📝 Error Message: ${t.message}`),console.error(`📝 First Stack Line: ${((a=(c=t.stack)==null?void 0:c.split(`
`))==null?void 0:a[1])||"N/A"}`),console.error("🚨🚨🚨 =================== 🚨🚨🚨"),console.error("🚨 에러 객체 전체:",{name:t.name,message:t.message,stack:t.stack,cause:t.cause,fileName:t.fileName,lineNumber:t.lineNumber,columnNumber:t.columnNumber}),console.error("🚨 에러 객체 모든 속성:");for(const i in t)try{console.error(`  ${i}:`,t[i])}catch{console.error(`  ${i}: [접근 불가]`)}console.error("🚨 에러 객체 프로토타입 체인:");let s=t,n=0;for(;s&&n<5;)console.error(`  Level ${n}:`,((d=(p=Object.getPrototypeOf(s))==null?void 0:p.constructor)==null?void 0:d.name)||"Unknown"),s=Object.getPrototypeOf(s),n++;t.name==="ReferenceError"&&(console.error("🔍 ReferenceError 상세 분석:"),console.error("  - 변수/함수가 정의되지 않았거나 접근할 수 없음"),console.error("  - 모듈 import 순서 문제 가능성"),console.error("  - 호이스팅 문제 가능성")),t.name==="TypeError"&&(console.error("🔍 TypeError 상세 분석:"),console.error("  - 객체가 null/undefined인데 속성에 접근 시도"),console.error("  - 함수가 아닌 것을 함수로 호출"),console.error("  - 잘못된 타입의 값 사용")),t.message.includes("Cannot access")&&(console.error("🔍 순환참조 또는 초기화 순서 문제로 추정됩니다."),console.error("🔍 해결 방안: 모듈 import 순서 확인, 지연 초기화 적용")),t.message.includes("before initialization")&&(console.error("🔍 변수/함수 초기화 순서 문제로 추정됩니다."),console.error("🔍 해결 방안: 함수 선언을 상단으로 이동, 호이스팅 확인")),t.message.includes("is not a function")&&(console.error("🔍 함수 호출 문제로 추정됩니다."),console.error("🔍 해결 방안: 함수 존재 여부 확인, import 확인")),console.error("🔍 현재 URL:",window.location.href),console.error("🔍 User Agent:",navigator.userAgent),console.error("🔍 현재 시간:",new Date().toISOString()),typeof window<"u"&&console.error("🔍 window 객체 상태:",{hasReact:!!window.React,hasReactDOM:!!window.ReactDOM,hasPreferenceContext:!!window.__PREFERENCE_CONTEXT_DEBUG__,runtimeConfig:window.__RUNTIME_CONFIG__}),this.setState({error:t,errorInfo:u})}render(){return this.state.hasError?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:e.jsx("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 mb-4",children:e.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:"앱 초기화 중 문제가 발생했습니다"}),e.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"순환참조나 초기화 오류로 인해 앱을 로드할 수 없습니다. 아래 버튼을 클릭하여 다시 시도해주세요."}),!1,e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:this.handleRetry,className:"w-full bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:["다시 시도 (",this.state.retryCount+1,"번째)"]}),e.jsx("button",{onClick:this.handleReload,className:"w-full bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700 transition-colors",children:"페이지 새로고침"})]}),e.jsxs("div",{className:"mt-4 text-xs text-gray-500",children:[e.jsx("p",{children:"문제가 지속되면 브라우저 캐시를 정리해보세요."}),e.jsx("p",{children:"Chrome: Ctrl+Shift+R (Windows) / Cmd+Shift+R (Mac)"})]})]})})}):this.props.children}}const F=m.lazy(()=>h(()=>import("./chunk-DX3kcswl.js").then(r=>r.x),__vite__mapDeps([0,1,2,3,4]))),H=m.lazy(()=>h(()=>import("./chunk-DAqvpfSU.js").then(r=>r.P),__vite__mapDeps([5,1,2,0,3,4]))),q=m.lazy(()=>h(()=>import("./chunk-1tnzff7l.js").then(r=>r.a),__vite__mapDeps([6,1,2,0,3,4,5]))),l=(r,o,t=null)=>{const s=`[App:${new Date().toISOString()}]`;switch(r){case"info":console.log(`${s} ${o}`,t);break;case"error":console.error(`${s} ${o}`,t);break;case"warn":console.warn(`${s} ${o}`,t);break;case"debug":console.debug(`${s} ${o}`,t);break;default:console.log(`${s} ${o}`,t)}},g={DASHBOARD:"dashboard",PREFERENCE:"preference",RESULTS:"results"};function K(){l("info","App 컴포넌트 초기화");const[r,o]=m.useState(g.DASHBOARD),[t,u]=m.useState(!1);if(m.useEffect(()=>{l("debug","App 초기화 시작");const a=setTimeout(()=>{var p,d;try{if(l("info","App 초기화 완료"),typeof window<"u"){const i={hasReact:!!window.React,hasReactDOM:!!window.ReactDOM,hasStrictMode:!!((p=window.React)!=null&&p.StrictMode),hasCreateRoot:!!((d=window.ReactDOM)!=null&&d.createRoot),hasPreferenceContext:!!window.hasPreferenceContext};l("debug","React 상태 확인",i),(!i.hasReact||!i.hasReactDOM)&&l("warn","React 상태가 비정상입니다",i)}u(!0),l("info","App 준비 상태 설정 완료")}catch(i){l("error","App 초기화 중 오류 발생",i),u(!0)}},500);return()=>{l("debug","App 초기화 타이머 정리"),clearTimeout(a)}},[]),!t)return l("debug","로딩 화면 렌더링"),e.jsxs("div",{className:"flex items-center justify-center min-h-screen",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"}),e.jsx("span",{className:"ml-2 text-gray-600",children:"앱 초기화 중..."})]});const s=()=>{l("debug","콘텐츠 렌더링",{activeMenu:r});try{switch(r){case g.DASHBOARD:return l("debug","Dashboard 컴포넌트 렌더링"),e.jsx(F,{});case g.PREFERENCE:return l("debug","PreferenceManager 컴포넌트 렌더링"),e.jsx(H,{});case g.RESULTS:return l("debug","ResultsList 컴포넌트 렌더링"),e.jsx(q,{});default:return l("warn","알 수 없는 메뉴 선택",{activeMenu:r}),n()}}catch(a){return l("error","콘텐츠 렌더링 중 오류 발생",{activeMenu:r,error:a}),c(a)}},n=()=>(l("info","기본 콘텐츠 렌더링"),e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"🎉 KPI Dashboard - 리팩토링 완료!"}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"✅ 모든 컴포넌트가 안전하게 리팩토링되었습니다"}),e.jsxs("p",{className:"text-gray-600 mb-4",children:["현재 선택된 메뉴: ",e.jsx("strong",{children:r})]}),e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-md p-4",children:e.jsxs("p",{className:"text-green-800",children:[e.jsx("strong",{children:"안정성 테스트 완료!"})," 모든 컴포넌트가 정상적으로 작동하고 있습니다."]})}),e.jsx("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-md",children:e.jsx("p",{className:"text-blue-800 text-sm",children:"리팩토링이 완료되어 코드가 더 안전하고 유지보수하기 쉬워졌습니다! 🚀"})}),e.jsx("div",{className:"mt-4 p-4 bg-yellow-50 border border-yellow-200 rounded-md",children:e.jsxs("p",{className:"text-yellow-800 text-sm",children:[e.jsx("strong",{children:"리팩토링 내용:"}),e.jsxs("ul",{className:"list-disc list-inside mt-2",children:[e.jsx("li",{children:"모든 파일에 상세한 주석과 로깅 추가"}),e.jsx("li",{children:"에러 처리 강화"}),e.jsx("li",{children:"코드 모듈화 및 분리"}),e.jsx("li",{children:"타입 안전성 개선"}),e.jsx("li",{children:"성능 최적화"})]})]})})]})]})})),c=a=>(l("error","오류 콘텐츠 렌더링",{error:a}),e.jsx("div",{className:"min-h-screen bg-red-50",children:e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-red-900 mb-8",children:"⚠️ 오류가 발생했습니다"}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-red-800 mb-4",children:"콘텐츠 렌더링 중 오류가 발생했습니다"}),e.jsxs("p",{className:"text-gray-600 mb-4",children:["메뉴: ",e.jsx("strong",{children:r})]}),e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:[e.jsx("p",{className:"text-red-800",children:e.jsx("strong",{children:"오류 정보:"})}),e.jsx("pre",{className:"mt-2 text-sm text-red-700 bg-red-100 p-2 rounded",children:(a==null?void 0:a.message)||"알 수 없는 오류"})]}),e.jsx("div",{className:"mt-4",children:e.jsx("button",{onClick:()=>window.location.reload(),className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded",children:"페이지 새로고침"})})]})]})}));return l("debug","App 메인 렌더링",{activeMenu:r,isReady:t}),e.jsx(W,{children:e.jsx(M,{children:e.jsx(U,{activeMenu:r,setActiveMenu:o,children:e.jsx(m.Suspense,{fallback:e.jsxs("div",{className:"flex items-center justify-center min-h-screen",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"}),e.jsx("span",{className:"ml-2 text-gray-600",children:"컴포넌트 로드 중..."})]}),children:s()})})})})}const G=({...r})=>{const{theme:o="system"}=T();return e.jsx(L,{theme:o,className:"toaster group",style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)"},...r})};if(typeof window<"u")try{window.React={StrictMode:m.StrictMode},window.ReactDOM={createRoot:E.createRoot},window.hasReact=!0,window.hasReactDOM=!0,console.log("🔧 React 전역 등록 완료")}catch(r){console.error("❌ React 전역 등록 실패:",r)}const X=async()=>{try{console.log("🔍 Web Vitals 측정 시작..."),document.readyState==="loading"?document.addEventListener("DOMContentLoaded",async()=>{await j()}):await j(),setTimeout(async()=>{try{const{generatePerformanceReport:r}=await h(async()=>{const{generatePerformanceReport:o}=await import("./webVitals-BpaQWgNB.js");return{generatePerformanceReport:o}},__vite__mapDeps([7,1,2,0,3,4]));r()}catch(r){console.warn("⚠️ 성능 리포트 생성 실패:",r)}},5e3)}catch(r){console.warn("⚠️ Web Vitals 초기화 실패:",r)}},j=async()=>{try{const{measureWebVitals:r}=await h(async()=>{const{measureWebVitals:o}=await import("./webVitals-BpaQWgNB.js");return{measureWebVitals:o}},__vite__mapDeps([7,1,2,0,3,4]));await r()}catch(r){console.warn("⚠️ Web Vitals 측정 실패:",r)}};typeof window<"u"&&setTimeout(X,100);const v=()=>{try{console.log("🔄 React 앱 렌더링 시작");const r=document.getElementById("root");if(!r){console.error("❌ root 엘리먼트를 찾을 수 없습니다");return}console.log("✅ root 엘리먼트 발견:",r);const o=E.createRoot(r);console.log("✅ React Root 생성 완료"),o.render(e.jsxs(e.Fragment,{children:[e.jsx(K,{}),e.jsx(G,{position:"top-right",richColors:!0})]})),console.log("✅ React 앱 렌더링 완료")}catch(r){console.error("❌ React 앱 렌더링 실패:",r);const o=document.getElementById("root");o&&(o.innerHTML=`
        <div style="display: flex; justify-content: center; align-items: center; height: 100vh; font-family: Arial, sans-serif;">
          <div style="text-align: center; padding: 20px;">
            <h2>앱 초기화 중 문제가 발생했습니다</h2>
            <p>페이지를 새로고침해주세요.</p>
            <button onclick="window.location.reload()" style="padding: 10px 20px; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer;">
              새로고침
            </button>
          </div>
        </div>
      `)}},N=()=>{try{console.log("✅ 앱 초기화 시작"),document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{setTimeout(v,100)}):setTimeout(v,100)}catch(r){console.error("❌ startApp 실행 중 오류:",r),setTimeout(N,500)}};N();export{h as _};
