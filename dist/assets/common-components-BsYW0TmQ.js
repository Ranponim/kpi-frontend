import{M as Ve,N as e,r as C,O as G}from"./vendor-Cw6wx6N3.js";import{S as Pe,R as Ge,T as qe,I as We,V as Ue,P as Ye,C as He,a as Je,b as Xe,c as Qe,d as Ze,e as es,f as ss,g as ts,h as as,L as rs,i as ns,j as ls,k as is,l as ds,m as cs,n as os,o as xs,p as ms,q as us,r as hs,s as gs,t as ps,u as js,v as fs,w as vs}from"./ui-vendor-FYf9CHse.js";import{C as ue,a as Ie,b as ye,c as bs,d as Me,e as Re,f as ke,g as ne,M as Ns,h as ws,A as Ce,T as _e,i as ys,F as ks,j as H,R as Z,S as Cs,D as De,k as _s,l as Ds,E as Ss,m as zs,n as $s,L as ve,B as Es,o as Fs,p as Ls}from"./icon-vendor-1p3lj7wq.js";import{R as se,B as As,C as oe,X as xe,Y as le,T as te,L as ae,a as re,b as be,c as Ps,d as ie,e as Is,P as Ms,f as Rs,g as Ks,h as $e,i as Os,j as Ts,A as Bs,k as me,l as Vs}from"./chart-vendor-C0DB73VJ.js";import{f as Gs,C as Ke}from"./utils-vendor-NSOZWQzV.js";function v(...s){return Ve(Gs(s))}const qs=Ke("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function L({className:s,variant:t,size:o,asChild:p=!1,...j}){const F=p?Pe:"button";return e.jsx(F,{"data-slot":"button",className:v(qs({variant:t,size:o,className:s})),...j})}function W({className:s,...t}){return e.jsx("div",{"data-slot":"card",className:v("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",s),...t})}function de({className:s,...t}){return e.jsx("div",{"data-slot":"card-header",className:v("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",s),...t})}function ce({className:s,...t}){return e.jsx("div",{"data-slot":"card-title",className:v("leading-none font-semibold",s),...t})}function ht({className:s,...t}){return e.jsx("div",{"data-slot":"card-description",className:v("text-muted-foreground text-sm",s),...t})}function Y({className:s,...t}){return e.jsx("div",{"data-slot":"card-content",className:v("px-6",s),...t})}const Ws=Ke("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function I({className:s,variant:t,asChild:o=!1,...p}){const j=o?Pe:"span";return e.jsx(j,{"data-slot":"badge",className:v(Ws({variant:t}),s),...p})}function he({...s}){return e.jsx(Ge,{"data-slot":"select",...s})}function ge({...s}){return e.jsx(Ue,{"data-slot":"select-value",...s})}function pe({className:s,size:t="default",children:o,...p}){return e.jsxs(qe,{"data-slot":"select-trigger","data-size":t,className:v("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s),...p,children:[o,e.jsx(We,{asChild:!0,children:e.jsx(ue,{className:"size-4 opacity-50"})})]})}function je({className:s,children:t,position:o="popper",...p}){return e.jsx(Ye,{children:e.jsxs(He,{"data-slot":"select-content",className:v("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",o==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:o,...p,children:[e.jsx(Us,{}),e.jsx(Je,{className:v("p-1",o==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:t}),e.jsx(Ys,{})]})})}function Q({className:s,children:t,...o}){return e.jsxs(Xe,{"data-slot":"select-item",className:v("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",s),...o,children:[e.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:e.jsx(Qe,{children:e.jsx(Ie,{className:"size-4"})})}),e.jsx(Ze,{children:t})]})}function Us({className:s,...t}){return e.jsx(es,{"data-slot":"select-scroll-up-button",className:v("flex cursor-default items-center justify-center py-1",s),...t,children:e.jsx(ye,{className:"size-4"})})}function Ys({className:s,...t}){return e.jsx(ss,{"data-slot":"select-scroll-down-button",className:v("flex cursor-default items-center justify-center py-1",s),...t,children:e.jsx(ue,{className:"size-4"})})}function V({className:s,...t}){return e.jsx(ts,{"data-slot":"label",className:v("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",s),...t})}function Hs({className:s,...t}){return e.jsx(as,{"data-slot":"tabs",className:v("flex flex-col gap-2",s),...t})}function Js({className:s,...t}){return e.jsx(rs,{"data-slot":"tabs-list",className:v("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",s),...t})}function Ee({className:s,...t}){return e.jsx(ns,{"data-slot":"tabs-trigger",className:v("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s),...t})}function Fe({className:s,...t}){return e.jsx(ls,{"data-slot":"tabs-content",className:v("flex-1 outline-none",s),...t})}function fe({className:s,type:t,...o}){return e.jsx("input",{type:t,"data-slot":"input",className:v("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",s),...o})}function Ne({className:s,...t}){return e.jsx(is,{"data-slot":"checkbox",className:v("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",s),...t,children:e.jsx(ds,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:e.jsx(Ie,{className:"size-3.5"})})})}function Oe({className:s,orientation:t="horizontal",decorative:o=!0,...p}){return e.jsx(cs,{"data-slot":"separator-root",decorative:o,orientation:t,className:v("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",s),...p})}const Le=({title:s="날짜 범위",description:t="분석할 기간을 선택하세요",startDate:o,endDate:p,onDateChange:j,preset:F="",onPresetChange:S,disabled:w=!1,error:g=null,className:D="",showPresets:y=!0,minDate:$=null,maxDate:k=null})=>{const[M,d]=C.useState(o||""),[P,K]=C.useState(p||""),[E,B]=C.useState(null),z=[{value:"last7days",label:"최근 7일",days:7},{value:"last14days",label:"최근 14일",days:14},{value:"last30days",label:"최근 30일",days:30},{value:"thisweek",label:"이번 주",custom:!0},{value:"lastweek",label:"지난 주",custom:!0},{value:"thismonth",label:"이번 달",custom:!0},{value:"lastmonth",label:"지난 달",custom:!0},{value:"custom",label:"직접 선택",custom:!0}];C.useEffect(()=>{d(o||""),K(p||"")},[o,p]);const m=(c,x)=>{if(!c||!x)return"시작 날짜와 종료 날짜를 모두 입력해주세요";const f=new Date(c),N=new Date(x);return isNaN(f)||isNaN(N)?"올바른 날짜 형식을 입력해주세요":f>=N?"종료 날짜는 시작 날짜보다 이후여야 합니다":(N-f)/(1e3*60*60*24)>365?"날짜 범위는 최대 365일까지 선택할 수 있습니다":$&&f<new Date($)?`시작 날짜는 ${$} 이후여야 합니다`:k&&N>new Date(k)?`종료 날짜는 ${k} 이전이어야 합니다`:null},l=(c,x)=>{let f=M,N=P;c==="start"?(f=x,d(x)):c==="end"&&(N=x,K(x));const A=m(f,N);B(A),!A&&j&&j({startDate:f,endDate:N})},h=c=>{const x=new Date;let f,N;switch(c){case"last7days":N=new Date(x),f=new Date(x.getTime()-10080*60*1e3);break;case"last14days":N=new Date(x),f=new Date(x.getTime()-336*60*60*1e3);break;case"last30days":N=new Date(x),f=new Date(x.getTime()-720*60*60*1e3);break;case"thisweek":const a=new Date(x);a.setDate(x.getDate()-x.getDay()),f=a,N=new Date(x);break;case"lastweek":const r=new Date(x);r.setDate(x.getDate()-x.getDay()-1);const _=new Date(r);_.setDate(r.getDate()-6),f=_,N=r;break;case"thismonth":f=new Date(x.getFullYear(),x.getMonth(),1),N=new Date(x);break;case"lastmonth":const R=new Date(x.getFullYear(),x.getMonth()-1,1),q=new Date(x.getFullYear(),x.getMonth(),0);f=R,N=q;break;case"custom":S&&S(c);return;default:return}const A=f.toISOString().split("T")[0],U=N.toISOString().split("T")[0];d(A),K(U);const J=m(A,U);B(J),!J&&j&&j({startDate:A,endDate:U}),S&&S(c)},n=(()=>{if(!M||!P)return null;try{const c=new Date(M),x=new Date(P);return{days:Math.ceil((x-c)/(1e3*60*60*24)),startFormatted:c.toLocaleDateString("ko-KR"),endFormatted:x.toLocaleDateString("ko-KR")}}catch{return null}})(),i=g||E,u=!i&&M&&P;return e.jsxs(W,{className:`${D} ${w?"opacity-50":""}`,children:[e.jsxs(de,{className:"pb-3",children:[e.jsxs(ce,{className:"flex items-center gap-2 text-base",children:[e.jsx(bs,{className:"h-4 w-4"}),s]}),t&&e.jsx("p",{className:"text-sm text-muted-foreground",children:t})]}),e.jsxs(Y,{className:"space-y-4",children:[y&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(V,{className:"text-sm font-medium",children:"빠른 선택"}),e.jsxs(he,{value:F,onValueChange:h,disabled:w,children:[e.jsx(pe,{children:e.jsx(ge,{placeholder:"기간을 선택하세요"})}),e.jsx(je,{children:z.map(c=>e.jsx(Q,{value:c.value,children:c.label},c.value))})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(V,{htmlFor:`start-${s}`,className:"text-sm",children:"시작 날짜"}),e.jsx(fe,{id:`start-${s}`,type:"date",value:M,onChange:c=>l("start",c.target.value),disabled:w,min:$,max:k,className:i?"border-red-500":""})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(V,{htmlFor:`end-${s}`,className:"text-sm",children:"종료 날짜"}),e.jsx(fe,{id:`end-${s}`,type:"date",value:P,onChange:c=>l("end",c.target.value),disabled:w,min:$,max:k,className:i?"border-red-500":""})]})]}),i&&e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-red-50 border border-red-200 rounded-lg",children:[e.jsx(Me,{className:"h-4 w-4 text-red-500 flex-shrink-0"}),e.jsx("span",{className:"text-sm text-red-700",children:i})]}),n&&u&&e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-green-50 border border-green-200 rounded-lg",children:[e.jsx(Re,{className:"h-4 w-4 text-green-500 flex-shrink-0"}),e.jsxs("div",{className:"text-sm text-green-700",children:[e.jsxs("span",{className:"font-medium",children:[n.days,"일 기간"]}),e.jsxs("span",{className:"text-green-600 ml-2",children:["(",n.startFormatted," ~ ",n.endFormatted,")"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(I,{variant:u?"default":"secondary",className:"text-xs",children:[e.jsx(ke,{className:"h-3 w-3 mr-1"}),u?"유효한 범위":"범위 설정 필요"]}),n&&u&&e.jsxs(I,{variant:"outline",className:"text-xs",children:[n.days,"일 데이터"]})]})]})]})},Te=({comparisonResults:s,title:t="비교 분석 차트",className:o="",showControls:p=!0,defaultChartType:j="bar",height:F=400})=>{const[S,w]=C.useState(j),[g,D]=C.useState(!1),[y,$]=C.useState("mean"),k=[{value:"bar",label:"막대 차트",icon:ne},{value:"line",label:"라인 차트",icon:Ce},{value:"area",label:"영역 차트",icon:_e},{value:"pie",label:"파이 차트",icon:ys},{value:"radar",label:"레이더 차트",icon:Ce},{value:"composed",label:"복합 차트",icon:ne}],M=[{value:"mean",label:"평균값",description:"두 기간의 평균 비교"},{value:"delta",label:"Delta",description:"절대값 변화량"},{value:"delta_percentage",label:"Delta %",description:"상대적 변화율"}],d=C.useMemo(()=>s!=null&&s.analysis_results?(console.log("📊 차트 데이터 생성 중:",s.analysis_results),s.analysis_results.map(n=>{var f,N;const i=parseFloat((f=n.period1_stats)==null?void 0:f.mean)||0,u=parseFloat((N=n.period2_stats)==null?void 0:N.mean)||0,c=parseFloat(n.delta)||0,x=parseFloat(n.delta_percentage)||0;return{name:n.peg_name,peg_name:n.peg_name,period1:i,period2:u,delta:c,delta_percentage:x,improvement_status:n.improvement_status,improvement_magnitude:n.improvement_magnitude,rsd_period1:parseFloat(n.rsd_period1)||0,rsd_period2:parseFloat(n.rsd_period2)||0,color:n.improvement_status==="improved"?"#22c55e":n.improvement_status==="degraded"?"#ef4444":"#3b82f6",abs_delta:Math.abs(c),abs_delta_percentage:Math.abs(x)}})):[],[s]),P=C.useMemo(()=>{if(!d.length)return[];const n=d.filter(c=>c.improvement_status==="improved").length,i=d.filter(c=>c.improvement_status==="degraded").length,u=d.filter(c=>c.improvement_status==="stable").length;return[{name:"개선",value:n,color:"#22c55e"},{name:"악화",value:i,color:"#ef4444"},{name:"안정",value:u,color:"#3b82f6"}].filter(c=>c.value>0)},[d]),K=({active:n,payload:i,label:u})=>{if(n&&i&&i.length){const c=i[0].payload;return e.jsxs("div",{className:"bg-white p-3 border rounded-lg shadow-lg",children:[e.jsx("h4",{className:"font-semibold text-sm",children:u}),e.jsxs("div",{className:"space-y-1 mt-2",children:[i.map((x,f)=>e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsx("div",{className:"w-3 h-3 rounded",style:{backgroundColor:x.color}}),e.jsxs("span",{children:[x.name,": ",x.value]})]},f)),c.improvement_status&&e.jsxs("div",{className:"text-xs text-muted-foreground mt-2 pt-2 border-t",children:["상태: ",c.improvement_status==="improved"?"개선":c.improvement_status==="degraded"?"악화":"안정",c.improvement_magnitude&&` (${c.improvement_magnitude})`]})]})]})}return null},E=()=>e.jsx(se,{width:"100%",height:g?"80vh":F,children:e.jsxs(As,{data:d,margin:{top:20,right:30,left:20,bottom:5},children:[e.jsx(oe,{strokeDasharray:"3 3"}),e.jsx(xe,{dataKey:"name",angle:-45,textAnchor:"end",height:100,fontSize:12}),e.jsx(le,{fontSize:12}),e.jsx(te,{content:e.jsx(K,{})}),e.jsx(ae,{}),y==="mean"&&e.jsxs(e.Fragment,{children:[e.jsx(re,{dataKey:"period1",fill:"#8884d8",name:"기간 1"}),e.jsx(re,{dataKey:"period2",fill:"#82ca9d",name:"기간 2"})]}),y==="delta"&&e.jsx(re,{dataKey:"delta",name:"Delta",children:d.map((n,i)=>e.jsx(be,{fill:n.color},`cell-${i}`))}),y==="delta_percentage"&&e.jsx(re,{dataKey:"delta_percentage",name:"Delta %",children:d.map((n,i)=>e.jsx(be,{fill:n.color},`cell-${i}`))})]})}),B=()=>e.jsx(se,{width:"100%",height:g?"80vh":F,children:e.jsxs(Vs,{data:d,margin:{top:20,right:30,left:20,bottom:5},children:[e.jsx(oe,{strokeDasharray:"3 3"}),e.jsx(xe,{dataKey:"name",angle:-45,textAnchor:"end",height:100,fontSize:12}),e.jsx(le,{fontSize:12}),e.jsx(te,{content:e.jsx(K,{})}),e.jsx(ae,{}),y==="mean"&&e.jsxs(e.Fragment,{children:[e.jsx(ie,{type:"monotone",dataKey:"period1",stroke:"#8884d8",strokeWidth:2,name:"기간 1"}),e.jsx(ie,{type:"monotone",dataKey:"period2",stroke:"#82ca9d",strokeWidth:2,name:"기간 2"})]}),y==="delta"&&e.jsx(ie,{type:"monotone",dataKey:"delta",stroke:"#ff7300",strokeWidth:2,name:"Delta"}),y==="delta_percentage"&&e.jsx(ie,{type:"monotone",dataKey:"delta_percentage",stroke:"#ff7300",strokeWidth:2,name:"Delta %"})]})}),z=()=>e.jsx(se,{width:"100%",height:g?"80vh":F,children:e.jsxs(Bs,{data:d,margin:{top:20,right:30,left:20,bottom:5},children:[e.jsx(oe,{strokeDasharray:"3 3"}),e.jsx(xe,{dataKey:"name",angle:-45,textAnchor:"end",height:100,fontSize:12}),e.jsx(le,{fontSize:12}),e.jsx(te,{content:e.jsx(K,{})}),e.jsx(ae,{}),y==="mean"&&e.jsxs(e.Fragment,{children:[e.jsx(me,{type:"monotone",dataKey:"period1",stackId:"1",stroke:"#8884d8",fill:"#8884d8",fillOpacity:.6,name:"기간 1"}),e.jsx(me,{type:"monotone",dataKey:"period2",stackId:"2",stroke:"#82ca9d",fill:"#82ca9d",fillOpacity:.6,name:"기간 2"})]}),y==="delta"&&e.jsx(me,{type:"monotone",dataKey:"delta",stroke:"#ff7300",fill:"#ff7300",fillOpacity:.6,name:"Delta"}),y==="delta_percentage"&&e.jsx(me,{type:"monotone",dataKey:"delta_percentage",stroke:"#ff7300",fill:"#ff7300",fillOpacity:.6,name:"Delta %"})]})}),m=()=>e.jsx(se,{width:"100%",height:g?"80vh":F,children:e.jsxs(Os,{children:[e.jsx(Ts,{data:P,cx:"50%",cy:"50%",labelLine:!1,label:({name:n,value:i,percent:u})=>`${n}: ${i}개 (${(u*100).toFixed(0)}%)`,outerRadius:g?200:100,fill:"#8884d8",dataKey:"value",children:P.map((n,i)=>e.jsx(be,{fill:n.color},`cell-${i}`))}),e.jsx(te,{}),e.jsx(ae,{})]})}),l=()=>{const n=d.map(i=>({peg:i.name.length>10?i.name.substring(0,8)+"...":i.name,period1:Math.min(Math.max(i.period1/Math.max(...d.map(u=>u.period1))*100,0),100),period2:Math.min(Math.max(i.period2/Math.max(...d.map(u=>u.period2))*100,0),100)}));return e.jsx(se,{width:"100%",height:g?"80vh":F,children:e.jsxs(Is,{data:n,children:[e.jsx(Ms,{}),e.jsx(Rs,{dataKey:"peg",fontSize:10}),e.jsx(Ks,{angle:90,domain:[0,100],fontSize:10,tick:!1}),e.jsx($e,{name:"기간 1",dataKey:"period1",stroke:"#8884d8",fill:"#8884d8",fillOpacity:.3}),e.jsx($e,{name:"기간 2",dataKey:"period2",stroke:"#82ca9d",fill:"#82ca9d",fillOpacity:.3}),e.jsx(ae,{}),e.jsx(te,{})]})})},h=()=>e.jsx(se,{width:"100%",height:g?"80vh":F,children:e.jsxs(Ps,{data:d,margin:{top:20,right:30,left:20,bottom:5},children:[e.jsx(oe,{strokeDasharray:"3 3"}),e.jsx(xe,{dataKey:"name",angle:-45,textAnchor:"end",height:100,fontSize:12}),e.jsx(le,{yAxisId:"left",fontSize:12}),e.jsx(le,{yAxisId:"right",orientation:"right",fontSize:12}),e.jsx(te,{content:e.jsx(K,{})}),e.jsx(ae,{}),e.jsx(re,{yAxisId:"left",dataKey:"period1",fill:"#8884d8",name:"기간 1"}),e.jsx(re,{yAxisId:"left",dataKey:"period2",fill:"#82ca9d",name:"기간 2"}),e.jsx(ie,{yAxisId:"right",type:"monotone",dataKey:"delta_percentage",stroke:"#ff7300",strokeWidth:3,name:"Delta %"})]})}),b=()=>{switch(S){case"bar":return E();case"line":return B();case"area":return z();case"pie":return m();case"radar":return l();case"composed":return h();default:return E()}};return!s||!d.length?e.jsx(W,{className:o,children:e.jsxs(Y,{className:"flex flex-col items-center justify-center h-64",children:[e.jsx(ne,{className:"h-12 w-12 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"차트 데이터 없음"}),e.jsx("p",{className:"text-muted-foreground text-center",children:"비교 분석을 실행하면 결과를 차트로 볼 수 있습니다"})]})}):e.jsxs(W,{className:`${o} ${g?"fixed inset-4 z-50 bg-white":""}`,children:[e.jsxs(de,{className:"pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(ce,{className:"flex items-center gap-2",children:[e.jsx(ne,{className:"h-5 w-5"}),t,e.jsxs(I,{variant:"outline",className:"ml-2",children:[d.length,"개 PEG"]})]}),p&&e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(L,{variant:"ghost",size:"sm",onClick:()=>D(!g),children:g?e.jsx(Ns,{className:"h-4 w-4"}):e.jsx(ws,{className:"h-4 w-4"})})})]}),p&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"차트 타입"}),e.jsxs(he,{value:S,onValueChange:w,children:[e.jsx(pe,{children:e.jsx(ge,{})}),e.jsx(je,{children:k.map(n=>{const i=n.icon;return e.jsx(Q,{value:n.value,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(i,{className:"h-4 w-4"}),n.label]})},n.value)})})]})]}),!["pie","radar"].includes(S)&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"표시 메트릭"}),e.jsxs(he,{value:y,onValueChange:$,children:[e.jsx(pe,{children:e.jsx(ge,{})}),e.jsx(je,{children:M.map(n=>e.jsx(Q,{value:n.value,children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:n.label}),e.jsx("div",{className:"text-xs text-muted-foreground",children:n.description})]})},n.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"차트 정보"}),e.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[e.jsxs("div",{children:["총 ",d.length,"개 PEG 비교"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(I,{variant:"secondary",className:"text-xs",children:["개선: ",d.filter(n=>n.improvement_status==="improved").length]}),e.jsxs(I,{variant:"destructive",className:"text-xs",children:["악화: ",d.filter(n=>n.improvement_status==="degraded").length]})]})]})]})]})]}),e.jsxs(Y,{children:[e.jsx("div",{className:"w-full",children:b()}),e.jsx("div",{className:"mt-4 pt-4 border-t",children:e.jsx("div",{className:"text-xs text-muted-foreground space-y-1",children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded"}),e.jsxs("span",{children:["개선 (",d.filter(n=>n.improvement_status==="improved").length,"개)"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-red-500 rounded"}),e.jsxs("span",{children:["악화 (",d.filter(n=>n.improvement_status==="degraded").length,"개)"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded"}),e.jsxs("span",{children:["안정 (",d.filter(n=>n.improvement_status==="stable").length,"개)"]})]}),e.jsxs("div",{className:"text-muted-foreground",children:["총 ",d.length,"개 PEG 분석"]})]})})})]})]})},gt=Object.freeze(Object.defineProperty({__proto__:null,default:Te},Symbol.toStringTag,{value:"Module"})),Be=C.memo(({ne:s="",cellid:t="",onNeChange:o,onCellidChange:p,compact:j=!1,showValidation:F=!0,onValidate:S,onReset:w,className:g=""})=>{const[D,y]=C.useState(!1),[$,k]=C.useState([]),M=l=>{if(!l||l.trim()==="")return[];const h=[],b=l.split(",").map(i=>i.trim()).filter(i=>i!=="");return b.forEach((i,u)=>{/^nvgnb#\d+$/.test(i)||h.push(`NE #${u+1}: '${i}'은 올바른 NE 형식(nvgnb#숫자)이 아닙니다.`)}),[...new Set(b)].length!==b.length&&h.push("중복된 NE 값이 있습니다."),h},d=l=>{if(!l||l.trim()==="")return[];const h=[],b=l.split(",").map(i=>i.trim()).filter(i=>i!=="");return b.forEach((i,u)=>{/^\d+$/.test(i)||h.push(`Cell ID #${u+1}: '${i}'은 숫자 형식이어야 합니다.`),(i.length<3||i.length>6)&&h.push(`Cell ID #${u+1}: '${i}'의 길이가 올바르지 않습니다 (3-6자리).`)}),[...new Set(b)].length!==b.length&&h.push("중복된 Cell ID 값이 있습니다."),h},P=()=>{y(!0);const l=[];try{const h=M(s);l.push(...h);const b=d(t);l.push(...b),k(l),l.length===0?(G.success("필터 설정이 유효합니다!"),S&&S()):G.error(`필터 오류: ${l.length}개의 문제가 발견되었습니다.`)}catch(h){console.error("필터 검증 오류:",h),G.error("필터 검증 중 오류가 발생했습니다.")}finally{y(!1)}},K=()=>{o(""),p(""),k([]),w&&w(),G.success("필터가 초기화되었습니다.")},E=["nvgnb#10000","nvgnb#20000","nvgnb#30000"],B=["2010","2011","3010","3011"],z=s?s.split(",").map(l=>l.trim()).filter(l=>l!==""):[],m=t?t.split(",").map(l=>l.trim()).filter(l=>l!==""):[];return e.jsxs("div",{className:`space-y-4 ${g}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(V,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(ks,{className:"h-4 w-4"}),"데이터 필터"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[z.length>0&&e.jsxs(I,{variant:"outline",className:"text-xs",children:["NE: ",z.length,"개"]}),m.length>0&&e.jsxs(I,{variant:"outline",className:"text-xs",children:["Cell ID: ",m.length,"개"]})]})]}),e.jsxs("div",{className:`grid gap-4 ${j?"grid-cols-1":"grid-cols-1 md:grid-cols-2"}`,children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(V,{className:"text-sm",children:"NE (Network Element)"}),e.jsx(fe,{placeholder:"예: nvgnb#10000 또는 nvgnb#10000,nvgnb#20000",value:s,onChange:l=>o(l.target.value),className:"text-sm"}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[e.jsx("span",{className:"font-medium",children:"예시:"}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:E.map((l,h)=>e.jsx(L,{variant:"ghost",size:"sm",className:"h-5 text-xs px-2",onClick:()=>{const b=s?s.split(",").map(n=>n.trim()).filter(n=>n!==""):[];if(!b.includes(l)){const n=[...b,l];o(n.join(","))}},children:l},h))})]}),z.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:z.map((l,h)=>e.jsxs(I,{variant:"secondary",className:"text-xs cursor-pointer",onClick:()=>{const b=z.filter((n,i)=>i!==h);o(b.join(","))},children:[l," ✕"]},h))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(V,{className:"text-sm",children:"Cell ID"}),e.jsx(fe,{placeholder:"예: 2010 또는 2010,2011,3010",value:t,onChange:l=>p(l.target.value),className:"text-sm"}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[e.jsx("span",{className:"font-medium",children:"예시:"}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:B.map((l,h)=>e.jsx(L,{variant:"ghost",size:"sm",className:"h-5 text-xs px-2",onClick:()=>{const b=t?t.split(",").map(n=>n.trim()).filter(n=>n!==""):[];if(!b.includes(l)){const n=[...b,l];p(n.join(","))}},children:l},h))})]}),m.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:m.map((l,h)=>e.jsxs(I,{variant:"secondary",className:"text-xs cursor-pointer",onClick:()=>{const b=m.filter((n,i)=>i!==h);p(b.join(","))},children:[l," ✕"]},h))})]})]}),(z.length>0||m.length>0)&&e.jsxs("div",{className:"p-3 bg-slate-50 border border-slate-200 rounded-md",children:[e.jsx("div",{className:"text-xs font-medium mb-2",children:"적용된 필터"}),e.jsxs("div",{className:"space-y-1 text-xs text-muted-foreground",children:[z.length>0&&e.jsxs("div",{children:["NE 필터: ",z.join(", ")," (",z.length,"개)"]}),m.length>0&&e.jsxs("div",{children:["Cell ID 필터: ",m.join(", ")," (",m.length,"개)"]})]})]}),F&&e.jsxs(e.Fragment,{children:[e.jsx(Oe,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(L,{variant:"outline",size:"sm",onClick:K,children:"필터 초기화"}),e.jsxs("div",{className:"flex items-center gap-2",children:[$.length>0&&e.jsxs("div",{className:"flex items-center gap-1 text-red-600 text-xs",children:[e.jsx(H,{className:"h-3 w-3"}),$.length,"개 오류"]}),e.jsx(L,{size:"sm",onClick:P,disabled:D,children:D?e.jsxs(e.Fragment,{children:[e.jsx(Z,{className:"h-3 w-3 animate-spin mr-2"}),"검증 중..."]}):"필터 검증"})]})]})]}),$.length>0&&e.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded-md",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(H,{className:"h-4 w-4 text-red-500"}),e.jsx("span",{className:"text-red-700 font-medium text-sm",children:"필터 오류"})]}),e.jsx("ul",{className:"space-y-1 text-sm text-red-600",children:$.map((l,h)=>e.jsxs("li",{children:["• ",l]},h))})]})]})});Be.displayName="DataFilterPanel";const Xs=C.memo(({config:s,onConfigChange:t,analysisType:o="statistics",showPeriodSelector:p=!0,showPegSelector:j=!0,showFilterOptions:F=!0,showDatabaseOptions:S=!1,availablePegs:w=[],pegOptionsLoading:g=!1,onPegOptionsRefresh:D,onValidate:y,onReset:$,className:k="",compact:M=!1})=>{var x,f,N,A,U,J;const[d,P]=C.useState([]),[K,E]=C.useState(!1),B=C.useMemo(()=>[{value:"availability",label:"Availability (%)",category:"performance"},{value:"rrc",label:"RRC Success Rate (%)",category:"access"},{value:"erab",label:"ERAB Success Rate (%)",category:"access"},{value:"sar",label:"SAR",category:"mobility"},{value:"mobility_intra",label:"Mobility Intra (%)",category:"mobility"},{value:"cqi",label:"CQI",category:"quality"},{value:"se",label:"Spectral Efficiency",category:"efficiency"},{value:"dl_thp",label:"DL Throughput",category:"throughput"},{value:"ul_int",label:"UL Interference",category:"interference"}],[]),z=C.useMemo(()=>w.length>0?w:B,[w,B]),m=C.useMemo(()=>{var a;return((a=s.selectedPegs)==null?void 0:a.length)||0},[s.selectedPegs]),l=(a,r)=>{t({...s,[a]:r})},h=(a,r)=>{l(a,r)},b=a=>{const r=s.selectedPegs||[],R=r.includes(a)?r.filter(q=>q!==a):[...r,a];l("selectedPegs",R)},n=a=>{const r=a?z.map(_=>_.value):[];l("selectedPegs",r)},i=async()=>{var r,_,R,q;E(!0);const a=[];try{if(p){if((r=s.period1)!=null&&r.startDate&&((_=s.period1)!=null&&_.endDate)){const X=new Date(s.period1.startDate),ee=new Date(s.period1.endDate);X>=ee&&a.push("기간 1의 시작일이 종료일보다 늦을 수 없습니다.")}if(s.showComparison&&((R=s.period2)!=null&&R.startDate)&&((q=s.period2)!=null&&q.endDate)){const X=new Date(s.period2.startDate),ee=new Date(s.period2.endDate);X>=ee&&a.push("기간 2의 시작일이 종료일보다 늦을 수 없습니다.")}}j&&(!s.selectedPegs||s.selectedPegs.length===0)&&a.push("분석할 PEG를 최소 1개 이상 선택해주세요."),o==="llm"&&(!s.n_minus_1||!s.n)&&a.push("LLM 분석을 위해 N-1과 N 기간을 모두 입력해주세요."),P(a),a.length===0?(G.success("설정이 유효합니다!"),y&&await y()):G.error(`설정 오류: ${a.length}개의 문제가 발견되었습니다.`)}catch(X){console.error("설정 검증 오류:",X),G.error("설정 검증 중 오류가 발생했습니다.")}finally{E(!1)}},u=()=>{t({selectedPegs:["availability","rrc","erab"],includeOutliers:!0,decimalPlaces:4,showComparison:!0,showSecondaryAxis:!1,showThreshold:!1,thresholdValue:99,ne:"",cellid:""}),P([]),$&&$(),G.success("설정이 초기화되었습니다.")},c=C.useMemo(()=>{const a={};return z.forEach(r=>{const _=r.category||"other";a[_]||(a[_]=[]),a[_].push(r)}),a},[z]);return e.jsxs("div",{className:`space-y-6 ${k}`,children:[e.jsxs(W,{children:[e.jsx(de,{className:"pb-3",children:e.jsxs(ce,{className:"flex items-center gap-2",children:[e.jsx(Cs,{className:"h-5 w-5"}),"분석 설정",o&&e.jsx(I,{variant:"outline",className:"ml-2",children:o==="statistics"?"통계 분석":o==="llm"?"LLM 분석":"트렌드 분석"})]})}),e.jsxs(Y,{children:[e.jsxs("div",{className:`grid gap-6 ${M?"grid-cols-1":"grid-cols-1 lg:grid-cols-2 xl:grid-cols-3"}`,children:[p&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(V,{className:"text-sm font-medium",children:"분석 기간 설정"}),e.jsx(Le,{title:"기간 1 (기준)",description:"비교의 기준이 되는 기간",startDate:((x=s.period1)==null?void 0:x.startDate)||"",endDate:((f=s.period1)==null?void 0:f.endDate)||"",preset:((N=s.period1)==null?void 0:N.preset)||"last7days",onDateChange:a=>h("period1",a),onPresetChange:a=>h("period1",{...s.period1,preset:a})})]}),s.showComparison&&e.jsx("div",{className:"space-y-3",children:e.jsx(Le,{title:"기간 2 (비교)",description:"기준과 비교할 기간",startDate:((A=s.period2)==null?void 0:A.startDate)||"",endDate:((U=s.period2)==null?void 0:U.endDate)||"",preset:((J=s.period2)==null?void 0:J.preset)||"last14days",onDateChange:a=>h("period2",a),onPresetChange:a=>h("period2",{...s.period2,preset:a})})})]}),j&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(V,{className:"text-sm font-medium",children:["분석할 PEG",g&&e.jsx(Z,{className:"h-3 w-3 animate-spin ml-2"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(L,{variant:"ghost",size:"sm",onClick:()=>n(!0),className:"text-xs h-7",children:"전체 선택"}),e.jsx(L,{variant:"ghost",size:"sm",onClick:()=>n(!1),className:"text-xs h-7",children:"전체 해제"}),D&&e.jsx(L,{variant:"ghost",size:"sm",onClick:D,disabled:g,className:"text-xs h-7",children:e.jsx(Z,{className:"h-3 w-3"})})]})]}),e.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto border rounded-md p-3",children:Object.entries(c).map(([a,r])=>e.jsxs("div",{className:"space-y-2",children:[e.jsx(V,{className:"text-xs text-muted-foreground uppercase tracking-wide",children:a==="performance"?"성능":a==="access"?"접속":a==="mobility"?"이동성":a==="quality"?"품질":a==="efficiency"?"효율성":a==="interference"?"간섭":a}),r.map(_=>{var R;return e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ne,{id:`peg-${_.value}`,checked:((R=s.selectedPegs)==null?void 0:R.includes(_.value))||!1,onCheckedChange:()=>b(_.value)}),e.jsx(V,{htmlFor:`peg-${_.value}`,className:"text-sm cursor-pointer flex-1",children:_.label})]},_.value)})]},a))}),e.jsxs(I,{variant:"outline",className:"text-xs w-full justify-center",children:[m,"개 PEG 선택됨"]})]}),F&&e.jsxs("div",{className:"space-y-3",children:[e.jsx(V,{className:"text-sm font-medium",children:"분석 옵션"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(V,{className:"text-sm",children:"기간 비교 활성화"}),e.jsx(Ne,{checked:s.showComparison||!1,onCheckedChange:a=>l("showComparison",a)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(V,{className:"text-sm",children:"이상치 데이터 포함"}),e.jsx(Ne,{checked:s.includeOutliers!==!1,onCheckedChange:a=>l("includeOutliers",a)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(V,{className:"text-sm",children:"소수점 자리수"}),e.jsxs(he,{value:String(s.decimalPlaces||4),onValueChange:a=>l("decimalPlaces",parseInt(a)),children:[e.jsx(pe,{children:e.jsx(ge,{})}),e.jsxs(je,{children:[e.jsx(Q,{value:"2",children:"2자리"}),e.jsx(Q,{value:"3",children:"3자리"}),e.jsx(Q,{value:"4",children:"4자리"}),e.jsx(Q,{value:"5",children:"5자리"}),e.jsx(Q,{value:"6",children:"6자리"})]})]})]})]})]}),F&&e.jsx(Be,{ne:s.ne||"",cellid:s.cellid||"",onNeChange:a=>l("ne",a),onCellidChange:a=>l("cellid",a),compact:M})]}),e.jsx(Oe,{className:"my-6"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(L,{variant:"outline",onClick:u,className:"text-sm",children:"초기화"}),e.jsxs("div",{className:"flex items-center gap-2",children:[d.length>0&&e.jsxs("div",{className:"flex items-center gap-1 text-red-600 text-xs",children:[e.jsx(H,{className:"h-3 w-3"}),d.length,"개 오류"]}),e.jsx(L,{onClick:i,disabled:K,className:"text-sm",children:K?e.jsxs(e.Fragment,{children:[e.jsx(Z,{className:"h-3 w-3 animate-spin mr-2"}),"검증 중..."]}):"설정 검증"})]})]})]})]}),d.length>0&&e.jsx(W,{className:"border-red-200 bg-red-50",children:e.jsxs(Y,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(H,{className:"h-5 w-5 text-red-500"}),e.jsx("span",{className:"text-red-700 font-medium",children:"설정 오류"})]}),e.jsx("ul",{className:"space-y-1 text-sm text-red-600",children:d.map((a,r)=>e.jsxs("li",{children:["• ",a]},r))})]})})]})});Xs.displayName="AnalysisConfigPanel";function Qs({className:s,children:t,...o}){return e.jsxs(os,{"data-slot":"scroll-area",className:v("relative",s),...o,children:[e.jsx(xs,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:t}),e.jsx(Zs,{}),e.jsx(ms,{})]})}function Zs({className:s,orientation:t="vertical",...o}){return e.jsx(us,{"data-slot":"scroll-area-scrollbar",orientation:t,className:v("flex touch-none p-px transition-colors select-none",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent",s),...o,children:e.jsx(hs,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}function et({className:s,...t}){return e.jsx("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:e.jsx("table",{"data-slot":"table",className:v("w-full caption-bottom text-sm",s),...t})})}function st({className:s,...t}){return e.jsx("thead",{"data-slot":"table-header",className:v("[&_tr]:border-b",s),...t})}function tt({className:s,...t}){return e.jsx("tbody",{"data-slot":"table-body",className:v("[&_tr:last-child]:border-0",s),...t})}function Ae({className:s,...t}){return e.jsx("tr",{"data-slot":"table-row",className:v("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",s),...t})}function O({className:s,...t}){return e.jsx("th",{"data-slot":"table-head",className:v("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",s),...t})}function T({className:s,...t}){return e.jsx("td",{"data-slot":"table-cell",className:v("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",s),...t})}const at=C.memo(({results:s,analysisType:t="statistics",displayType:o="mixed",title:p="분석 결과",showExport:j=!1,exportOptions:F=["csv","json","pdf"],onExport:S,showSelection:w=!1,selectedItems:g=new Set,onSelectionChange:D,chartConfig:y={},showChartControls:$=!0,className:k="",compact:M=!1,loading:d=!1,error:P=null})=>{var A,U,J;const[K,E]=C.useState(o==="mixed"?"table":o),[B,z]=C.useState(!1),m=C.useMemo(()=>{if(!s)return null;switch(t){case"statistics":return l(s);case"llm":return h(s);case"trend":return b(s);default:return s}},[s,t]),l=a=>a!=null&&a.analysis_results?{summary:a.summary||{},data:a.analysis_results.map((r,_)=>{var R,q;return{id:_+1,peg_name:r.peg_name,period1_mean:((R=r.period1_stats)==null?void 0:R.mean)||0,period2_mean:((q=r.period2_stats)==null?void 0:q.mean)||0,delta:r.delta||0,delta_percentage:r.delta_percentage||0,improvement_status:r.improvement_status,improvement_magnitude:r.improvement_magnitude,period1_rsd:r.rsd_period1||0,period2_rsd:r.rsd_period2||0,selected:(g==null?void 0:g.has(r.peg_name))||!1}}),metadata:a.metadata||{}}:null,h=a=>{var r;return a?{summary:{total_analyses:1,status:a.status,analysis_type:a.analysis_type},data:[{id:1,analysis_id:a.analysis_id,status:a.status,report_path:a.report_path,analysis_date:a.analysis_date,results_summary:((r=a.results)==null?void 0:r.analysis)||"분석 완료"}],metadata:a.metadata||{}}:null},b=a=>a,n=a=>{switch(a){case"improved":return e.jsx(_e,{className:"h-4 w-4 text-green-500"});case"degraded":return e.jsx($s,{className:"h-4 w-4 text-red-500"});case"stable":return e.jsx(zs,{className:"h-4 w-4 text-blue-500"});default:return e.jsx(H,{className:"h-4 w-4 text-yellow-500"})}},i=(a,r)=>{const _={improved:"bg-green-100 text-green-800 border-green-200",degraded:"bg-red-100 text-red-800 border-red-200",stable:"bg-blue-100 text-blue-800 border-blue-200"},R={significant:"상당한",moderate:"보통",minor:"미미한",none:"변화없음"};return e.jsxs(I,{className:`${_[a]||"bg-gray-100 text-gray-800"} text-xs`,children:[n(a),e.jsxs("span",{className:"ml-1",children:[a==="improved"?"개선":a==="degraded"?"악화":"안정",r&&` (${R[r]})`]})]})},u=async a=>{if(S){z(!0);try{await S(a,m),G.success(`${a.toUpperCase()} 파일로 내보내기가 완료되었습니다.`)}catch(r){console.error("내보내기 오류:",r),G.error("내보내기 중 오류가 발생했습니다.")}finally{z(!1)}}},c=a=>{if(!D)return;const r=new Set(g);r.has(a)?r.delete(a):r.add(a),D(r)},x=()=>{if(!D||!(m!=null&&m.data))return;const a=m.data.map(r=>t==="statistics"?r.peg_name:r.id);g.size===a.length?D(new Set):D(new Set(a))};if(d)return e.jsx(W,{className:k,children:e.jsxs(Y,{className:"flex flex-col items-center justify-center h-64",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"결과 로드 중..."}),e.jsx("p",{className:"text-muted-foreground text-center",children:"분석 결과를 불러오고 있습니다. 잠시만 기다려주세요."})]})});if(P)return e.jsx(W,{className:`${k} border-red-200`,children:e.jsxs(Y,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(H,{className:"h-5 w-5 text-red-500"}),e.jsx("span",{className:"text-red-700 font-medium",children:"결과 로드 오류"})]}),e.jsx("p",{className:"text-red-600 mb-4",children:P}),e.jsx(L,{variant:"outline",size:"sm",onClick:()=>window.location.reload(),children:"다시 시도"})]})});if(!m)return e.jsx(W,{className:k,children:e.jsxs(Y,{className:"flex flex-col items-center justify-center h-64",children:[e.jsx(De,{className:"h-12 w-12 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"분석 결과 없음"}),e.jsx("p",{className:"text-muted-foreground text-center",children:"분석을 실행하면 결과를 확인할 수 있습니다."})]})});return e.jsxs("div",{className:`space-y-6 ${k}`,children:[e.jsx(W,{children:e.jsxs(de,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(ce,{className:"flex items-center gap-2",children:[e.jsx(_s,{className:"h-5 w-5"}),p]}),j&&e.jsx("div",{className:"flex items-center gap-2",children:F.map(a=>e.jsxs(L,{variant:"outline",size:"sm",onClick:()=>u(a),disabled:B,className:"text-xs",children:[e.jsx(Ds,{className:"h-3 w-3 mr-1"}),a.toUpperCase()]},a))})]}),m.summary&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-4",children:[t==="statistics"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"text-xl font-bold text-blue-600",children:m.summary.total_pegs_analyzed||((A=m.data)==null?void 0:A.length)||0}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"분석된 PEG"})]}),e.jsxs("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[e.jsx("div",{className:"text-xl font-bold text-green-600",children:m.summary.improved_count||0}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"개선"})]}),e.jsxs("div",{className:"text-center p-3 bg-red-50 rounded-lg",children:[e.jsx("div",{className:"text-xl font-bold text-red-600",children:m.summary.degraded_count||0}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"악화"})]}),e.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"text-xl font-bold text-gray-600",children:m.summary.stable_count||0}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"안정"})]})]}),t==="llm"&&e.jsxs("div",{className:"col-span-full text-center p-3 bg-purple-50 rounded-lg",children:[e.jsx("div",{className:"text-lg font-semibold text-purple-600",children:m.summary.status==="completed"?"분석 완료":"분석 중"}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["분석 ID: ",(J=(U=m.data)==null?void 0:U[0])==null?void 0:J.analysis_id]})]})]})]})}),e.jsx(W,{children:e.jsx(Y,{className:"p-0",children:o==="mixed"?e.jsxs(Hs,{value:K,onValueChange:E,children:[e.jsx("div",{className:"px-6 pt-6",children:e.jsxs(Js,{className:"grid w-full grid-cols-2",children:[e.jsxs(Ee,{value:"table",className:"flex items-center gap-2",children:[e.jsx(Ss,{className:"h-4 w-4"}),"테이블 뷰"]}),e.jsxs(Ee,{value:"chart",className:"flex items-center gap-2",children:[e.jsx(ne,{className:"h-4 w-4"}),"차트 뷰"]})]})}),e.jsx(Fe,{value:"table",className:"px-6 pb-6",children:f()}),e.jsx(Fe,{value:"chart",className:"px-6 pb-6",children:N()})]}):o==="table"?e.jsx("div",{className:"p-6",children:f()}):e.jsx("div",{className:"p-6",children:N()})})})]});function f(){var a;return(a=m==null?void 0:m.data)!=null&&a.length?e.jsxs("div",{className:"space-y-4",children:[w&&m.data.length>0&&e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 border border-slate-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:g.size===m.data.length&&m.data.length>0,onChange:x,className:"w-4 h-4 text-blue-600 rounded"}),e.jsxs("span",{className:"text-sm font-medium",children:["전체 선택 (",g.size,"/",m.data.length,")"]})]}),g.size>0&&e.jsxs(I,{variant:"secondary",className:"bg-blue-100 text-blue-700",children:[g.size,"개 선택됨"]})]}),g.size>0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(L,{variant:"outline",size:"sm",onClick:()=>D==null?void 0:D(new Set),children:"선택 해제"}),e.jsxs(L,{size:"sm",className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(Re,{className:"h-3 w-3 mr-1"}),"적용하기"]})]})]}),e.jsx(Qs,{className:"h-96",children:e.jsxs(et,{children:[e.jsx(st,{children:e.jsxs(Ae,{children:[w&&e.jsx(O,{className:"w-12",children:"선택"}),t==="statistics"?e.jsxs(e.Fragment,{children:[e.jsx(O,{children:"PEG 이름"}),e.jsx(O,{className:"text-right",children:"기간 1 평균"}),e.jsx(O,{className:"text-right",children:"기간 2 평균"}),e.jsx(O,{className:"text-right",children:"Delta"}),e.jsx(O,{className:"text-right",children:"Delta %"}),e.jsx(O,{children:"상태"}),e.jsx(O,{className:"text-right",children:"기간 1 RSD"}),e.jsx(O,{className:"text-right",children:"기간 2 RSD"})]}):t==="llm"?e.jsxs(e.Fragment,{children:[e.jsx(O,{children:"분석 ID"}),e.jsx(O,{children:"상태"}),e.jsx(O,{children:"분석 일시"}),e.jsx(O,{children:"결과 요약"})]}):e.jsxs(e.Fragment,{children:[e.jsx(O,{children:"항목"}),e.jsx(O,{children:"값"}),e.jsx(O,{children:"상태"})]})]})}),e.jsx(tt,{children:m.data.map((r,_)=>{var R,q,X,ee,Se,ze;return e.jsxs(Ae,{children:[w&&e.jsx(T,{children:e.jsx("input",{type:"checkbox",checked:r.selected||!1,onChange:()=>c(t==="statistics"?r.peg_name:r.id),className:"w-4 h-4 text-blue-600 rounded"})}),t==="statistics"?e.jsxs(e.Fragment,{children:[e.jsx(T,{className:"font-medium",children:r.peg_name}),e.jsx(T,{className:"text-right",children:(R=r.period1_mean)==null?void 0:R.toFixed(4)}),e.jsx(T,{className:"text-right",children:(q=r.period2_mean)==null?void 0:q.toFixed(4)}),e.jsxs(T,{className:`text-right ${r.delta>0?"text-green-600":r.delta<0?"text-red-600":"text-blue-600"}`,children:[r.delta>0?"+":"",(X=r.delta)==null?void 0:X.toFixed(4)]}),e.jsxs(T,{className:`text-right ${r.delta_percentage>0?"text-green-600":r.delta_percentage<0?"text-red-600":"text-blue-600"}`,children:[r.delta_percentage>0?"+":"",(ee=r.delta_percentage)==null?void 0:ee.toFixed(2),"%"]}),e.jsx(T,{children:i(r.improvement_status,r.improvement_magnitude)}),e.jsxs(T,{className:"text-right",children:[(Se=r.period1_rsd)==null?void 0:Se.toFixed(2),"%"]}),e.jsxs(T,{className:"text-right",children:[(ze=r.period2_rsd)==null?void 0:ze.toFixed(2),"%"]})]}):t==="llm"?e.jsxs(e.Fragment,{children:[e.jsx(T,{className:"font-mono text-sm",children:r.analysis_id}),e.jsx(T,{children:e.jsx(I,{variant:r.status==="completed"?"default":"secondary",children:r.status==="completed"?"완료":"처리 중"})}),e.jsx(T,{className:"text-sm text-muted-foreground",children:new Date(r.analysis_date).toLocaleString("ko-KR")}),e.jsx(T,{className:"max-w-xs truncate",title:r.results_summary,children:r.results_summary})]}):e.jsxs(e.Fragment,{children:[e.jsx(T,{children:r.name||`항목 ${_+1}`}),e.jsx(T,{children:r.value||"N/A"}),e.jsx(T,{children:e.jsx(I,{variant:"outline",children:r.status||"알 수 없음"})})]})]},_)})})]})})]}):e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"표시할 데이터가 없습니다."})}function N(){return t==="statistics"&&m?e.jsx(Te,{comparisonResults:s,title:"분석 결과 차트",showControls:$,defaultChartType:"bar",height:400,...y}):e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"차트 뷰가 지원되지 않는 분석 타입입니다."})}});at.displayName="AnalysisResultsViewer";function we({className:s,value:t,...o}){return e.jsx(gs,{"data-slot":"progress",className:v("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",s),...o,children:e.jsx(ps,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})})}const rt=C.memo(({message:s="분석 중...",progress:t=null,showProgress:o=!1,size:p="medium",analysisType:j="general",icon:F=null,title:S="분석 진행 중",description:w="",estimatedTime:g="",className:D="",variant:y="default"})=>{const $=()=>{if(F)return F;switch(j){case"statistics":return e.jsx(ne,{className:"h-6 w-6"});case"llm":return e.jsx(Es,{className:"h-6 w-6"});case"trend":return e.jsx(_e,{className:"h-6 w-6"});case"database":return e.jsx(De,{className:"h-6 w-6"});default:return e.jsx(Ce,{className:"h-6 w-6"})}},k=()=>{switch(j){case"statistics":return"text-blue-600";case"llm":return"text-purple-600";case"trend":return"text-green-600";case"database":return"text-orange-600";default:return"text-gray-600"}},d=(()=>{switch(p){case"small":return{spinner:"h-4 w-4",icon:"h-4 w-4",title:"text-sm",message:"text-xs",container:"h-24"};case"large":return{spinner:"h-8 w-8",icon:"h-8 w-8",title:"text-xl",message:"text-base",container:"h-64"};default:return{spinner:"h-6 w-6",icon:"h-6 w-6",title:"text-lg",message:"text-sm",container:"h-48"}}})();return y==="compact"?e.jsxs("div",{className:`flex items-center justify-center gap-3 p-4 ${D}`,children:[e.jsx(ve,{className:`${d.spinner} animate-spin ${k()}`}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:`${d.message} font-medium`,children:s}),w&&e.jsx("p",{className:"text-xs text-muted-foreground",children:w})]}),o&&t!==null&&e.jsx("div",{className:"w-16",children:e.jsx(we,{value:t,className:"h-2"})})]}):y==="card"?e.jsx(W,{className:D,children:e.jsxs(Y,{className:`flex flex-col items-center justify-center ${d.container}`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(ve,{className:`${d.spinner} animate-spin ${k()}`}),$()]}),e.jsx("h3",{className:`${d.title} font-medium mb-2`,children:S}),e.jsx("p",{className:`${d.message} text-muted-foreground text-center mb-4`,children:s}),w&&e.jsx("p",{className:"text-xs text-muted-foreground text-center mb-4",children:w}),o&&t!==null&&e.jsxs("div",{className:"w-full max-w-xs mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"진행률"}),e.jsxs("span",{className:"text-xs font-medium",children:[t,"%"]})]}),e.jsx(we,{value:t,className:"h-2"})]}),g&&e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx(ke,{className:"h-3 w-3"}),e.jsxs("span",{children:["예상 소요 시간: ",g]})]}),e.jsx("div",{className:"mt-4 flex items-center gap-2",children:e.jsx(I,{variant:"outline",className:"text-xs",children:j==="statistics"?"통계 분석":j==="llm"?"LLM 분석":j==="trend"?"트렌드 분석":j==="database"?"데이터베이스 조회":"분석 중"})})]})}):e.jsxs("div",{className:`flex flex-col items-center justify-center ${d.container} ${D}`,children:[e.jsxs("div",{className:"relative mb-4",children:[e.jsx(ve,{className:`${d.spinner} animate-spin ${k()}`}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:$()})]}),e.jsx("h3",{className:`${d.title} font-medium mb-2 text-center`,children:S}),e.jsx("p",{className:`${d.message} text-muted-foreground text-center mb-4`,children:s}),w&&e.jsx("p",{className:"text-xs text-muted-foreground text-center mb-4",children:w}),o&&t!==null&&e.jsxs("div",{className:"w-full max-w-xs mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"진행률"}),e.jsxs("span",{className:"text-xs font-medium",children:[t,"%"]})]}),e.jsx(we,{value:t,className:"h-2"})]}),g&&e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground mb-4",children:[e.jsx(ke,{className:"h-3 w-3"}),e.jsxs("span",{children:["예상 소요 시간: ",g]})]}),e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(I,{variant:"outline",className:"text-xs",children:j==="statistics"?"📊 통계 분석":j==="llm"?"🤖 LLM 분석":j==="trend"?"📈 트렌드 분석":j==="database"?"🗄️ 데이터베이스 조회":"🔄 분석 진행 중"}),e.jsxs("div",{className:"flex items-center gap-1 mt-2",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse"}),e.jsx("div",{className:"w-2 h-2 bg-gray-300 rounded-full"}),e.jsx("div",{className:"w-2 h-2 bg-gray-300 rounded-full"})]})]})]})});rt.displayName="AnalysisLoadingState";function nt({...s}){return e.jsx(js,{"data-slot":"collapsible",...s})}function lt({...s}){return e.jsx(fs,{"data-slot":"collapsible-trigger",...s})}function it({...s}){return e.jsx(vs,{"data-slot":"collapsible-content",...s})}const dt=C.memo(({error:s,analysisType:t="general",title:o="오류가 발생했습니다",showRetry:p=!0,showDetails:j=!0,compact:F=!1,onRetry:S,onClose:w,customMessage:g="",suggestedActions:D=[],className:y="",variant:$="card"})=>{var b,n,i;const[k,M]=C.useState(!1),[d,P]=C.useState(!1),E=(u=>{var c,x,f,N;if(!u)return{type:"unknown",message:"알 수 없는 오류"};if(u.code==="NETWORK_ERROR"||(c=u.message)!=null&&c.includes("Network Error"))return{type:"network",message:"네트워크 연결 오류",description:"서버와의 연결에 문제가 있습니다.",suggestions:["인터넷 연결을 확인해주세요.","잠시 후 다시 시도해주세요.","방화벽 설정을 확인해주세요."]};if(u.code==="TIMEOUT"||(x=u.message)!=null&&x.includes("timeout"))return{type:"timeout",message:"요청 시간 초과",description:"서버 응답이 너무 오래 걸렸습니다.",suggestions:["네트워크 속도를 확인해주세요.","요청량이 많은 시간대에는 재시도해주세요.","관리자에게 문의해주세요."]};if((f=u.message)!=null&&f.includes("database")||(N=u.message)!=null&&N.includes("connection"))return{type:"database",message:"데이터베이스 오류",description:"데이터베이스 연결에 문제가 있습니다.",suggestions:["Database 설정을 확인해주세요.","Database 서버 상태를 확인해주세요.","관리자에게 문의해주세요."]};if(u.response){const A=u.response.status,U=u.response.statusText;return A===400?{type:"validation",message:"잘못된 요청",description:"요청 데이터가 올바르지 않습니다.",suggestions:["입력값을 다시 확인해주세요.","필수 필드가 모두 입력되었는지 확인해주세요."]}:A===401?{type:"auth",message:"인증 오류",description:"접근 권한이 없습니다.",suggestions:["로그인을 다시 시도해주세요.","관리자에게 권한을 요청해주세요."]}:A===403?{type:"forbidden",message:"접근 거부",description:"이 작업을 수행할 권한이 없습니다.",suggestions:["관리자에게 권한을 요청해주세요.","다른 계정으로 시도해주세요."]}:A===404?{type:"not_found",message:"데이터를 찾을 수 없음",description:"요청한 데이터를 찾을 수 없습니다.",suggestions:["검색 조건을 변경해보세요.","데이터가 존재하는지 확인해주세요."]}:A>=500?{type:"server",message:"서버 오류",description:"서버에서 오류가 발생했습니다.",suggestions:["잠시 후 다시 시도해주세요.","관리자에게 문의해주세요."]}:{type:"api",message:`${A} ${U}`,description:"API 요청 중 오류가 발생했습니다.",suggestions:["네트워크 연결을 확인해주세요.","관리자에게 문의해주세요."]}}return{type:"general",message:u.message||"오류가 발생했습니다",description:"예상치 못한 오류가 발생했습니다.",suggestions:["페이지를 새로고침해보세요.","관리자에게 문의해주세요."]}})(s),B=g||E.message,z=()=>{switch(E.type){case"network":return e.jsx(Me,{className:"h-5 w-5 text-red-500"});case"database":return e.jsx(De,{className:"h-5 w-5 text-orange-500"});case"timeout":return e.jsx(Z,{className:"h-5 w-5 text-yellow-500"});case"validation":return e.jsx(H,{className:"h-5 w-5 text-blue-500"});case"auth":case"forbidden":return e.jsx(H,{className:"h-5 w-5 text-red-600"});default:return e.jsx(H,{className:"h-5 w-5 text-red-500"})}},m=()=>{switch(t){case"statistics":return"bg-blue-50 border-blue-200";case"llm":return"bg-purple-50 border-purple-200";case"database":return"bg-orange-50 border-orange-200";case"network":return"bg-red-50 border-red-200";default:return"bg-red-50 border-red-200"}},l=async()=>{P(!0);try{S&&(await S(),G.success("재시도 중..."))}catch(u){console.error("재시도 실패:",u),G.error("재시도에 실패했습니다.")}finally{P(!1)}},h=()=>{var c;const u={message:s==null?void 0:s.message,stack:s==null?void 0:s.stack,response:(c=s==null?void 0:s.response)==null?void 0:c.data,timestamp:new Date().toISOString(),analysisType:t,userAgent:navigator.userAgent};navigator.clipboard.writeText(JSON.stringify(u,null,2)).then(()=>G.success("오류 정보가 클립보드에 복사되었습니다.")).catch(()=>G.error("클립보드 복사에 실패했습니다."))};return $==="inline"?e.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-md ${m()} ${y}`,children:[z(),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-red-700",children:B}),E.description&&e.jsx("p",{className:"text-xs text-red-600",children:E.description})]}),p&&S&&e.jsx(L,{variant:"outline",size:"sm",onClick:l,disabled:d,className:"text-xs",children:d?e.jsxs(e.Fragment,{children:[e.jsx(Z,{className:"h-3 w-3 animate-spin mr-1"}),"재시도 중..."]}):"재시도"})]}):$==="banner"?e.jsxs("div",{className:`flex items-center justify-between p-4 ${m()} ${y}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[z(),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-red-700",children:B}),E.description&&e.jsx("p",{className:"text-sm text-red-600",children:E.description})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[j&&e.jsx(L,{variant:"ghost",size:"sm",onClick:()=>M(!k),className:"text-red-700 hover:text-red-800",children:k?e.jsxs(e.Fragment,{children:[e.jsx(ye,{className:"h-4 w-4 mr-1"}),"숨기기"]}):e.jsxs(e.Fragment,{children:[e.jsx(ue,{className:"h-4 w-4 mr-1"}),"자세히"]})}),p&&S&&e.jsx(L,{variant:"outline",size:"sm",onClick:l,disabled:d,children:d?e.jsxs(e.Fragment,{children:[e.jsx(Z,{className:"h-4 w-4 animate-spin mr-1"}),"재시도 중..."]}):"재시도"})]}),j&&k&&e.jsx("div",{className:"mt-4 p-3 bg-white rounded border",children:e.jsx("pre",{className:"text-xs text-gray-600 whitespace-pre-wrap",children:JSON.stringify(s,null,2)})})]}):e.jsxs(W,{className:`${m()} ${y}`,children:[e.jsx(de,{className:"pb-3",children:e.jsxs(ce,{className:"flex items-center gap-2 text-red-700",children:[z(),o,e.jsx(I,{variant:"outline",className:"text-xs",children:t==="statistics"?"통계 분석":t==="llm"?"LLM 분석":t==="database"?"데이터베이스":t==="network"?"네트워크":"일반 오류"})]})}),e.jsxs(Y,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-red-700 mb-1",children:B}),E.description&&e.jsx("p",{className:"text-sm text-red-600",children:E.description})]}),(((b=E.suggestions)==null?void 0:b.length)>0||D.length>0)&&e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-medium text-red-700 mb-2 flex items-center gap-1",children:[e.jsx(Fs,{className:"h-4 w-4"}),"해결 방법"]}),e.jsx("ul",{className:"space-y-1 text-sm text-red-600",children:[...E.suggestions||[],...D].map((u,c)=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-red-500 mt-0.5",children:"•"}),u]},c))})]}),e.jsxs("div",{className:"flex items-center justify-between pt-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[p&&S&&e.jsx(L,{variant:"outline",size:"sm",onClick:l,disabled:d,children:d?e.jsxs(e.Fragment,{children:[e.jsx(Z,{className:"h-3 w-3 animate-spin mr-1"}),"재시도 중..."]}):"재시도"}),w&&e.jsx(L,{variant:"ghost",size:"sm",onClick:w,children:"닫기"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(L,{variant:"ghost",size:"sm",onClick:h,className:"text-xs",children:[e.jsx(Ls,{className:"h-3 w-3 mr-1"}),"오류 복사"]}),j&&e.jsxs(nt,{open:k,onOpenChange:M,children:[e.jsx(lt,{asChild:!0,children:e.jsx(L,{variant:"ghost",size:"sm",className:"text-xs",children:k?e.jsxs(e.Fragment,{children:[e.jsx(ye,{className:"h-3 w-3 mr-1"}),"숨기기"]}):e.jsxs(e.Fragment,{children:[e.jsx(ue,{className:"h-3 w-3 mr-1"}),"자세히"]})})}),e.jsx(it,{className:"mt-3",children:e.jsxs("div",{className:"p-3 bg-white rounded border border-red-200",children:[e.jsx("h5",{className:"text-xs font-medium text-red-700 mb-2",children:"오류 상세 정보"}),e.jsx("pre",{className:"text-xs text-gray-600 whitespace-pre-wrap overflow-auto max-h-32",children:s?JSON.stringify({message:s.message,stack:s.stack,response:(n=s.response)==null?void 0:n.data,status:(i=s.response)==null?void 0:i.status,timestamp:new Date().toISOString()},null,2):"오류 정보가 없습니다."})]})})]})]})]})]})]})});dt.displayName="AnalysisErrorDisplay";export{rt as A,I as B,W as C,dt as D,Xs as E,at as F,gt as G,fe as I,V as L,we as P,he as S,Hs as T,L as a,de as b,v as c,ce as d,Y as e,pe as f,ge as g,je as h,Q as i,nt as j,lt as k,ht as l,it as m,Oe as n,Ne as o,Qs as p,Js as q,Ee as r,Fe as s,qs as t,et as u,st as v,Ae as w,O as x,tt as y,T as z};
