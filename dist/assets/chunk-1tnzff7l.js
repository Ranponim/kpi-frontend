import{j as e,r as c,b as xe,a as Ye}from"./chunk-CTtn32jH.js";import{c as ce,p as Ks,n as fs,C as pe,a as we,b as ye,B as Y,f as F,e as je,L as We,q as Qs,m as gs,g as es,h as ss,i as ts,j as rs,k as ae,D as Ns,r as vs,s as bs,t as ws,v as Xs,w as Ys,d as ys}from"./chunk-DX3kcswl.js";import{G as et,H as st,J as tt,K as rt,M as at,N as nt,Q as lt,U as ct,W as it}from"./chunk-BBx_fWpL.js";import{I as Be,C as ot,a as dt,b as mt,S as ks}from"./chunk-DAqvpfSU.js";import{t as ds,X as Re,a as ms,c as ht,u as xt,v as ut,d as hs,m as xs,w as gt,E as pt,M as jt,x as ft,y as He,L as Le,f as Ue,R as Nt,G as vt,e as us,z as Fe,A as os,k as bt,s as Cs,Z as wt,b as yt,C as kt,T as _s,D as Ct,H as Ss}from"./chunk-M6kWLAXF.js";function _t({className:l,...n}){return e.jsx("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:e.jsx("table",{"data-slot":"table",className:ce("w-full caption-bottom text-sm",l),...n})})}function St({className:l,...n}){return e.jsx("thead",{"data-slot":"table-header",className:ce("[&_tr]:border-b",l),...n})}function Dt({className:l,...n}){return e.jsx("tbody",{"data-slot":"table-body",className:ce("[&_tr:last-child]:border-0",l),...n})}function Ds({className:l,...n}){return e.jsx("tr",{"data-slot":"table-row",className:ce("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",l),...n})}function De({className:l,...n}){return e.jsx("th",{"data-slot":"table-head",className:ce("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",l),...n})}function Ie({className:l,...n}){return e.jsx("td",{"data-slot":"table-cell",className:ce("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",l),...n})}function Is({...l}){return e.jsx(et,{"data-slot":"alert-dialog",...l})}function Rs({...l}){return e.jsx(st,{"data-slot":"alert-dialog-trigger",...l})}function It({...l}){return e.jsx(ct,{"data-slot":"alert-dialog-portal",...l})}function Rt({className:l,...n}){return e.jsx(it,{"data-slot":"alert-dialog-overlay",className:ce("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",l),...n})}function As({className:l,...n}){return e.jsxs(It,{children:[e.jsx(Rt,{}),e.jsx(tt,{"data-slot":"alert-dialog-content",className:ce("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",l),...n})]})}function Ps({className:l,...n}){return e.jsx("div",{"data-slot":"alert-dialog-header",className:ce("flex flex-col gap-2 text-center sm:text-left",l),...n})}function Es({className:l,...n}){return e.jsx("div",{"data-slot":"alert-dialog-footer",className:ce("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",l),...n})}function $s({className:l,...n}){return e.jsx(rt,{"data-slot":"alert-dialog-title",className:ce("text-lg font-semibold",l),...n})}function Os({className:l,...n}){return e.jsx(at,{"data-slot":"alert-dialog-description",className:ce("text-muted-foreground text-sm",l),...n})}function Ms({className:l,...n}){return e.jsx(lt,{className:ce(Ks(),l),...n})}function Fs({className:l,...n}){return e.jsx(nt,{className:ce(Ks({variant:"outline"}),l),...n})}const At=({initialLimit:l=20,autoFetch:n=!0,initialFilters:p={}}={})=>{const[_,N]=c.useState([]),[G,S]=c.useState(!1),[U,ne]=c.useState(null),[V,H]=c.useState(!0),[W,q]=c.useState({limit:l,skip:0,total:0}),[y,b]=c.useState({neId:"",cellId:"",startDate:null,endDate:null,status:"",...p}),x=c.useCallback((T,se={})=>{console.log(`[useAnalysisResults] ${T}`,se)},[]),Z=c.useCallback((T,se)=>{console.error(`[useAnalysisResults] ${T}`,se)},[]),E=c.useRef(null),Q=c.useRef(null),ee=c.useRef(!0),A=c.useRef(!1),a=c.useCallback(async({limit:T=W.limit,skip:se=0,append:ie=!1,showToast:g=!0}={})=>{var D,O,X,K,oe,me,Oe,ue,Ee,Me,Te,Ke,ze;try{if(!ee.current)return x("컴포넌트가 언마운트되어 API 요청을 건너뜁니다"),[];if(A.current)return x("이미 요청 중이므로 새 요청을 건너뜁니다"),[];A.current=!0,x("요청 상태: 시작"),Q.current&&(x("이전 요청 취소 시도"),Q.current.abort()),Q.current=new AbortController,x("새로운 AbortController 생성"),S(!0),ne(null),x("분석 결과 조회 시작",{limit:T,skip:se,filters:y});const j={limit:T,skip:se};(D=y.neId)!=null&&D.trim()&&(j.ne_id=y.neId.trim()),(O=y.cellId)!=null&&O.trim()&&(j.cell_id=y.cellId.trim()),y.startDate&&(j.date_from=y.startDate),y.endDate&&(j.date_to=y.endDate),(X=y.status)!=null&&X.trim()&&(j.status=y.status.trim());const ve=await fs.get("/api/analysis/results",{params:j,signal:Q.current.signal});x("분석 결과 조회 성공",{resultCount:((oe=(K=ve.data)==null?void 0:K.items)==null?void 0:oe.length)||0,total:((me=ve.data)==null?void 0:me.total)||0,totalRequested:T});const _e=(((Oe=ve.data)==null?void 0:Oe.items)||[]).filter(de=>((de==null?void 0:de.analysis_type)||(de==null?void 0:de.analysisType))==="llm_analysis");return N(ie?de=>[...de,..._e]:_e),q(de=>{var Ge;return{...de,skip:ie?de.skip+_e.length:se+_e.length,total:((Ge=ve.data)==null?void 0:Ge.total)||0}}),H(((ue=ve.data)==null?void 0:ue.has_next)||!1),g&&!ie&&xe.success(`${_e.length}개의 분석 결과를 불러왔습니다.`),_e}catch(j){if(x("API 오류 상세 정보",{name:j.name,code:j.code,message:j.message,stack:j.stack,isCancel:Ye.isCancel?Ye.isCancel(j):"axios.isCancel not available"}),j.name==="AbortError"||j.code==="ERR_CANCELED"||(Ee=j.message)!=null&&Ee.toLowerCase().includes("canceled")||(Me=j.message)!=null&&Me.toLowerCase().includes("cancel")||Ye.isCancel&&Ye.isCancel(j))return x("API 요청이 취소되었습니다",{reason:j.message}),A.current=!1,[];const ve=((ze=(Ke=(Te=j==null?void 0:j.response)==null?void 0:Te.data)==null?void 0:Ke.error)==null?void 0:ze.message)||(j==null?void 0:j.message)||"분석 결과를 불러오는 중 오류가 발생했습니다.";return Z("분석 결과 조회 실패",j),ne(ve),g&&xe.error(`데이터 조회 실패: ${ve}`),[]}finally{S(!1),A.current=!1,x("요청 상태: 완료")}},[W.limit,JSON.stringify(y),x,Z]),C=c.useCallback((T,se=1e3)=>{if(x("필터 업데이트",{이전:y,새로운:T}),!ee.current){x("컴포넌트 언마운트 상태에서 필터 업데이트 무시");return}E.current&&clearTimeout(E.current),E.current=setTimeout(()=>{if(!ee.current){x("디바운스 실행 시점에 컴포넌트가 언마운트됨");return}b(ie=>({...ie,...T})),q(ie=>({...ie,skip:0})),x("필터 업데이트 완료",{적용된필터:{...y,...T}})},se)},[y,x]),P=c.useCallback(()=>{x("필터 초기화"),b({neId:"",cellId:"",startDate:null,endDate:null,status:""}),q(T=>({...T,skip:0}))},[x]),$=c.useCallback(async()=>{if(G||!V){x("추가 로딩 건너뜀",{loading:G,hasMore:V});return}x("추가 결과 로딩 시작"),await a({skip:W.skip,append:!0,showToast:!1})},[G,V,a,W.skip,x]),ke=c.useCallback(async()=>{x("데이터 새로고침 시작"),q(T=>({...T,skip:0})),await a({skip:0,append:!1})},[a,x]),fe=c.useCallback(async T=>{var se,ie,g;try{x("분석 결과 삭제 시작",{resultId:T}),await fs.delete(`/api/analysis/results/${T}`),N(D=>D.filter(O=>O.id!==T)),x("분석 결과 삭제 성공",{resultId:T}),xe.success("분석 결과가 삭제되었습니다.")}catch(D){const O=((g=(ie=(se=D==null?void 0:D.response)==null?void 0:se.data)==null?void 0:ie.error)==null?void 0:g.message)||(D==null?void 0:D.message)||"분석 결과 삭제 중 오류가 발생했습니다.";Z("분석 결과 삭제 실패",D),xe.error(`삭제 실패: ${O}`)}},[x,Z]);c.useEffect(()=>{n&&ee.current&&(x("컴포넌트 마운트 - 자동 데이터 조회 시작"),a({skip:0,append:!1,showToast:!1}))},[n,x,a]),c.useEffect(()=>{n&&ee.current&&(x("필터 변경 감지 - 데이터 재조회",{filters:JSON.stringify(y)}),a({skip:0,append:!1,showToast:!1}))},[n,JSON.stringify(y),x,a]);const Ae=c.useMemo(()=>!G&&_.length===0,[G,_.length]),Ne=c.useMemo(()=>Object.values(y).some(T=>T!=null&&T!==""),[y]),Pe=c.useMemo(()=>_.length,[_.length]),Ce=c.useMemo(()=>({resultCount:Pe,loading:G,hasMore:V,isEmpty:Ae,isFiltered:Ne,pagination:W,filters:y,error:U}),[Pe,G,V,Ae,Ne,W,y,U]);return c.useEffect(()=>{},[Ce]),c.useEffect(()=>()=>{ee.current=!1,A.current=!1,E.current&&clearTimeout(E.current),Q.current&&Q.current.abort()},[]),{results:_,loading:G,error:U,isEmpty:Ae,hasMore:V,isFiltered:Ne,resultCount:Pe,pagination:W,filters:y,updateFilters:C,clearFilters:P,fetchResults:a,refresh:ke,loadMore:$,deleteResult:fe,debugInfo:Ce}},Pt=({filters:l={},onFilterChange:n,onClearFilters:p,isCollapsed:_=!1,onToggleCollapse:N,showActiveCount:G=!0})=>{const S=c.useCallback((a,C={})=>{console.log(`[ResultFilter] ${a}`,C)},[]),{neId:U="",cellId:ne="",startDate:V=null,endDate:H=null,status:W=""}=l,q={...U&&{"NE ID":U},...ne&&{"Cell ID":ne},...V&&{시작일:new Date(V).toLocaleDateString("ko-KR")},...H&&{종료일:new Date(H).toLocaleDateString("ko-KR")},...W&&{상태:W}},y=Object.keys(q).length,b=y>0,x=c.useCallback((a,C)=>{S("필터 변경",{key:a,value:C}),n&&n(a,C)},[n,S]),Z=c.useCallback(a=>{S("개별 필터 초기화",{key:a}),x(a,a==="startDate"||a==="endDate"?null:"")},[x,S]),E=c.useCallback(()=>{S("전체 필터 초기화"),p&&p()},[p,S]),Q=c.useCallback(a=>{if(!a)return"";try{return new Date(a).toISOString().split("T")[0]}catch{return""}},[]),ee=c.useCallback(a=>{if(!a)return null;try{return new Date(a).toISOString()}catch{return null}},[]),A=c.useCallback(()=>{S("필터 패널 토글",{isCollapsed:!_}),N&&N()},[_,N,S]);return e.jsxs(pe,{className:"w-full",children:[e.jsxs(we,{className:"pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(ye,{className:"text-lg flex items-center gap-2",children:[e.jsx(ds,{className:"h-5 w-5"}),"필터"]}),G&&b&&e.jsxs(Y,{variant:"secondary",className:"text-xs",children:[y,"개 활성"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[b&&e.jsxs(F,{variant:"ghost",size:"sm",onClick:E,className:"text-destructive hover:text-destructive",children:[e.jsx(Re,{className:"h-4 w-4 mr-1"}),"전체 초기화"]}),e.jsx(F,{variant:"ghost",size:"sm",onClick:A,children:_?e.jsx(ms,{className:"h-4 w-4"}):e.jsx(ht,{className:"h-4 w-4"})})]})]}),b&&!_&&e.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:Object.entries(q).map(([a,C])=>e.jsxs(Y,{variant:"outline",className:"flex items-center gap-1 pr-1",children:[e.jsxs("span",{className:"text-xs",children:[a,": ",C]}),e.jsx(F,{variant:"ghost",size:"sm",className:"h-4 w-4 p-0 hover:bg-destructive hover:text-destructive-foreground",onClick:()=>{const $={"NE ID":"neId","Cell ID":"cellId",시작일:"startDate",종료일:"endDate",상태:"status"}[a];$&&Z($)},children:e.jsx(Re,{className:"h-3 w-3"})})]},a))})]}),!_&&e.jsxs(je,{className:"pt-0",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(We,{htmlFor:"filter-ne",className:"flex items-center gap-2",children:[e.jsx(xt,{className:"h-4 w-4"}),"NE ID"]}),e.jsxs("div",{className:"relative",children:[e.jsx(Be,{id:"filter-ne",placeholder:"NE ID 검색...",value:U,onChange:a=>x("neId",a.target.value),className:"pr-8"}),U&&e.jsx(F,{variant:"ghost",size:"sm",className:"absolute right-1 top-1/2 -translate-y-1/2 h-6 w-6 p-0",onClick:()=>Z("neId"),children:e.jsx(Re,{className:"h-3 w-3"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(We,{htmlFor:"filter-cell",className:"flex items-center gap-2",children:[e.jsx(ut,{className:"h-4 w-4"}),"Cell ID"]}),e.jsxs("div",{className:"relative",children:[e.jsx(Be,{id:"filter-cell",placeholder:"Cell ID 검색...",value:ne,onChange:a=>x("cellId",a.target.value),className:"pr-8"}),ne&&e.jsx(F,{variant:"ghost",size:"sm",className:"absolute right-1 top-1/2 -translate-y-1/2 h-6 w-6 p-0",onClick:()=>Z("cellId"),children:e.jsx(Re,{className:"h-3 w-3"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(We,{htmlFor:"filter-start",className:"flex items-center gap-2",children:[e.jsx(hs,{className:"h-4 w-4"}),"시작 날짜"]}),e.jsxs("div",{className:"relative",children:[e.jsx(Be,{id:"filter-start",type:"date",value:Q(V),onChange:a=>x("startDate",ee(a.target.value)),className:"pr-8"}),V&&e.jsx(F,{variant:"ghost",size:"sm",className:"absolute right-1 top-1/2 -translate-y-1/2 h-6 w-6 p-0",onClick:()=>Z("startDate"),children:e.jsx(Re,{className:"h-3 w-3"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(We,{htmlFor:"filter-end",className:"flex items-center gap-2",children:[e.jsx(hs,{className:"h-4 w-4"}),"종료 날짜"]}),e.jsxs("div",{className:"relative",children:[e.jsx(Be,{id:"filter-end",type:"date",value:Q(H),onChange:a=>x("endDate",ee(a.target.value)),className:"pr-8"}),H&&e.jsx(F,{variant:"ghost",size:"sm",className:"absolute right-1 top-1/2 -translate-y-1/2 h-6 w-6 p-0",onClick:()=>Z("endDate"),children:e.jsx(Re,{className:"h-3 w-3"})})]})]})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t",children:[e.jsx(We,{className:"text-sm font-medium mb-3 block",children:"빠른 날짜 선택"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:[{label:"오늘",days:0},{label:"어제",days:1},{label:"최근 7일",days:7},{label:"최근 30일",days:30},{label:"최근 90일",days:90}].map(({label:a,days:C})=>e.jsx(F,{variant:"outline",size:"sm",onClick:()=>{const P=new Date,$=new Date;C===0?($.setHours(0,0,0,0),P.setHours(23,59,59,999)):C===1?($.setDate($.getDate()-1),$.setHours(0,0,0,0),P.setDate(P.getDate()-1),P.setHours(23,59,59,999)):($.setDate($.getDate()-C),$.setHours(0,0,0,0),P.setHours(23,59,59,999)),x("startDate",$.toISOString()),x("endDate",P.toISOString()),S("빠른 날짜 선택",{label:a,startDate:$,endDate:P})},children:a},a))})]})]})]})},Et=c.memo(Pt),$t=(l,n,p=null)=>{const N=`[AnalysisSection:${new Date().toISOString()}]`;switch(l){case"info":console.log(`${N} ${n}`,p);break;case"error":console.error(`${N} ${n}`,p);break;case"warn":console.warn(`${N} ${n}`,p);break;case"debug":console.debug(`${N} ${n}`,p);break;default:console.log(`${N} ${n}`,p)}},as=({title:l,defaultOpen:n=!0,actions:p=null,className:_="",children:N,"data-testid":G})=>{$t("debug","렌더링",{title:l,defaultOpen:n});const U=`${c.useId()}-panel`,[ne,V]=c.useState(!!n),H=c.useCallback(()=>{V(q=>!q)},[]),W=c.useCallback(q=>{(q.key==="Enter"||q.key===" ")&&(q.preventDefault(),H())},[H]);return e.jsx(ot,{defaultOpen:n,"data-testid":G,children:e.jsxs(pe,{className:ce("w-full",_),children:[e.jsx(we,{className:"border-b dark:border-border/60",children:e.jsxs(ye,{className:"flex items-center justify-between",children:[e.jsx(dt,{className:"text-left w-full focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-blue-500 rounded",role:"button",tabIndex:0,"aria-expanded":ne,"aria-controls":U,onClick:H,onKeyDown:W,children:e.jsxs("span",{className:"inline-flex items-center gap-2",children:[e.jsx("span",{className:"i-lucide-chevron-down mr-1 transition-transform data-[state=open]:rotate-180"}),e.jsx("span",{className:"text-foreground dark:text-foreground",children:l})]})}),p?e.jsx(Qs,{children:p}):null]})}),e.jsx(mt,{id:U,children:e.jsx(je,{className:"py-4 text-foreground/90 dark:text-foreground/90",children:N})})]})})},Ot=(l,n,p=null)=>{const N=`[AnalysisStatusIndicator:${new Date().toISOString()}]`;switch(l){case"info":console.log(`${N} ${n}`,p);break;case"error":console.error(`${N} ${n}`,p);break;case"warn":console.warn(`${N} ${n}`,p);break;case"debug":console.debug(`${N} ${n}`,p);break;default:console.log(`${N} ${n}`,p)}},zs=({status:l,className:n=""})=>{const _={OK:{label:"OK",variant:"outline",className:"border-green-600 text-green-700 dark:border-green-400 dark:text-green-300"},NOK:{label:"NOK",variant:"destructive",className:"dark:text-destructive-foreground"},PARTIAL_OK:{label:"Partial",variant:"secondary",className:"text-amber-800 dark:text-amber-200"}}[l]||{label:String(l||"N/A"),variant:"outline",className:""};return Ot("debug","상태 렌더링",{status:l}),e.jsx(Y,{variant:_.variant,className:`${_.className} ${n}`,children:_.label})},qe={ERROR:0,WARNING:1,INFO:2,DEBUG:3},Mt=()=>qe.WARNING,ns=Mt(),ls=(l,n,p=null)=>{const N={timestamp:new Date().toISOString(),level:l,message:n,component:"PreferenceSync"};return p!=null&&(N.data=p),N},cs=(l,n)=>{const p=`🔄 [${n.timestamp}] ${l.toUpperCase()}:`;switch(l){case"error":console.error(p,n.message,n.data||"");break;case"warning":console.warn(p,n.message,n.data||"");break;case"info":console.info(p,n.message,n.data||"");break;case"debug":console.log(p,n.message,n.data||"");break;default:console.log(p,n.message,n.data||"")}},Ls=(l,n=null)=>{if(ns>=qe.ERROR){const p=ls("error",l,n);cs("error",p),n instanceof Error&&console.trace("Error stack trace:",n)}},Ft=(l,n=null)=>{if(ns>=qe.WARNING){const p=ls("warning",l,n);cs("warning",p)}},Ts=(l,n=null)=>{if(ns>=qe.INFO){const p=ls("info",l,n);cs("info",p)}},Lt=(l,n=null)=>{if(ns>=qe.DEBUG){const p=ls("debug",l,n);cs("debug",p)}};function Gs(){const{settings:l,updateSettings:n}=gs()||{settings:{selectedPegs:[]},updateSettings:()=>{}};try{Lt("usePegPreferences 훅 초기화",{hasSettings:!!l,hasUpdate:typeof n=="function"})}catch{}const p=c.useMemo(()=>Array.isArray(l==null?void 0:l.selectedPegs)?l.selectedPegs:[],[l==null?void 0:l.selectedPegs]);c.useEffect(()=>{try{Ts("PEG 선택 목록 변경",{count:Array.isArray(p)?p.length:0})}catch{}},[p]);const _=c.useCallback(N=>{if(!Array.isArray(N)){try{Ls("setPreferredPegs 입력이 배열이 아님",{received:N})}catch{}return}if(!N.every(S=>typeof S=="string")){try{Ft("setPreferredPegs: 문자열 배열이 아님",{pegs:N})}catch{}return}try{n({selectedPegs:N});try{Ts("PEG 선택 목록 업데이트",{count:N.length})}catch{}}catch(S){try{Ls("PEG 선택 목록 업데이트 실패",S)}catch{}}},[n]);return{preferredPegs:p,setPreferredPegs:_}}const Tt=(l,n,p=null)=>{const N=`[PEGAnalysisDisplay:${new Date().toISOString()}]`;console.debug(`${N} ${n}`,p)},Kt=(l,n)=>l==="all"?!0:l==="high"?(n||0)>=8:l==="medium"?(n||0)>=6&&(n||0)<8:l==="low"?(n||0)<6:!0;function zt({results:l=[]}){const{settings:n,updateSettings:p}=gs()||{settings:{pegSearch:"",pegSort:"weight_desc"},updateSettings:()=>{}},{preferredPegs:_,setPreferredPegs:N}=Gs(),[G,S]=c.useState((n==null?void 0:n.pegSearch)||""),[U,ne]=c.useState((n==null?void 0:n.pegSort)||"weight_desc"),[V,H]=c.useState("all"),[W,q]=c.useState("all"),[y,b]=c.useState(0),[x,Z]=c.useState(10),E=c.useMemo(()=>[...(l||[]).filter(P=>{const $=!G||String(P.peg_name).toLowerCase().includes(G.toLowerCase()),ke=Kt(V,P.weight||0),fe=W==="all"?!0:P.trend===W;return $&&ke&&fe})].sort((P,$)=>{switch(U){case"weight_asc":return(P.weight||0)-($.weight||0);case"change_desc":return($.change_percent||0)-(P.change_percent||0);case"change_asc":return(P.change_percent||0)-($.change_percent||0);case"name_asc":return String(P.peg_name).localeCompare(String($.peg_name));case"name_desc":return String($.peg_name).localeCompare(String(P.peg_name));case"weight_desc":default:return($.weight||0)-(P.weight||0)}}),[l,G,V,W,U]),Q=Math.max(1,Math.ceil(E.length/x)),ee=c.useMemo(()=>{const a=y*x;return E.slice(a,a+x)},[E,y,x]);if(Tt("debug","render",{total:l==null?void 0:l.length,filtered:E.length,page:y}),!Array.isArray(l)||l.length===0)return e.jsx("div",{className:"text-center text-muted-foreground",children:"PEG 비교 데이터가 없습니다."});const A=E.map(a=>a.peg_name);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center p-3 bg-blue-50 dark:bg-blue-950/40 rounded-lg",children:[e.jsx("div",{className:"text-lg font-bold text-blue-600 dark:text-blue-300",children:l.length}),e.jsx("div",{className:"text-xs text-muted-foreground dark:text-muted-foreground/80",children:"총 PEG 수"})]}),e.jsxs("div",{className:"text-center p-3 bg-green-50 dark:bg-green-950/40 rounded-lg",children:[e.jsx("div",{className:"text-lg font-bold text-green-600 dark:text-green-300",children:l.filter(a=>a.trend==="up").length}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"개선 PEG"})]}),e.jsxs("div",{className:"text-center p-3 bg-red-50 dark:bg-red-950/40 rounded-lg",children:[e.jsx("div",{className:"text-lg font-bold text-red-600 dark:text-red-300",children:l.filter(a=>a.trend==="down").length}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"하락 PEG"})]}),e.jsxs("div",{className:"text-center p-3 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[e.jsx("div",{className:"text-lg font-bold text-gray-600 dark:text-gray-300",children:l.filter(a=>a.trend==="stable").length}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"안정 PEG"})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 justify-between px-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx(xs,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(Be,{placeholder:"PEG 이름 검색...",value:G,onChange:a=>{const C=a.target.value;S(C),p({pegSearch:C}),b(0)},className:"pl-8"})]}),e.jsxs(es,{value:V,onValueChange:a=>{H(a),b(0)},children:[e.jsx(ss,{className:"w-[140px]",children:e.jsx(ts,{placeholder:"가중치"})}),e.jsxs(rs,{children:[e.jsx(ae,{value:"all",children:"가중치 전체"}),e.jsx(ae,{value:"high",children:"높음(≥8)"}),e.jsx(ae,{value:"medium",children:"중간(6~7.9)"}),e.jsx(ae,{value:"low",children:"낮음(<6)"})]})]}),e.jsxs(es,{value:W,onValueChange:a=>{q(a),b(0)},children:[e.jsx(ss,{className:"w-[140px]",children:e.jsx(ts,{placeholder:"트렌드"})}),e.jsxs(rs,{children:[e.jsx(ae,{value:"all",children:"트렌드 전체"}),e.jsx(ae,{value:"up",children:"개선"}),e.jsx(ae,{value:"down",children:"하락"}),e.jsx(ae,{value:"stable",children:"안정"})]})]}),e.jsxs(es,{value:U,onValueChange:a=>{ne(a),p({pegSort:a}),b(0)},children:[e.jsx(ss,{className:"w-[165px]",children:e.jsx(ts,{placeholder:"정렬"})}),e.jsxs(rs,{children:[e.jsx(ae,{value:"weight_desc",children:"가중치 ↓"}),e.jsx(ae,{value:"weight_asc",children:"가중치 ↑"}),e.jsx(ae,{value:"change_desc",children:"변화율 ↓"}),e.jsx(ae,{value:"change_asc",children:"변화율 ↑"}),e.jsx(ae,{value:"name_asc",children:"이름 A→Z"}),e.jsx(ae,{value:"name_desc",children:"이름 Z→A"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(Y,{variant:"outline",className:"text-xs",children:["선택 ",_.length," / 총 ",l.length]}),e.jsx(F,{variant:"outline",size:"sm",onClick:()=>N(Array.from(new Set([..._||[],...A]))),children:"선택 모두"}),e.jsx(F,{variant:"ghost",size:"sm",onClick:()=>N([]),children:"선택 해제"}),e.jsxs(es,{value:String(x),onValueChange:a=>{Z(parseInt(a)),b(0)},children:[e.jsx(ss,{className:"w-[110px]",children:e.jsx(ts,{placeholder:"페이지 크기"})}),e.jsxs(rs,{children:[e.jsx(ae,{value:"10",children:"10개"}),e.jsx(ae,{value:"20",children:"20개"}),e.jsx(ae,{value:"50",children:"50개"})]})]}),e.jsx(F,{variant:"outline",size:"sm",onClick:()=>b(Math.max(0,y-1)),disabled:y===0,children:e.jsx(gt,{className:"h-4 w-4"})}),e.jsxs("span",{className:"text-sm",children:[y+1," / ",Q||1]}),e.jsx(F,{variant:"outline",size:"sm",onClick:()=>b(Math.min(Q-1,y+1)),disabled:y>=Q-1,children:"▶"})]})]}),e.jsx("div",{className:"border rounded-lg overflow-hidden",children:e.jsx("div",{className:"max-h-96 overflow-y-auto overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-muted/50 dark:bg-muted/20 sticky top-0",children:e.jsxs("tr",{className:"text-left text-sm font-medium",children:[e.jsx("th",{scope:"col",className:"p-3",children:"PEG 이름"}),e.jsx("th",{scope:"col",className:"p-3 text-center",children:"선택"}),e.jsx("th",{scope:"col",className:"p-3 text-center",children:"가중치"}),e.jsx("th",{scope:"col",className:"p-3 text-center",children:"N-1 평균"}),e.jsx("th",{scope:"col",className:"p-3 text-center",children:"N 평균"}),e.jsx("th",{scope:"col",className:"p-3 text-center",children:"N-1 RSD"}),e.jsx("th",{scope:"col",className:"p-3 text-center",children:"N RSD"}),e.jsx("th",{scope:"col",className:"p-3 text-center",children:"변화율"}),e.jsx("th",{scope:"col",className:"p-3 text-center",children:"트렌드"}),e.jsx("th",{scope:"col",className:"p-3 text-center",children:"상태"})]})}),e.jsx("tbody",{children:ee.map((a,C)=>e.jsxs("tr",{className:"border-t hover:bg-muted/30",children:[e.jsx("td",{className:"p-3 font-medium",children:a.peg_name}),e.jsx("td",{className:"p-3 text-center",children:e.jsx("input",{type:"checkbox",checked:_.includes(a.peg_name),"aria-label":`${a.peg_name} 선택`,onChange:P=>{const $=P.target.checked?Array.from(new Set([..._||[],a.peg_name])):_.filter(ke=>ke!==a.peg_name);N($)}})}),e.jsx("td",{className:"p-3 text-center",children:e.jsx(Y,{variant:"outline",children:a.weight})}),e.jsx("td",{className:"p-3 text-center font-mono",children:a.n1_avg.toFixed(2)}),e.jsx("td",{className:"p-3 text-center font-mono",children:a.n_avg.toFixed(2)}),e.jsxs("td",{className:"p-3 text-center font-mono",children:[a.n1_rsd.toFixed(1),"%"]}),e.jsxs("td",{className:"p-3 text-center font-mono",children:[a.n_rsd.toFixed(1),"%"]}),e.jsx("td",{className:"p-3 text-center",children:e.jsxs(Y,{variant:a.significance==="high"?"destructive":a.significance==="medium"?"secondary":"outline",className:a.significance==="high"?"":a.significance==="medium"?"text-slate-800":"text-slate-700 border-slate-400",children:[a.change_percent>0?"+":"",a.change_percent.toFixed(1),"%"]})}),e.jsx("td",{className:"p-3 text-center",children:e.jsxs(Y,{variant:a.trend==="up"?"default":a.trend==="down"?"destructive":"secondary",children:[a.trend==="up"?"📈":a.trend==="down"?"📉":"➡️",a.trend==="up"?"개선":a.trend==="down"?"하락":"안정"]})}),e.jsx("td",{className:"p-3 text-center",children:(()=>{const P=a.trend==="up"?"OK":a.trend==="down"?"NOK":"PARTIAL_OK";return e.jsx(zs,{status:P})})()})]},C))})]})})})]})}const Gt=({isOpen:l,onClose:n,resultIds:p=[],mode:_="single"})=>{const[N,G]=c.useState([]),[S,U]=c.useState(!1),[ne,V]=c.useState(null),[H,W]=c.useState(!1),[q,y]=c.useState("absent"),[b,x]=c.useState(null),[Z,E]=c.useState(null),[Q,ee]=c.useState(!1),[A,a]=c.useState(null),[C,P]=c.useState({isOpen:!1,algorithm:null});c.useEffect(()=>{const s=t=>{t.key==="F11"?(t.preventDefault(),W(r=>!r)):t.key==="Escape"&&H&&W(!1)};if(l)return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[l,H]);const[$,ke]=c.useState(0),[fe,Ae]=c.useState(10),[Ne,Pe]=c.useState((O==null?void 0:O.pegSearch)||""),[Ce,T]=c.useState("all"),[se,ie]=c.useState("all"),[g,D]=c.useState((O==null?void 0:O.pegSort)||"weight_desc"),{settings:O}=gs()||{settings:{pegSearch:"",pegSort:"weight_desc"}};Gs();const[X]=c.useState(50),K=_==="compare"&&p.length>1;_==="single"&&p.length;const oe=async s=>{var i;U(!0),V(null),ue.current&&(console.log("⏹️ 이전 요청 취소"),ue.current.abort());const t=new AbortController;ue.current=t;const r=t.signal;try{console.log("📊 분석 결과 상세 정보 요청:",s);const d=s.filter(u=>{if(!u||typeof u!="string"&&typeof u!="number")return console.warn("⚠️ 잘못된 ID 형식 감지:",u,typeof u),!1;const k=String(u).trim();return!k||k==="undefined"||k==="null"?(console.warn("⚠️ 빈 ID 감지:",u),!1):/^[a-zA-Z0-9_-]+$/.test(k)&&k.length>0&&k.length<=100?!0:(console.warn("⚠️ 잘못된 ID 형식:",k),!1)}).map(u=>String(u).trim());if(d.length===0)throw new Error("유효한 결과 ID가 없습니다.");d.length!==s.length&&console.warn(`⚠️ ${s.length-d.length}개의 잘못된 ID가 제거되었습니다.`),console.log("📊 유효한 ID 목록:",d);const m=[],h=Math.min(X,3);for(let u=0;u<d.length;u+=h)m.push(d.slice(u,u+h));console.log(`📊 청크 처리 정보: 총 ${d.length}개 항목을 ${m.length}개 청크로 분할 (청크당 최대 ${h}개)`);let o=[];for(const u of m){const k=u.map(async v=>{var I,R,B,re,L,le,$e,f,M,Se,ge,Qe,Xe,ps,js;try{if(r.aborted)throw new Error("요청이 취소되었습니다");let w=0;const he=2;let be=null;for(;w<=he;)try{console.log(`🌐 API 요청(getDetailedResult): ${v}`);const J=await Ys(v);if(!J)throw new Error("서버에서 빈 응답을 반환했습니다.");return console.log(`✅ 결과 ${v} 로딩 성공 (시도 ${w+1}/${he+1})`),{...J,id:v}}catch(J){if(be=J,r.aborted)throw new Error("요청이 취소되었습니다");if((J.code==="NETWORK_ERROR"||(I=J.message)!=null&&I.includes("Network Error"))&&(console.warn(`🌐 네트워크 에러 - 결과 ${v}:`,J.message),w<he)){w++;const Ve=2e3;console.warn(`⚠️ 네트워크 에러로 인한 재시도, ${Ve}ms 후 재시도 (${w}/${he})`),await new Promise(is=>setTimeout(is,Ve));continue}if(((R=J==null?void 0:J.response)==null?void 0:R.status)===500&&w<he){w++;const Ve=Math.min(1e3*Math.pow(2,w-1),5e3);console.warn(`⚠️ 결과 ${v} 500 에러 발생, ${Ve}ms 후 재시도 (${w}/${he})`),await new Promise(is=>setTimeout(is,Ve));continue}throw((B=J==null?void 0:J.response)==null?void 0:B.status)===404?(console.warn(`⚠️ 결과 ${v}를 찾을 수 없습니다 (404)`),new Error(`분석 결과를 찾을 수 없습니다 (ID: ${v})`)):J}throw be}catch(w){if(r.aborted)return console.log(`⏹️ 결과 ${v} 요청 취소됨`),null;const he={id:v,status:(re=w==null?void 0:w.response)==null?void 0:re.status,message:w.message,url:(L=w==null?void 0:w.config)==null?void 0:L.url,method:(le=w==null?void 0:w.config)==null?void 0:le.method,retryAttempts:maxRetries+1,timestamp:new Date().toISOString()};(($e=w==null?void 0:w.response)==null?void 0:$e.status)===500?console.error(`❌ 결과 ${v} 서버 내부 오류 (500) - 재시도 실패:`,he):((f=w==null?void 0:w.response)==null?void 0:f.status)===404?console.warn(`⚠️ 결과 ${v}를 찾을 수 없음 (404):`,he):((M=w==null?void 0:w.response)==null?void 0:M.status)===400?console.warn(`⚠️ 결과 ${v} 잘못된 요청 (400):`,he):w.code==="NETWORK_ERROR"||(Se=w.message)!=null&&Se.includes("Network Error")?console.error(`🌐 결과 ${v} 네트워크 오류:`,he):console.error(`❌ 결과 ${v} 로딩 실패:`,he);let be="로딩 실패",J="unknown_error";return((ge=w==null?void 0:w.response)==null?void 0:ge.status)===500?(be="서버 내부 오류 (잠시 후 다시 시도해주세요)",J="server_error"):((Qe=w==null?void 0:w.response)==null?void 0:Qe.status)===404?(be="분석 결과를 찾을 수 없습니다",J="not_found"):((Xe=w==null?void 0:w.response)==null?void 0:Xe.status)===400?(be="잘못된 요청입니다",J="bad_request"):w.code==="NETWORK_ERROR"||(ps=w.message)!=null&&ps.includes("Network Error")?(be="네트워크 연결 오류",J="network_error"):(js=w.message)!=null&&js.includes("timeout")?(be="요청 시간 초과",J="timeout_error"):(be=w.message||"알 수 없는 오류가 발생했습니다",J="client_error"),{id:v,error:be,analysisDate:new Date().toISOString(),neId:"-",cellId:"-",status:"error",errorType:J,errorDetails:he}}}),te=(await Promise.all(k)).filter(v=>v!==null);o=[...o,...te],typeof window<"u"&&window.gc&&window.gc(),m.indexOf(u)<m.length-1&&(console.log("⏳ 서버 부하 분산을 위해 200ms 대기 중..."),await new Promise(I=>setTimeout(I,200)))}if(r.aborted)console.log("⏹️ 요청이 취소되어 결과 설정을 건너뜀");else{G(o);const u=o.reduce((k,z)=>(z.error?(k.totalErrors++,z.errorType==="server_error"?k.serverErrors++:k.clientErrors++):k.successCount++,k),{totalErrors:0,serverErrors:0,clientErrors:0,successCount:0});console.log("✅ 분석 결과 상세 정보 로딩 완료:",{totalItems:o.length,successCount:u.successCount,errorCount:u.totalErrors,serverErrors:u.serverErrors,clientErrors:u.clientErrors,successRate:`${(u.successCount/o.length*100).toFixed(1)}%`}),u.serverErrors>0&&u.serverErrors/o.length*100>30&&xe.warning(`일부 데이터 로딩에 실패했습니다 (서버 에러: ${u.serverErrors}개). 잠시 후 다시 시도해주세요.`)}if(o.length>0){const u=o[0];console.log("📋 첫 번째 결과 상세 구조:",{id:u.id,hasKpiResults:!!u.kpiResults,hasStats:!!u.stats,kpiResultsType:typeof u.kpiResults,statsType:typeof u.stats,statsIsArray:Array.isArray(u.stats),allKeys:Object.keys(u),kpiResultsKeys:u.kpiResults?Object.keys(u.kpiResults):"N/A",statsLength:((i=u.stats)==null?void 0:i.length)||"N/A"})}}catch(d){if(r.aborted){console.log("⏹️ 요청이 취소되어 에러 처리 건너뜀");return}console.error("❌ 분석 결과 상세 정보 로딩 실패:",d),V(d.message||"데이터 로딩에 실패했습니다"),xe.error("분석 결과를 불러오는데 실패했습니다")}finally{r.aborted||U(!1)}};c.useCallback((s,t)=>{try{const r=[...s,...t],i=r.slice().sort((B,re)=>B-re),d=r.map(B=>{const re=i.indexOf(B)+1,L=r.filter($e=>$e===B).length,le=i.indexOf(B);return L>1?(le+1+le+L)/2:re}),m=s.length,h=t.length,u=s.reduce((B,re,L)=>{const le=r.indexOf(re);return B+d[le]},0)-m*(m+1)/2,k=m*h-u,z=Math.min(u,k),te=m*h/2,v=Math.sqrt(m*h*(m+h+1)/12),I=(z-te)/v,R=2*(1-Math.abs(I)/Math.sqrt(2*Math.PI)*Math.exp(-I*I/2));return{U:z,zScore:I,pValue:Math.min(R,1),significant:R<.05,effectSize:Math.abs(I)/Math.sqrt(m+h)}}catch(r){return console.error("Mann-Whitney U Test 오류:",r),{error:"통계 테스트 실패"}}},[]),c.useCallback((s,t)=>{try{const r=s.slice().sort((I,R)=>I-R),i=t.slice().sort((I,R)=>I-R),d=r.length,m=i.length;let h=0,o=0,u=0;const k=[...new Set([...r,...i])].sort((I,R)=>I-R);for(const I of k){for(;o<d&&r[o]<=I;)o++;const R=o/d;for(;u<m&&i[u]<=I;)u++;const B=u/m,re=Math.abs(R-B);re>h&&(h=re)}const z=h,te=z*Math.sqrt(d*m/(d+m)),v=2*Math.exp(-2*te*te);return{D:z,lambda:te,pValue:Math.min(v,1),significant:v<.05,distributionDifference:z>.1?"large":z>.05?"medium":"small"}}catch(r){return console.error("Kolmogorov-Smirnov Test 오류:",r),{error:"분포 테스트 실패"}}},[]);const me=c.useCallback(async s=>{try{console.log("🧮 마할라노비스 거리 계산 시작 - 백엔드 API 호출",s);const t=await Me({kpiData:s,timestamps:[],periodLabels:[]},{threshold:.1,sampleSize:10,significanceLevel:.05});return console.log("✅ 마할라노비스 거리 계산 및 통계 테스트 완료 (백엔드 API)",t),t.success===!1?{error:t.message||"백엔드 분석 실패",timestamp:new Date().toISOString()}:t.data}catch(t){return console.error("❌ 마할라노비스 거리 계산 실패 (백엔드 API)",t),{error:t.message||"계산 중 오류 발생",timestamp:new Date().toISOString()}}},[]),Oe=c.useCallback(s=>{try{if(console.log("📊 PEG 비교 결과 계산 시작",s),!(s!=null&&s.stats)||!Array.isArray(s.stats))return null;const t=s.stats,r={};t.forEach(m=>{var o,u,k;const h=m.kpi_name;r[h]||(r[h]={peg_name:h,n1_values:[],n_values:[],weight:((k=(u=(o=s.request_params)==null?void 0:o.peg_definitions)==null?void 0:u[h])==null?void 0:k.weight)||5}),m.period==="N-1"?r[h].n1_values.push(m.avg):m.period==="N"&&r[h].n_values.push(m.avg)});const d=Object.values(r).map(m=>{const h=m.n1_values.length>0?m.n1_values.reduce((v,I)=>v+I,0)/m.n1_values.length:0,o=m.n_values.length>0?m.n_values.reduce((v,I)=>v+I,0)/m.n_values.length:0,u=m.n1_values.length>1?Math.sqrt(m.n1_values.reduce((v,I)=>v+Math.pow(I-h,2),0)/(m.n1_values.length-1))/Math.abs(h)*100:0,k=m.n_values.length>1?Math.sqrt(m.n_values.reduce((v,I)=>v+Math.pow(I-o,2),0)/(m.n_values.length-1))/Math.abs(o)*100:0,z=h!==0?(o-h)/h*100:0,te=z>5?"up":z<-5?"down":"stable";return{...m,n1_avg:h,n_avg:o,n1_rsd:u,n_rsd:k,change_percent:z,trend:te,significance:Math.abs(z)>10?"high":Math.abs(z)>5?"medium":"low"}}).sort((m,h)=>(h.weight||0)-(m.weight||0));return console.log("✅ PEG 비교 결과 계산 완료",d),d}catch(t){return console.error("❌ PEG 비교 결과 계산 실패",t),null}},[]),ue=c.useRef(null),Ee=c.useCallback(()=>{console.log("🔄 모든 상태 초기화 시작"),ue.current&&(console.log("⏹️ 이전 요청 취소"),ue.current.abort(),ue.current=null),G([]),U(!1),V(null),y("absent"),x(null),E(null),ke(0),Ae(10),Pe(""),T("all"),ie("all"),W(!1),P({isOpen:!1,algorithm:null}),console.log("✅ 모든 상태 초기화 완료")},[]);c.useEffect(()=>(l&&p.length>0&&(console.log("📊 새로운 결과 ID로 전환:",p),Ee(),oe(p)),()=>{ue.current&&(console.log("🧹 useEffect cleanup: 이전 요청 취소"),ue.current.abort(),ue.current=null)}),[l,p,Ee]);const Me=c.useCallback(async()=>{if(!j.length||!j[0].stats){console.log("📊 마할라노비스 분석: 데이터가 부족합니다");return}const s=j[0].id,t=btoa(JSON.stringify(j[0].stats)).slice(0,16);if(b&&b._cacheKey===`${s}-${t}`){console.log("⚡ 마할라노비스 분석: 캐시된 결과 사용");return}try{console.log("🧮 마할라노비스 거리 분석 시작"),x(null);const r={};(j[0].stats||[]).forEach(h=>{const o=h.kpi_name;r[o]||(r[o]=[]),r[o].push(h.avg)});const d=Object.keys(r).filter(h=>r[h].length>=2);if(d.length===0)throw new Error("분석 가능한 KPI 데이터가 부족합니다.");console.log(`📊 분석할 KPI 수: ${d.length}개`);const m=await me(r);m._cacheKey=`${s}-${t}`,console.log("✅ 마할라노비스 분석 완료:",m),x(m)}catch(r){console.error("❌ 마할라노비스 분석 실패:",r),x({error:r.message||"분석 중 오류가 발생했습니다.",timestamp:new Date().toISOString(),_cacheKey:`${s}-${t}`})}},[j,me,b]),Te=c.useCallback(()=>{if(!j.length||!j[0].stats){console.log("📊 PEG 비교 분석: 데이터가 부족합니다");return}try{console.log("📊 PEG 비교 분석 시작");const s=Oe(j[0]);console.log("✅ PEG 비교 분석 완료:",s),E(s)}catch(s){console.error("❌ PEG 비교 분석 실패:",s),E(null)}},[j]);c.useEffect(()=>{j.length>0&&!S&&(console.log("🔬 데이터 로딩 완료, 분석 시작"),Me(),Te())},[j,S,Me,Te]),c.useEffect(()=>{l||(console.log("🚪 모달이 닫혀서 모든 상태 정리"),Ee())},[l,Ee]),c.useEffect(()=>{var t;console.log("🔍 마할라노비스 분석 디버깅:",{resultsLength:N.length,loading:S,processedResults:N.filter(r=>!r.error).length});const s=N.filter(r=>!r.error);if(s.length>0&&!S){const r=s[0];if(console.log("📊 첫 번째 결과 데이터 구조:",{hasKpiResults:!!(r!=null&&r.kpiResults),hasStats:!!(r!=null&&r.stats),kpiResultsKeys:r!=null&&r.kpiResults?Object.keys(r.kpiResults):[],statsLength:((t=r==null?void 0:r.stats)==null?void 0:t.length)||0,fullResult:r}),r!=null&&r.kpiResults||r!=null&&r.stats){const i=r.kpiResults||r.stats;console.log("🧮 마할라노비스 계산용 데이터:",i);try{const d=me(i);console.log("✅ 마할라노비스 계산 결과:",d),x(d)}catch(d){console.error("❌ 마할라노비스 계산 오류:",d),x({error:"계산 중 오류 발생: "+d.message})}}else console.warn("⚠️ 마할라노비스 계산을 위한 데이터가 없습니다:",{kpiResults:r==null?void 0:r.kpiResults,stats:r==null?void 0:r.stats}),x({error:"분석 데이터가 없습니다"});if(r!=null&&r.stats){const i=Oe(r);E(i)}}else console.log("⏳ 마할라노비스 분석 대기 중:",{hasResults:s.length>0,isLoading:S})},[N,S,me,Oe]);const Ke=s=>{switch(s==null?void 0:s.toLowerCase()){case"success":return"default";case"error":case"failed":return"destructive";case"warning":return"secondary";case"pending":case"processing":return"outline";default:return"secondary"}},ze=s=>{try{return new Date(s).toLocaleString("ko-KR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",weekday:"short"})}catch{return s||"-"}},j=c.useMemo(()=>N.filter(s=>!s.error),[N]);c.useMemo(()=>{var t,r;return K?(((r=(t=j[0])==null?void 0:t.kpiResults)==null?void 0:r.map(i=>i.name))||[]).map(i=>{const d={name:i};return j.forEach((m,h)=>{var u;const o=(u=m.kpiResults)==null?void 0:u.find(k=>k.name===i);d[`결과${h+1}`]=parseFloat((o==null?void 0:o.value)||0)}),d}):null},[j,K]),c.useMemo(()=>{var $e;if(K||!j.length||!j[0].stats)return{kpiResults:[],sortedKpiResults:[],filteredResults:[],dataWithTrends:[],trendFilteredResults:[],totalPages:0,paginatedResults:[],data:[],summaryStats:{improved:0,declined:0,stable:0,avgChange:0,weightedAvgChange:0}};const s=j[0],t=s.stats||[],r={};t.forEach(f=>{const M=f.kpi_name;r[M]||(r[M]={peg_name:M,weight:5}),f.period==="N-1"?r[M]["N-1"]=f.avg:f.period==="N"&&(r[M].N=f.avg)});const i=(($e=s.request_params)==null?void 0:$e.peg_definitions)||{};Object.keys(r).forEach(f=>{var M;(M=i[f])!=null&&M.weight&&(r[f].weight=i[f].weight)});const d=Object.values(r).filter(f=>f["N-1"]!==void 0&&f.N!==void 0),m=g,h=[...d].sort((f,M)=>{switch(m){case"weight_asc":return(f.weight||0)-(M.weight||0);case"change_desc":return(M.change_percent||0)-(f.change_percent||0);case"change_asc":return(f.change_percent||0)-(M.change_percent||0);case"name_asc":return String(f.peg_name).localeCompare(String(M.peg_name));case"name_desc":return String(M.peg_name).localeCompare(String(f.peg_name));case"weight_desc":default:return(M.weight||0)-(f.weight||0)}}),o=h.filter(f=>{const M=!Ne||f.peg_name.toLowerCase().includes(Ne.toLowerCase()),Se=f.weight||0;let ge=!0;return Ce==="high"?ge=Se>=8:Ce==="medium"?ge=Se>=6&&Se<8:Ce==="low"&&(ge=Se<6),M&&ge}),u=o.map(f=>{const M=f["N-1"]||0,ge=(f.N||0)-M,Qe=M!==0?ge/M*100:0,Xe=ge>0?"up":ge<0?"down":"stable";return{...f,change:ge,changePercent:Qe,trend:Xe}}),k=u.filter(f=>se==="all"?!0:f.trend===se),z=Math.ceil(k.length/fe),te=k.slice($*fe,($+1)*fe),v=te.map(f=>({name:f.peg_name,"N-1":f["N-1"]||0,N:f.N||0,change:f.change,changePercent:f.changePercent,trend:f.trend,weight:f.weight,unit:"%",peg:f.weight||0})),I=v.filter(f=>f.trend==="up").length,R=v.filter(f=>f.trend==="down").length,B=v.filter(f=>f.trend==="stable").length,re=v.length>0?v.reduce((f,M)=>f+M.change,0)/v.length:0,L=v.length>0?v.reduce((f,M)=>f+M.change*M.weight,0)/v.reduce((f,M)=>f+M.weight,0):0;return{kpiResults:d,sortedKpiResults:h,filteredResults:o,dataWithTrends:u,trendFilteredResults:k,totalPages:z,paginatedResults:te,data:v,summaryStats:{improved:I,declined:R,stable:B,avgChange:re,weightedAvgChange:L}}},[K,j,Ne,Ce,se,$,fe]);const ve=s=>{var r,i,d,m,h,o,u;const t={hasDirectAnalysis:!!(s!=null&&s.analysis),hasDataAnalysis:!!((r=s==null?void 0:s.data)!=null&&r.analysis),hasNestedDataAnalysis:!!((d=(i=s==null?void 0:s.data)==null?void 0:i.data)!=null&&d.analysis),dataKeys:s?Object.keys(s):[],nestedDataKeys:s!=null&&s.data?Object.keys(s.data):[],doubleNestedKeys:(m=s==null?void 0:s.data)!=null&&m.data?Object.keys(s.data.data):[],structureType:"unknown",recommendedPath:""};return(o=(h=s==null?void 0:s.data)==null?void 0:h.data)!=null&&o.analysis?(t.structureType="triple_nested",t.recommendedPath="data.data.analysis"):(u=s==null?void 0:s.data)!=null&&u.analysis?(t.structureType="double_nested",t.recommendedPath="data.analysis"):s!=null&&s.analysis&&(t.structureType="single_level",t.recommendedPath="analysis"),t},Je=s=>{var d,m,h;let t,r,i;return(d=s==null?void 0:s.data)!=null&&d.analysis&&typeof s.data.analysis=="object"&&!Array.isArray(s.data.analysis)?(t=s.data,r=t.analysis,i="data.analysis (Backend 표준 구조 - LLM 결과 위치)",console.log("✅ 우선순위 1: data.analysis 구조 사용 (Backend 표준 - LLM 결과 위치)")):s!=null&&s.data&&typeof s.data=="object"&&!Array.isArray(s.data)?s.data.executive_summary!==void 0||s.data.overall_summary!==void 0||s.data.comprehensive_summary!==void 0||s.data.diagnostic_findings!==void 0?(t=s,r=t.data,i="data (Backend 표준 구조 - LLM 결과 직접 위치)",console.log("✅ 우선순위 2: data 구조 사용 (Backend 표준 - LLM 결과 직접 위치)")):(t=s,r={},i="data (LLM 필드 없음)",console.log("⚠️ data 구조에 LLM 필드가 없습니다")):(h=(m=s==null?void 0:s.data)==null?void 0:m.data)!=null&&h.analysis?(t=s.data.data,r=t.analysis,i="data.data.analysis (기존 중첩 구조)",console.log("⚠️ 우선순위 3: data.data.analysis 구조 사용 (중첩 구조)")):s!=null&&s.analysis?(t=s,r=t.analysis,i="analysis (직접 구조)",console.log("📋 우선순위 4: analysis 직접 구조 사용")):(t=s||{},r={},i="empty (데이터 없음)",console.warn("❌ 모든 우선순위 실패: 분석 데이터를 찾을 수 없습니다")),{doc:t,analysis:r,dataStructure:i}},_e=s=>{const t={isValid:!1,errors:[],warnings:[]};return s?typeof s!="object"?(t.errors.push("analysis가 객체 타입이 아닙니다"),t):(s.executive_summary!==void 0&&(typeof s.executive_summary=="string"?t.isValid=!0:t.warnings.push("executive_summary가 문자열 타입이 아닙니다")),["overall_summary","comprehensive_summary"].forEach(d=>{s[d]!==void 0&&typeof s[d]!="string"&&t.warnings.push(`${d}가 문자열 타입이 아닙니다`)}),["diagnostic_findings","recommended_actions"].forEach(d=>{s[d]===void 0&&t.warnings.push(`선택적 필드 ${d}가 없습니다`)}),t.errors.length===0&&(t.isValid=!0),t):(t.errors.push("analysis 객체가 없습니다"),t)},de=s=>{let t="요약 정보가 없습니다.",r="none";if(!s)return{summaryText:t,selectedField:r};const i=["executive_summary","overall_summary","comprehensive_summary","summary","conclusion","result","description","analysis_summary","key_findings","recommendations","insights","overview"];for(const d of i){const m=s[d];if(m){if(typeof m=="string"&&m.trim()){t=m.trim(),r=d,console.log(`✅ ${d} 필드 사용 (문자열)`);break}else if(Array.isArray(m)&&m.length>0){const h=m[0];if(typeof h=="string"&&h.trim()){t=h.trim(),r=`${d}[0]`,console.log(`📝 ${d} 배열의 첫 번째 요소 사용`);break}else if(typeof h=="object"&&h){const o=["text","content","summary","description","message"];for(const u of o)if(h[u]&&typeof h[u]=="string"){t=h[u].trim(),r=`${d}[0].${u}`,console.log(`📝 ${d}[0].${u} 필드 사용`);break}if(r!=="none")break}}else if(typeof m=="object"){const h=["text","content","summary","description","message"];for(const o of h)if(m[o]&&typeof m[o]=="string"){t=m[o].trim(),r=`${d}.${o}`,console.log(`📝 ${d}.${o} 필드 사용`);break}if(r!=="none")break}}}return r==="none"&&(console.warn("⚠️ 모든 요약 필드가 비어있거나 유효하지 않습니다"),console.log("🔍 사용 가능한 필드들:",Object.keys(s))),{summaryText:t,selectedField:r}},Ge=s=>{var v,I;const t=(s==null?void 0:s[0])||{},r=ve(t);console.log("🔍 LLM 분석 결과 디버깅:",r);const{analysis:i,dataStructure:d}=Je(t),m=_e(i);console.log("📊 분석 객체 구조:",{analysis:i,analysisKeys:Object.keys(i||{}),dataStructure:d,validationResult:m,availableSummaries:{executive_summary:!!(i!=null&&i.executive_summary),overall_summary:!!(i!=null&&i.overall_summary),comprehensive_summary:!!(i!=null&&i.comprehensive_summary)},originalDataKeys:Object.keys(t||{}),hasDataField:"data"in(t||{}),dataFieldKeys:t!=null&&t.data?Object.keys(t.data):[],hasAnalysisInData:((v=t==null?void 0:t.data)==null?void 0:v.analysis)!==void 0,analysisInDataKeys:(I=t==null?void 0:t.data)!=null&&I.analysis?Object.keys(t.data.analysis):[],llmFieldsCheck:{executive_summary:{exists:(i==null?void 0:i.executive_summary)!==void 0,type:typeof(i==null?void 0:i.executive_summary),value:i==null?void 0:i.executive_summary},overall_summary:{exists:(i==null?void 0:i.overall_summary)!==void 0,type:typeof(i==null?void 0:i.overall_summary),value:i==null?void 0:i.overall_summary},comprehensive_summary:{exists:(i==null?void 0:i.comprehensive_summary)!==void 0,type:typeof(i==null?void 0:i.comprehensive_summary),value:i==null?void 0:i.comprehensive_summary}}});const{summaryText:h,selectedField:o}=de(i);console.log("📝 최종 요약 텍스트:",{summaryText:(h==null?void 0:h.substring(0,200))+"..."||"없음",selectedField:o,textLength:(h==null?void 0:h.length)||0,isValid:!!h&&h!=="요약 정보가 없습니다."});const k=(R=>{const B=["diagnostic_findings","key_findings","findings","observations","insights"];for(const re of B){const L=R[re];if(Array.isArray(L)&&L.length>0){if(typeof L[0]=="object"&&L[0])return L;if(typeof L[0]=="string")return L.map(le=>({primary_hypothesis:String(le)}))}}return[]})(i),te=(R=>{const B=["recommended_actions","recommendations","actions","suggestions"];for(const re of B){const L=R[re];if(Array.isArray(L)&&L.length>0)return L.map(le=>le&&typeof le=="object"?le:{priority:"",action:String(le||""),details:""});if(L&&typeof L=="object")return[{priority:L.priority||"",action:L.action||String(L),details:L.details||""}];if(typeof L=="string"&&L.trim())return[{priority:"",action:L.trim(),details:""}]}return[]})(i);return e.jsxs("div",{className:"space-y-4 max-w-full overflow-hidden",children:[e.jsxs(pe,{className:"w-full overflow-hidden",children:[e.jsx(we,{children:e.jsx(ye,{children:"종합 분석 요약"})}),e.jsx(je,{className:"w-full overflow-hidden",children:e.jsx("div",{className:"text-sm text-muted-foreground whitespace-pre-wrap break-words w-full",children:h})})]}),k.length>0&&e.jsxs(pe,{className:"w-full overflow-hidden",children:[e.jsx(we,{children:e.jsx(ye,{children:"핵심 관찰 사항"})}),e.jsx(je,{className:"max-w-full overflow-hidden",children:e.jsx("div",{className:"space-y-3",children:k.map((R,B)=>e.jsxs("div",{className:"space-y-1",children:[R.primary_hypothesis&&e.jsxs("div",{className:"text-sm break-words whitespace-pre-wrap",children:[e.jsxs("span",{className:"font-semibold",children:["가설 ",B+1,":"]})," ",R.primary_hypothesis]}),R.supporting_evidence&&e.jsxs("div",{className:"text-xs text-muted-foreground break-words whitespace-pre-wrap",children:["증거: ",R.supporting_evidence]}),R.confounding_factors_assessment&&e.jsxs("div",{className:"text-xs text-muted-foreground break-words whitespace-pre-wrap",children:["교란 변수 평가: ",R.confounding_factors_assessment]})]},B))})})]}),te.length>0&&e.jsxs(pe,{className:"w-full overflow-hidden",children:[e.jsx(we,{children:e.jsx(ye,{children:"권장 조치"})}),e.jsx(je,{className:"max-w-full overflow-hidden",children:e.jsx("div",{className:"space-y-3 max-w-full overflow-hidden",children:te.map((R,B)=>e.jsxs("div",{className:"flex items-start gap-3 max-w-full overflow-hidden",children:[e.jsx("div",{className:"mt-0.5 flex-shrink-0",children:e.jsx(bt,{className:"h-5 w-5 text-green-500"})}),e.jsxs("div",{className:"flex-1 min-w-0 max-w-full overflow-hidden",children:[e.jsxs("div",{className:"flex items-center gap-2 max-w-full overflow-hidden",children:[R.priority&&e.jsx(Y,{variant:"outline",className:"flex-shrink-0",children:R.priority}),e.jsx("div",{className:"text-sm font-medium break-words whitespace-pre-wrap min-w-0 max-w-full",children:R.action||"-"})]}),R.details&&e.jsx("div",{className:"text-xs text-muted-foreground mt-1 whitespace-pre-wrap break-words max-w-full",children:R.details})]})]},B))})})]})]})},Ws=()=>e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-semibold",children:[j.length,"개 결과 비교"]}),e.jsx("div",{className:"flex gap-2",children:j.map((s,t)=>e.jsxs(Y,{variant:"outline",className:"gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:`hsl(${t*60}, 70%, 50%)`}}),"결과 ",t+1]},s.id))})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:j.map((s,t)=>e.jsx(pe,{className:"border-l-4",style:{borderLeftColor:`hsl(${t*60}, 70%, 50%)`},children:e.jsx(je,{className:"pt-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"font-medium",children:["결과 ",t+1]}),e.jsx(Y,{variant:Ke(s.status),children:s.status})]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:ze(s.analysisDate)}),e.jsxs("div",{className:"text-sm",children:["NE: ",s.neId," | Cell: ",s.cellId]})]})})},s.id))})]}),Hs=s=>e.jsx("div",{className:"space-y-4 max-w-full overflow-hidden",children:e.jsxs(pe,{className:"border-l-4 border-l-blue-500 w-full overflow-hidden",children:[e.jsx(we,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ye,{className:"text-lg",children:"분석 결과 상세 정보"}),e.jsx(Y,{variant:Ke(s.status),children:s.status})]})}),e.jsxs(je,{className:"space-y-4 max-w-full overflow-hidden",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-sm font-medium text-muted-foreground",children:"분석 날짜"}),e.jsx("div",{className:"text-sm",children:ze(s.analysisDate)})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-sm font-medium text-muted-foreground",children:"NE ID"}),e.jsx("div",{className:"text-sm",children:s.neId})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-sm font-medium text-muted-foreground",children:"Cell ID"}),e.jsx("div",{className:"text-sm",children:s.cellId})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-sm font-medium text-muted-foreground",children:"LLM 모델"}),e.jsx("div",{className:"text-sm",children:s.llmModel||"N/A"})]})]}),(()=>{const{analysis:t}=Je(s),{summaryText:r}=de(t);return typeof r=="string"&&r.trim()&&r!=="요약 정보가 없습니다."?e.jsxs("div",{className:"space-y-2 max-w-full overflow-hidden",children:[e.jsx("div",{className:"text-sm font-medium text-muted-foreground",children:"분석 결과"}),e.jsx("div",{className:"text-sm bg-muted p-3 rounded-md max-h-48 overflow-y-auto break-words whitespace-pre-wrap w-full",children:r})]}):null})(),(()=>{const{analysis:t}=Je(s);let r=[];return Array.isArray(t==null?void 0:t.recommended_actions)?r=t.recommended_actions:typeof(t==null?void 0:t.recommended_actions)=="string"&&t.recommended_actions.trim()?r=[t.recommended_actions]:Array.isArray(t==null?void 0:t.recommendations)?r=t.recommendations:typeof(t==null?void 0:t.recommendations)=="string"&&t.recommendations.trim()&&(r=[t.recommendations]),r.length?e.jsxs("div",{className:"space-y-2 max-w-full overflow-hidden",children:[e.jsx("div",{className:"text-sm font-medium text-muted-foreground",children:"권장 사항"}),e.jsx("div",{className:"space-y-1 max-w-full overflow-hidden",children:r.map((i,d)=>e.jsx("div",{className:"text-sm bg-green-50 dark:bg-green-900/20 p-2 rounded border-l-2 border-l-green-500 break-words whitespace-pre-wrap max-w-full",children:typeof i=="string"?i:JSON.stringify(i)},d))})]}):null})()]})]})}),Bs=()=>e.jsxs(pe,{className:"border-l-4 border-l-purple-500",children:[e.jsxs(we,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(ye,{className:"flex items-center gap-2",children:[e.jsx(os,{className:"h-5 w-5 text-purple-600"}),"Choi 알고리즘 판정 결과",A?e.jsx(Y,{variant:"outline",className:"text-purple-600",children:"완료"}):Q?e.jsx(Y,{variant:"outline",className:"text-purple-600",children:"실행 중"}):e.jsx(Y,{variant:"outline",className:"text-purple-600",children:"대기"})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[!Q&&e.jsx(F,{variant:"secondary",size:"sm",onClick:async()=>{var s;try{ee(!0),y("running");const t=j==null?void 0:j[0],r=((t==null?void 0:t.stats)||[]).map(h=>h==null?void 0:h.cell_id).filter(Boolean).slice(0,5),i={input_data:{},cell_ids:r.length?Array.from(new Set(r)):["cell_001"],time_range:{pre_start:new Date(Date.now()-7200*1e3).toISOString(),pre_end:new Date(Date.now()-3600*1e3).toISOString(),post_start:new Date(Date.now()-1800*1e3).toISOString(),post_end:new Date().toISOString()},compare_mode:!0},d=await runChoiAnalysis(i),m=d!=null&&d.kpi_judgement?{overall:d.kpi_judgement.overall,reasons:d.kpi_judgement.reasons||[],by_kpi:d.kpi_judgement.by_kpi||{},warnings:d.processing_warnings||[]}:((s=d==null?void 0:d.peg_analysis)==null?void 0:s.choi_judgement)||null;a(m),y("done")}catch(t){console.error("Choi 분석 실패",t),y("error")}finally{ee(!1)}},className:"text-purple-600 border-purple-200 hover:bg-purple-50",children:A?"재실행":"분석 실행"}),e.jsx(F,{variant:"ghost",size:"sm",onClick:()=>Ze("choi"),className:"text-purple-600 hover:text-purple-700 hover:bg-purple-50",children:e.jsx(He,{className:"h-4 w-4"})})]})]}),e.jsx(ys,{children:"Choi 알고리즘 문서 기반의 품질 판정 결과를 표시합니다."})]}),e.jsxs(je,{children:[Q&&e.jsxs("div",{className:"flex items-center justify-center gap-2 py-6",children:[e.jsx(Le,{className:"h-4 w-4 animate-spin"}),e.jsx("p",{className:"text-muted-foreground",children:"분석 실행 중..."})]}),!Q&&A&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"전체 판정"}),e.jsx(Y,{variant:"outline",className:"text-purple-700",children:A.overall||"N/A"})]}),Array.isArray(A.reasons)&&A.reasons.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium mb-2",children:"사유"}),e.jsx("ul",{className:"list-disc pl-5 text-sm text-muted-foreground",children:A.reasons.map((s,t)=>e.jsx("li",{children:typeof s=="string"?s:JSON.stringify(s)},t))})]}),A.by_kpi&&Object.keys(A.by_kpi).length>0&&e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left text-muted-foreground",children:[e.jsx("th",{className:"px-2 py-1",children:"KPI"}),e.jsx("th",{className:"px-2 py-1",children:"Status"})]})}),e.jsx("tbody",{children:Object.entries(A.by_kpi).map(([s,t])=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"px-2 py-1 whitespace-nowrap",children:s}),e.jsx("td",{className:"px-2 py-1",children:t&&t.status||"N/A"})]},s))})]})}),Array.isArray(A.warnings)&&A.warnings.length>0&&e.jsxs("div",{className:"text-xs text-yellow-700 bg-yellow-50 border border-yellow-200 rounded p-2",children:["경고: ",A.warnings.join(", ")]})]}),!Q&&!A&&e.jsxs("div",{className:"text-center py-8",children:[e.jsxs("div",{className:"relative mb-4",children:[e.jsx(os,{className:"h-12 w-12 text-purple-400 mx-auto"}),e.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-purple-500 rounded-full animate-pulse"})]}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"알고리즘 실행 대기"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"버튼을 눌러 Choi 알고리즘 판정을 실행하세요."}),e.jsx("div",{className:"bg-purple-50 dark:bg-purple-900/20 border border-purple-200 dark:border-purple-800 rounded-lg p-4",children:e.jsxs("p",{className:"text-purple-800 dark:text-purple-200 text-sm",children:[e.jsx("strong",{children:"현재 상태:"})," ",q]})})]})]})]}),Us=()=>{var r,i,d,m,h;if(console.log("🎨 마할라노비스 렌더링 상태:",{mahalanobisResult:b,loading:S,resultsLength:N.length}),!b)return e.jsxs(pe,{className:"border-l-4 border-l-orange-500",children:[e.jsx(we,{children:e.jsxs(ye,{className:"flex items-center gap-2",children:[e.jsx(Fe,{className:"h-5 w-5 text-orange-600"}),"마할라노비스 거리 분석"]})}),e.jsx(je,{children:e.jsx("div",{className:"text-center py-4",children:S?e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(Le,{className:"h-4 w-4 animate-spin"}),e.jsx("p",{className:"text-muted-foreground",children:"분석 데이터를 불러오는 중..."})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-muted-foreground",children:"분석 데이터를 기다리는 중..."}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["결과: ",N.length,"개, 로딩: ",S?"예":"아니오"]})]})})})]});if(b.error)return e.jsxs(pe,{className:"border-l-4 border-l-red-500",children:[e.jsx(we,{children:e.jsxs(ye,{className:"flex items-center gap-2",children:[e.jsx(Fe,{className:"h-5 w-5 text-red-600"}),"마할라노비스 거리 분석"]})}),e.jsx(je,{children:e.jsxs("div",{className:"text-center py-4",children:[e.jsx(Ue,{className:"h-8 w-8 text-red-500 mx-auto mb-2"}),e.jsx("p",{className:"text-red-600",children:b.error})]})})]});const s=o=>{switch(o){case"critical":return"text-red-600 bg-red-50 border-red-200";case"warning":return"text-orange-600 bg-orange-50 border-orange-200";case"caution":return"text-yellow-600 bg-yellow-50 border-yellow-200";default:return"text-green-600 bg-green-50 border-green-200"}},t=o=>{switch(o){case"critical":return e.jsx(Cs,{className:"h-5 w-5"});case"warning":return e.jsx(Ue,{className:"h-5 w-5"});case"caution":return e.jsx(kt,{className:"h-5 w-5"});default:return e.jsx(yt,{className:"h-5 w-5"})}};return e.jsxs(pe,{className:"border-l-4 border-l-orange-500",children:[e.jsxs(we,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(ye,{className:"flex items-center gap-2",children:[e.jsx(Fe,{className:"h-5 w-5 text-orange-600"}),"마할라노비스 거리 분석 결과"]})}),e.jsx(F,{variant:"ghost",size:"sm",onClick:()=>Ze("mahalanobis"),className:"text-orange-600 hover:text-orange-700 hover:bg-orange-50",children:e.jsx(He,{className:"h-4 w-4"})})]}),e.jsx(ys,{children:"1차 스크리닝: 종합 건강 상태 진단 및 2차 심층 분석 결과"})]}),e.jsxs(je,{className:"space-y-6",children:[e.jsxs("div",{className:`p-4 rounded-lg border ${s(b.alarmLevel)}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[t(b.alarmLevel),e.jsx("span",{className:"font-semibold",children:"종합 건강 상태"})]}),e.jsx(Y,{variant:b.alarmLevel==="normal"?"default":"destructive",children:b.alarmLevel==="normal"?"정상":b.alarmLevel==="caution"?"주의":b.alarmLevel==="warning"?"경고":"심각"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"총 KPI 수:"}),e.jsxs("div",{className:"font-medium",children:[b.totalKpis,"개"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"이상 KPI 수:"}),e.jsxs("div",{className:"font-medium",children:[b.abnormalKpis.length,"개"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"이상 점수:"}),e.jsxs("div",{className:"font-medium",children:[(b.abnormalScore*100).toFixed(1),"%"]})]})]}),e.jsxs("div",{className:"mt-2 text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"판정:"}),e.jsx("span",{className:"ml-1",children:b.analysis.screening.description})]})]}),b.abnormalKpis.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold mb-3 flex items-center gap-2",children:[e.jsx(Cs,{className:"h-4 w-4"}),"이상 감지된 KPI 목록"]}),e.jsx("div",{className:"space-y-2",children:b.abnormalKpis.slice(0,5).map((o,u)=>{var k,z;return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/30 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:o.kpiName}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["N-1: ",(k=o.n1Value)==null?void 0:k.toFixed(2)," → N:"," ",(z=o.nValue)==null?void 0:z.toFixed(2)]})]}),e.jsx("div",{className:"text-right",children:e.jsxs(Y,{variant:o.severity==="critical"?"destructive":o.severity==="warning"?"secondary":"outline",children:[(o.changeRate*100).toFixed(1),"%"]})})]},u)})})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsxs("h4",{className:"font-semibold mb-3 flex items-center gap-2",children:[e.jsx(wt,{className:"h-4 w-4"}),"2차 심층 분석 결과"]}),((i=(r=b.analysis)==null?void 0:r.drilldown)==null?void 0:i.summary)&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4 p-3 bg-muted/30 rounded-lg",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold text-blue-600",children:b.analysis.drilldown.summary.totalAnalyzed}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"분석된 KPI"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold text-green-600",children:b.analysis.drilldown.summary.statisticallySignificant}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"통계적 유의성"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold text-orange-600",children:b.analysis.drilldown.summary.highConfidenceFindings}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"고신뢰도 발견"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold text-purple-600",children:b.analysis.drilldown.summary.distributionChanges}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"분포 변화"})]})]}),((h=(m=(d=b.analysis)==null?void 0:d.drilldown)==null?void 0:m.statisticalAnalysis)==null?void 0:h.length)>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h5",{className:"font-medium text-sm",children:"개별 KPI 통계 분석 결과"}),b.analysis.drilldown.statisticalAnalysis.map((o,u)=>{var k,z,te,v,I,R;return e.jsxs("div",{className:"border rounded-lg p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:o.kpiName}),e.jsx(Y,{variant:o.severity==="critical"?"destructive":o.severity==="warning"?"secondary":"outline",children:o.severity}),e.jsxs(Y,{variant:o.confidence==="high"?"default":o.confidence==="medium"?"secondary":"outline",children:["신뢰도: ",o.confidence]})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["변화율: ",(o.changeRate*100).toFixed(1),"%"]})]}),!o.statisticalTests.error&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h6",{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(Fe,{className:"h-3 w-3"}),"Mann-Whitney U Test"]}),e.jsx(F,{variant:"ghost",size:"sm",onClick:()=>Ze("mann-whitney"),className:"text-blue-600 hover:text-blue-700 hover:bg-blue-50 h-6 w-6 p-0",children:e.jsx(He,{className:"h-3 w-3"})})]}),e.jsxs("div",{className:"text-xs space-y-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"U 통계량:"}),e.jsx("span",{className:"font-mono",children:(k=o.statisticalTests.mannWhitney.U)==null?void 0:k.toFixed(2)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Z-score:"}),e.jsx("span",{className:"font-mono",children:(z=o.statisticalTests.mannWhitney.zScore)==null?void 0:z.toFixed(3)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"p-value:"}),e.jsx("span",{className:`font-mono ${o.statisticalTests.mannWhitney.significant?"text-red-600 font-bold":"text-green-600"}`,children:(te=o.statisticalTests.mannWhitney.pValue)==null?void 0:te.toFixed(4)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"효과 크기:"}),e.jsx("span",{className:"font-mono",children:(v=o.statisticalTests.mannWhitney.effectSize)==null?void 0:v.toFixed(3)})]})]}),e.jsx("div",{className:`text-xs p-2 rounded ${o.statisticalTests.mannWhitney.significant?"bg-red-50 text-red-700 border border-red-200":"bg-green-50 text-green-700 border border-green-200"}`,children:o.statisticalTests.mannWhitney.interpretation})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h6",{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(us,{className:"h-3 w-3"}),"Kolmogorov-Smirnov Test"]}),e.jsx(F,{variant:"ghost",size:"sm",onClick:()=>Ze("ks-test"),className:"text-green-600 hover:text-green-700 hover:bg-green-50 h-6 w-6 p-0",children:e.jsx(He,{className:"h-3 w-3"})})]}),e.jsxs("div",{className:"text-xs space-y-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"D 통계량:"}),e.jsx("span",{className:"font-mono",children:(I=o.statisticalTests.kolmogorovSmirnov.D)==null?void 0:I.toFixed(4)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"p-value:"}),e.jsx("span",{className:`font-mono ${o.statisticalTests.kolmogorovSmirnov.significant?"text-red-600 font-bold":"text-green-600"}`,children:(R=o.statisticalTests.kolmogorovSmirnov.pValue)==null?void 0:R.toFixed(4)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"분포 차이:"}),e.jsx("span",{className:"font-mono",children:o.statisticalTests.kolmogorovSmirnov.distributionDifference})]})]}),e.jsx("div",{className:`text-xs p-2 rounded ${o.statisticalTests.kolmogorovSmirnov.significant?"bg-red-50 text-red-700 border border-red-200":"bg-green-50 text-green-700 border border-green-200"}`,children:o.statisticalTests.kolmogorovSmirnov.interpretation})]})]}),o.statisticalTests.error&&e.jsx("div",{className:"text-xs p-2 bg-red-50 text-red-700 border border-red-200 rounded",children:o.statisticalTests.error})]},u)})]}),e.jsxs("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx("h6",{className:"text-sm font-medium text-blue-800 mb-2",children:"변화점 탐지 알고리즘"}),e.jsxs("div",{className:"text-xs text-blue-700 space-y-1",children:[e.jsx("div",{children:"• Cusum 알고리즘을 통한 변화점 자동 탐지 예정"}),e.jsx("div",{children:"• 정확한 문제 발생 시각 특정 및 원인 분석"}),e.jsx("div",{children:"• 실시간 모니터링을 통한 사전 경고 시스템 구축"})]})]})]})]})]})},qs=()=>S?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Le,{className:"h-5 w-5 animate-spin text-primary"}),e.jsx("p",{className:"text-muted-foreground dark:text-muted-foreground/80",children:"분석 결과를 불러오는 중..."})]}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"bg-card/40 dark:bg-card/20 border rounded-lg p-4",children:[e.jsx("div",{className:"h-5 w-48 bg-accent/60 dark:bg-accent/30 animate-pulse rounded mb-3"}),e.jsx("div",{className:"h-4 w-full bg-accent/60 dark:bg-accent/30 animate-pulse rounded mb-2"}),e.jsx("div",{className:"h-4 w-5/6 bg-accent/60 dark:bg-accent/30 animate-pulse rounded"})]}),e.jsxs("div",{className:"bg-card/40 dark:bg-card/20 border rounded-lg p-4",children:[e.jsx("div",{className:"h-5 w-56 bg-accent/60 dark:bg-accent/30 animate-pulse rounded mb-3"}),e.jsx("div",{className:"h-48 w-full bg-accent/60 dark:bg-accent/30 animate-pulse rounded"})]})]})]}):ne?e.jsx("div",{className:"max-w-xl mx-auto",children:e.jsx("div",{className:"border rounded-lg p-6 bg-background dark:bg-background/60",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Ue,{className:"h-5 w-5 text-destructive mt-0.5"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-semibold",children:"데이터를 불러오지 못했습니다"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:ne}),e.jsx("div",{className:"pt-1",children:e.jsxs(F,{variant:"outline",onClick:()=>oe(p),children:[e.jsx(Nt,{className:"h-4 w-4 mr-2"})," 다시 시도"]})})]})]})})}):j.length===0?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Ue,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"분석 결과를 찾을 수 없습니다."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"space-y-6",children:K?Ws():Hs(j[0])}),e.jsx(as,{title:"LLM 분석 리포트",defaultOpen:!0,"data-testid":"section-llm",children:Ge(j)}),A&&e.jsx(as,{title:e.jsxs("span",{className:"inline-flex items-center gap-2",children:["Choi 알고리즘 판정",(A==null?void 0:A.overall)&&e.jsx(zs,{status:A.overall})]}),defaultOpen:!0,"data-testid":"section-choi",children:Bs()}),b&&e.jsx(as,{title:"마할라노비스 분석",defaultOpen:!0,"data-testid":"section-mahalanobis",children:Us()}),Z&&e.jsx(as,{title:"PEG 비교 분석",defaultOpen:!0,"data-testid":"section-peg",children:e.jsx(zt,{results:Z})})]}),Ze=c.useCallback(s=>{P({isOpen:!0,algorithm:s})},[]),Js=c.useCallback(()=>{P({isOpen:!1,algorithm:null})},[]),Zs=()=>{switch(C.algorithm){case"choi":return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx(os,{className:"h-12 w-12 text-purple-600 mx-auto mb-2"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Choi 알고리즘 도움말"})]}),e.jsxs("div",{className:"space-y-4 text-sm",children:[e.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg border border-purple-200",children:[e.jsx("h4",{className:"font-semibold text-purple-800 mb-2",children:"🔍 알고리즘 개요"}),e.jsx("p",{className:"text-purple-700",children:"Choi 알고리즘은 품질 저하 판정을 위한 특화된 알고리즘입니다. 현재 준비 단계로, 향후 특정 KPI 패턴을 분석하여 품질 문제를 진단합니다."})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[e.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:"📊 신뢰성 기준"}),e.jsxs("div",{className:"space-y-2 text-blue-700",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"준비 단계:"})," 현재 absent 상태로 표시됩니다."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"향후 기준:"})," 구현 시 품질 저하 판정 정확도 85% 이상 목표"]})]})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:[e.jsx("h4",{className:"font-semibold text-green-800 mb-2",children:"💡 해석 방법"}),e.jsxs("div",{className:"space-y-2 text-green-700",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"정상:"})," 품질 문제가 감지되지 않음"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"주의:"})," 잠재적 품질 저하 가능성"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"경고:"})," 즉각적인 조치 필요"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"심각:"})," 긴급 대응 요구"]})]})]}),e.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg border border-yellow-200",children:[e.jsx("h4",{className:"font-semibold text-yellow-800 mb-2",children:"⚠️ 주의사항"}),e.jsxs("div",{className:"space-y-1 text-yellow-700 text-xs",children:[e.jsx("p",{children:"• 현재 구현 준비 단계입니다."}),e.jsx("p",{children:"• Choi 알고리즘 문서에 따라 구현될 예정입니다."}),e.jsx("p",{children:"• 도메인 전문가의 검토가 필요합니다."})]})]})]})]});case"mahalanobis":return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx(Fe,{className:"h-12 w-12 text-orange-600 mx-auto mb-2"}),e.jsx("h3",{className:"text-lg font-semibold",children:"마할라노비스 거리 분석 도움말"})]}),e.jsxs("div",{className:"space-y-4 text-sm",children:[e.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg border border-orange-200",children:[e.jsx("h4",{className:"font-semibold text-orange-800 mb-2",children:"🔍 알고리즘 개요"}),e.jsx("p",{className:"text-orange-700",children:"다차원 데이터에서 이상치를 탐지하는 통계적 방법입니다. 여러 KPI를 동시에 고려하여 종합적인 건강 상태를 평가합니다."})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[e.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:"📊 신뢰성 기준"}),e.jsxs("div",{className:"space-y-2 text-blue-700",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"이상 점수 범위:"})," 0.0 ~ 1.0"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"주의 임계치:"})," 0.1 (10% 이상 KPI 이상)"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"경고 임계치:"})," 0.2 (20% 이상 KPI 이상)"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"심각 임계치:"})," 0.3 (30% 이상 KPI 이상)"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"신뢰도:"})," 95% 이상의 정확도 목표"]})]})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:[e.jsx("h4",{className:"font-semibold text-green-800 mb-2",children:"💡 해석 방법"}),e.jsxs("div",{className:"space-y-2 text-green-700",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"정상 (Normal):"})," 이상 점수가 낮아 안정적 상태"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"주의 (Caution):"})," 일부 KPI에서 변화 감지, 모니터링 필요"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"경고 (Warning):"})," 다수 KPI 이상, 즉각적 검토 필요"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"심각 (Critical):"})," 심각한 이상 패턴, 긴급 조치 요구"]})]})]}),e.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg border border-yellow-200",children:[e.jsx("h4",{className:"font-semibold text-yellow-800 mb-2",children:"⚠️ 주의사항"}),e.jsxs("div",{className:"space-y-1 text-yellow-700 text-xs",children:[e.jsx("p",{children:"• 다차원 데이터의 상관관계를 고려합니다."}),e.jsx("p",{children:"• 개별 KPI 변화율 10% 이상을 이상으로 간주합니다."}),e.jsx("p",{children:"• 통계적 유의성을 고려하여 판정합니다."}),e.jsx("p",{children:"• 도메인 지식과 함께 해석하는 것이 중요합니다."})]})]})]})]});case"mann-whitney":return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx(Fe,{className:"h-12 w-12 text-blue-600 mx-auto mb-2"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Mann-Whitney U Test 도움말"})]}),e.jsxs("div",{className:"space-y-4 text-sm",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[e.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:"🔍 알고리즘 개요"}),e.jsx("p",{className:"text-blue-700",children:"두 독립적인 그룹 간의 차이를 비교하는 비모수적 통계 검정입니다. 데이터의 정규성 가정 없이 평균 차이의 통계적 유의성을 검정합니다."})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:[e.jsx("h4",{className:"font-semibold text-green-800 mb-2",children:"📊 신뢰성 기준"}),e.jsxs("div",{className:"space-y-2 text-green-700",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"p-value:"})," 0.05 미만이면 통계적으로 유의함"]}),e.jsx("p",{children:e.jsx("strong",{children:"효과 크기 (Effect Size):"})}),e.jsxs("ul",{className:"ml-4 space-y-1",children:[e.jsx("li",{children:"• 0.2: 작은 효과"}),e.jsx("li",{children:"• 0.5: 중간 효과"}),e.jsx("li",{children:"• 0.8: 큰 효과"})]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Z-score:"})," ±1.96 이상이면 95% 신뢰수준에서 유의함"]})]})]}),e.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg border border-purple-200",children:[e.jsx("h4",{className:"font-semibold text-purple-800 mb-2",children:"💡 해석 방법"}),e.jsxs("div",{className:"space-y-2 text-purple-700",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"p < 0.05:"})," 두 그룹 간에 통계적으로 유의한 차이가 있음"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"p ≥ 0.05:"})," 우연에 의한 차이일 가능성이 높음"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"큰 효과 크기:"})," 실질적으로 의미 있는 차이"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"작은 효과 크기:"})," 통계적 유의성은 있지만 실질적 차이는 미미"]})]})]}),e.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg border border-yellow-200",children:[e.jsx("h4",{className:"font-semibold text-yellow-800 mb-2",children:"⚠️ 주의사항"}),e.jsxs("div",{className:"space-y-1 text-yellow-700 text-xs",children:[e.jsx("p",{children:"• 데이터의 독립성 가정을 만족해야 합니다."}),e.jsx("p",{children:"• 표본 크기가 작으면 검정력이 낮아질 수 있습니다."}),e.jsx("p",{children:"• 이상치에 덜 민감하지만, 분포 모양을 고려해야 합니다."}),e.jsx("p",{children:"• p-value만으로 결론을 내리지 말고 효과 크기도 고려하세요."})]})]})]})]});case"ks-test":return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx(us,{className:"h-12 w-12 text-green-600 mx-auto mb-2"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Kolmogorov-Smirnov Test 도움말"})]}),e.jsxs("div",{className:"space-y-4 text-sm",children:[e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:[e.jsx("h4",{className:"font-semibold text-green-800 mb-2",children:"🔍 알고리즘 개요"}),e.jsx("p",{className:"text-green-700",children:"두 샘플의 분포가 같은지 비교하는 비모수적 검정입니다. 누적분포함수(CDF)의 최대 차이를 기반으로 분포 차이를 검정합니다."})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[e.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:"📊 신뢰성 기준"}),e.jsxs("div",{className:"space-y-2 text-blue-700",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"D 통계량:"})," 두 CDF 간 최대 차이 (0~1 범위)"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"p-value:"})," 0.05 미만이면 분포 차이가 유의함"]}),e.jsx("p",{children:e.jsx("strong",{children:"분포 차이 정도:"})}),e.jsxs("ul",{className:"ml-4 space-y-1",children:[e.jsx("li",{children:"• Small (D < 0.1): 미미한 차이"}),e.jsx("li",{children:"• Medium (0.1 ≤ D < 0.2): 중간 정도 차이"}),e.jsx("li",{children:"• Large (D ≥ 0.2): 큰 차이"})]})]})]}),e.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg border border-purple-200",children:[e.jsx("h4",{className:"font-semibold text-purple-800 mb-2",children:"💡 해석 방법"}),e.jsxs("div",{className:"space-y-2 text-purple-700",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"p < 0.05:"})," 두 그룹의 분포가 통계적으로 다름"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"p ≥ 0.05:"})," 두 그룹의 분포가 비슷함"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"D 값이 큼:"})," 분포 모양의 차이가 큼"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"D 값이 작음:"})," 분포가 서로 유사함"]})]})]}),e.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg border border-yellow-200",children:[e.jsx("h4",{className:"font-semibold text-yellow-800 mb-2",children:"⚠️ 주의사항"}),e.jsxs("div",{className:"space-y-1 text-yellow-700 text-xs",children:[e.jsx("p",{children:"• 분포의 모양, 위치, 산포도 차이를 모두 고려합니다."}),e.jsx("p",{children:"• 표본 크기가 작으면 검정력이 낮아질 수 있습니다."}),e.jsx("p",{children:"• 이상치에 민감할 수 있습니다."}),e.jsx("p",{children:"• p-value와 D 통계량을 함께 고려하여 해석하세요."})]})]})]})]});case"peg-comparison":return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx(vt,{className:"h-12 w-12 text-teal-600 mx-auto mb-2"}),e.jsx("h3",{className:"text-lg font-semibold",children:"PEG 비교 분석 도움말"})]}),e.jsxs("div",{className:"space-y-4 text-sm",children:[e.jsxs("div",{className:"bg-teal-50 p-4 rounded-lg border border-teal-200",children:[e.jsx("h4",{className:"font-semibold text-teal-800 mb-2",children:"🔍 알고리즘 개요"}),e.jsx("p",{className:"text-teal-700",children:"N-1 기간과 N 기간의 PEG별 성능을 비교하는 분석입니다. 평균, 표준편차, 변화율을 계산하여 성능 트렌드를 분석합니다."})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[e.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:"📊 신뢰성 기준"}),e.jsxs("div",{className:"space-y-2 text-blue-700",children:[e.jsx("p",{children:e.jsx("strong",{children:"변화율:"})}),e.jsxs("ul",{className:"ml-4 space-y-1",children:[e.jsx("li",{children:"• ±5%: 안정 범위"}),e.jsx("li",{children:"• ±5~10%: 주의 범위"}),e.jsx("li",{children:"• ±10% 초과: 이상 범위"})]}),e.jsx("p",{children:e.jsx("strong",{children:"RSD (상대 표준편차):"})}),e.jsxs("ul",{className:"ml-4 space-y-1",children:[e.jsx("li",{children:"• < 10%: 매우 안정적"}),e.jsx("li",{children:"• 10~20%: 보통 안정성"}),e.jsx("li",{children:"• > 20%: 불안정적"})]}),e.jsxs("p",{children:[e.jsx("strong",{children:"가중치:"})," 1~10 범위로 PEG 중요도 반영"]})]})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:[e.jsx("h4",{className:"font-semibold text-green-800 mb-2",children:"💡 해석 방법"}),e.jsxs("div",{className:"space-y-2 text-green-700",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"개선 (Up):"})," N 기간 성능이 향상된 PEG"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"하락 (Down):"})," N 기간 성능이 저하된 PEG"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"안정 (Stable):"})," 큰 변화 없는 PEG"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"신뢰도:"})," 통계 테스트 결과에 따른 분석 신뢰도"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"RSD 비교:"})," 기간별 변동성 비교"]})]})]}),e.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg border border-yellow-200",children:[e.jsx("h4",{className:"font-semibold text-yellow-800 mb-2",children:"⚠️ 주의사항"}),e.jsxs("div",{className:"space-y-1 text-yellow-700 text-xs",children:[e.jsx("p",{children:"• 데이터의 연속성과 완전성을 확인하세요."}),e.jsx("p",{children:"• 계절적/주기적 패턴을 고려하여 분석하세요."}),e.jsx("p",{children:"• 이상치가 분석 결과에 미치는 영향을 검토하세요."}),e.jsx("p",{children:"• 도메인 전문가의 의견과 함께 해석하는 것이 중요합니다."})]})]})]})]});default:return e.jsx("div",{children:"알고리즘을 선택해주세요."})}};return e.jsxs(e.Fragment,{children:[e.jsx(Ns,{open:l,onOpenChange:n,children:e.jsxs(vs,{className:`transition-all duration-500 ease-in-out transform overflow-hidden ${H?"max-w-[99vw] h-[98vh] w-[99vw] scale-100":"max-w-6xl max-h-[90vh] w-auto min-w-[80vw] scale-100"}`,children:[e.jsxs(bs,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(ws,{className:"flex items-center gap-2",children:[e.jsx(pt,{className:"h-5 w-5"}),K?"분석 결과 비교":"분석 결과 상세"]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(F,{variant:"ghost",size:"sm",onClick:()=>W(!H),className:"transition-all duration-200 hover:scale-110 hover:bg-accent",title:H?"원래 크기로 (ESC)":"최대화 (F11)",children:H?e.jsx(jt,{className:"h-4 w-4"}):e.jsx(ft,{className:"h-4 w-4"})})})]}),e.jsx(Xs,{className:"sr-only",children:K?`${j.length}개의 분석 결과를 비교하고 알고리즘 분석 결과를 확인할 수 있습니다.`:"단일 분석 결과의 상세 정보를 확인하고 Choi 알고리즘, 마할라노비스 거리, PEG 비교 분석 결과를 확인할 수 있습니다."})]}),e.jsx(ks,{className:`transition-all duration-300 overflow-hidden ${H?"h-[85vh]":"max-h-[75vh] min-h-[400px]"}`,children:e.jsx("div",{className:"px-1 w-full max-w-full overflow-hidden",children:qs()})})]})}),e.jsx(Ns,{open:C.isOpen,onOpenChange:Js,children:e.jsxs(vs,{className:"max-w-4xl max-h-[80vh]",children:[e.jsx(bs,{children:e.jsxs(ws,{className:"flex items-center gap-2",children:[e.jsx(He,{className:"h-5 w-5"}),"알고리즘 도움말"]})}),e.jsx(ks,{className:"max-h-[60vh]",children:e.jsx("div",{className:"p-4",children:Zs()})})]})})]})},Vs=c.memo(Gt),Zt=Object.freeze(Object.defineProperty({__proto__:null,default:Vs},Symbol.toStringTag,{value:"Module"})),Vt=()=>{const{results:l,loading:n,error:p,isEmpty:_,hasMore:N,isFiltered:G,resultCount:S,filters:U,updateFilters:ne,clearFilters:V,refresh:H,loadMore:W,deleteResult:q}=At({initialLimit:20,autoFetch:!0}),[y,b]=c.useState(!1),[x,Z]=c.useState(new Set),[E,Q]=c.useState({key:"analysisDate",direction:"desc"}),[ee,A]=c.useState({isOpen:!1,resultIds:[],mode:"single"}),a=c.useCallback((g,D={})=>{console.log(`[ResultsList] ${g}`,D)},[]),C=c.useMemo(()=>l!=null&&l.length?[...l].sort((D,O)=>{const X=D[E.key],K=O[E.key];if(X==null)return 1;if(K==null)return-1;if(E.key==="analysisDate"){const oe=new Date(X),me=new Date(K);return E.direction==="asc"?oe-me:me-oe}if(typeof X=="string"&&typeof K=="string"){const oe=X.localeCompare(K);return E.direction==="asc"?oe:-oe}return typeof X=="number"&&typeof K=="number"?E.direction==="asc"?X-K:K-X:0}):[],[l,E]),P=c.useCallback(g=>{Q(D=>{const O=D.key===g&&D.direction==="asc"?"desc":"asc";return a("정렬 변경",{key:g,direction:O}),{key:g,direction:O}})},[a]),$=c.useCallback(g=>{Z(D=>{const O=new Set(D);return O.has(g)?O.delete(g):O.add(g),O})},[]),ke=c.useCallback(()=>{x.size===C.length?Z(new Set):Z(new Set(C.map(g=>g.id)))},[x.size,C]),fe=c.useCallback(async g=>{try{a("분석 결과 삭제 시작",{resultId:g}),await q(g),Z(D=>{const O=new Set(D);return O.delete(g),O})}catch(D){a("분석 결과 삭제 실패",{resultId:g,error:D})}},[q,a]),Ae=c.useCallback(async()=>{if(x.size!==0)try{a("벌크 삭제 시작",{count:x.size});const g=Array.from(x).map(D=>q(D));await Promise.all(g),Z(new Set),xe.success(`${x.size}개의 결과가 삭제되었습니다.`)}catch(g){a("벌크 삭제 실패",{error:g}),xe.error("일부 결과 삭제에 실패했습니다.")}},[x,q,a]),Ne=c.useCallback(g=>{a("상세 보기 요청",{resultId:g}),A({isOpen:!0,resultIds:[g],mode:"single"})},[a]),Pe=c.useCallback(()=>{if(x.size<2){xe.error("비교할 결과를 2개 이상 선택해주세요");return}if(x.size>5){xe.error("최대 5개까지만 비교할 수 있습니다");return}const g=Array.from(x);a("비교 보기 요청",{resultIds:g,count:g.length}),A({isOpen:!0,resultIds:g,mode:"compare"})},[x,a]),Ce=c.useCallback(()=>{A({isOpen:!1,resultIds:[],mode:"single"})},[]),T=c.useCallback(()=>{if(!(C!=null&&C.length)){xe.error("내보낼 데이터가 없습니다.");return}try{a("데이터 내보내기 시작",{count:C.length});const g=C.map(K=>{var oe,me;return{"분석 날짜":new Date(K.analysisDate).toLocaleString("ko-KR"),"NE ID":K.neId,"Cell ID":K.cellId,상태:K.status,"결과 수":((oe=K.results)==null?void 0:oe.length)||0,"통계 수":((me=K.stats)==null?void 0:me.length)||0}}),D=[Object.keys(g[0]).join(","),...g.map(K=>Object.values(K).join(","))].join(`
`),O=new Blob([D],{type:"text/csv;charset=utf-8;"}),X=document.createElement("a");X.href=URL.createObjectURL(O),X.download=`analysis_results_${new Date().toISOString().split("T")[0]}.csv`,X.click(),xe.success("데이터가 내보내기 되었습니다."),a("데이터 내보내기 완료")}catch(g){a("데이터 내보내기 실패",{error:g}),xe.error("데이터 내보내기에 실패했습니다.")}},[C,a]),se=c.useCallback(g=>{switch(g==null?void 0:g.toLowerCase()){case"success":return"default";case"error":case"failed":return"destructive";case"warning":return"secondary";case"pending":case"processing":return"outline";default:return"secondary"}},[]),ie=c.useCallback(g=>{try{return new Date(g).toLocaleString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}catch{return g||"-"}},[]);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold",children:"LLM 분석 결과"}),e.jsxs("p",{className:"text-muted-foreground",children:["총 ",S,"개의 분석 결과",G&&" (필터 적용됨)"]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[x.size>0&&e.jsxs(e.Fragment,{children:[x.size>=2&&e.jsxs(F,{variant:"default",size:"sm",onClick:Pe,children:[e.jsx(us,{className:"h-4 w-4 mr-2"}),"비교하기 (",x.size,")"]}),e.jsxs(Is,{children:[e.jsx(Rs,{asChild:!0,children:e.jsxs(F,{variant:"destructive",size:"sm",children:[e.jsx(_s,{className:"h-4 w-4 mr-2"}),"선택 삭제 (",x.size,")"]})}),e.jsxs(As,{children:[e.jsxs(Ps,{children:[e.jsx($s,{children:"선택된 결과 삭제"}),e.jsxs(Os,{children:["선택된 ",x.size,"개의 분석 결과를 삭제하시겠습니까? 이 작업은 되돌릴 수 없습니다."]})]}),e.jsxs(Es,{children:[e.jsx(Fs,{children:"취소"}),e.jsx(Ms,{onClick:Ae,children:"삭제"})]})]})]})]}),e.jsxs(F,{variant:"outline",size:"sm",onClick:T,disabled:!(C!=null&&C.length),children:[e.jsx(Ct,{className:"h-4 w-4 mr-2"}),"내보내기"]}),e.jsxs(F,{variant:"outline",size:"sm",onClick:()=>b(!y),children:[e.jsx(ds,{className:"h-4 w-4 mr-2"}),"필터",e.jsx(ms,{className:`h-4 w-4 ml-2 transition-transform ${y?"rotate-180":""}`})]}),e.jsxs(F,{variant:"outline",size:"sm",onClick:H,disabled:n,children:[e.jsx(Ss,{className:`h-4 w-4 mr-2 ${n?"animate-spin":""}`}),"새로고침"]})]})]}),y&&e.jsx(Et,{filters:U,onFilterChange:(g,D)=>ne({[g]:D}),onClearFilters:V,isCollapsed:!1,onToggleCollapse:()=>b(!1),showActiveCount:!0}),e.jsx(pe,{children:e.jsxs(je,{className:"p-0",children:[p&&e.jsx("div",{className:"p-6 text-center border border-destructive/20 rounded-lg bg-destructive/5",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsxs("div",{className:"relative mb-4",children:[e.jsx(Ue,{className:"h-12 w-12 text-destructive"}),e.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-destructive rounded-full animate-pulse"})]}),e.jsx("h3",{className:"text-lg font-semibold mb-2 text-destructive",children:"데이터 로딩 오류"}),e.jsx("p",{className:"text-muted-foreground mb-4 max-w-md",children:p}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(F,{onClick:H,variant:"outline",size:"sm",children:[e.jsx(Ss,{className:"h-4 w-4 mr-2"}),"다시 시도"]}),e.jsxs(F,{onClick:V,variant:"ghost",size:"sm",children:[e.jsx(Re,{className:"h-4 w-4 mr-2"}),"필터 초기화"]})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-3",children:"문제가 지속되면 관리자에게 문의해주세요"})]})}),n&&_&&e.jsxs("div",{className:"p-12 text-center",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Le,{className:"h-8 w-8 animate-spin mx-auto mb-4 text-primary"}),e.jsx("div",{className:"absolute inset-0 rounded-full border-2 border-primary/20 animate-pulse"})]}),e.jsx("p",{className:"text-muted-foreground mb-2",children:"분석 결과를 불러오는 중..."}),e.jsx("p",{className:"text-xs text-muted-foreground/70",children:"잠시만 기다려주세요"})]}),n&&!_&&e.jsxs("div",{className:"flex items-center justify-center py-4 border-t bg-muted/30",children:[e.jsx(Le,{className:"h-4 w-4 animate-spin mr-2 text-primary"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"더 많은 데이터를 불러오는 중..."})]}),!n&&_&&!p&&e.jsxs("div",{className:"p-12 text-center",children:[e.jsxs("div",{className:"relative mb-6",children:[e.jsx(xs,{className:"h-12 w-12 text-muted-foreground mx-auto"}),e.jsx("div",{className:"absolute -bottom-2 left-1/2 transform -translate-x-1/2 w-16 h-1 bg-muted-foreground/20 rounded-full"})]}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:G?"🔍 검색 결과가 없습니다":"📊 분석 결과가 없습니다"}),e.jsx("p",{className:"text-muted-foreground mb-6 max-w-md",children:G?"현재 필터 조건에 맞는 분석 결과가 없습니다. 다른 조건으로 검색해보세요.":""}),e.jsx("div",{className:"flex flex-col sm:flex-row gap-2 justify-center",children:G?e.jsxs(e.Fragment,{children:[e.jsxs(F,{onClick:V,variant:"outline",children:[e.jsx(Re,{className:"h-4 w-4 mr-2"}),"필터 초기화"]}),e.jsxs(F,{onClick:()=>b(!0),variant:"default",children:[e.jsx(ds,{className:"h-4 w-4 mr-2"}),"필터 수정"]})]}):null})]}),!_&&!p&&e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(_t,{children:[e.jsx(St,{children:e.jsxs(Ds,{children:[e.jsx(De,{className:"w-12",children:e.jsx("input",{type:"checkbox",checked:x.size===C.length&&C.length>0,onChange:ke,className:"rounded border-gray-300"})}),e.jsxs(De,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>P("analysisDate"),children:["분석 날짜",E.key==="analysisDate"&&e.jsx("span",{className:"ml-2",children:E.direction==="asc"?"↑":"↓"})]}),e.jsxs(De,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>P("neId"),children:["NE ID",E.key==="neId"&&e.jsx("span",{className:"ml-2",children:E.direction==="asc"?"↑":"↓"})]}),e.jsxs(De,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>P("cellId"),children:["Cell ID",E.key==="cellId"&&e.jsx("span",{className:"ml-2",children:E.direction==="asc"?"↑":"↓"})]}),e.jsx(De,{children:"상태"}),e.jsx(De,{className:"text-center",children:"결과 수"}),e.jsx(De,{className:"text-center",children:"통계 수"}),e.jsx(De,{className:"w-20",children:"작업"})]})}),e.jsx(Dt,{children:C.map(g=>{var D,O;return e.jsxs(Ds,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>Ne(g.id),children:[e.jsx(Ie,{onClick:X=>X.stopPropagation(),children:e.jsx("input",{type:"checkbox",checked:x.has(g.id),onChange:()=>$(g.id),className:"rounded border-gray-300"})}),e.jsx(Ie,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(hs,{className:"h-4 w-4 text-muted-foreground"}),ie(g.analysisDate)]})}),e.jsx(Ie,{className:"font-medium",children:g.neId||"-"}),e.jsx(Ie,{className:"font-medium",children:g.cellId||"-"}),e.jsx(Ie,{children:e.jsx(Y,{variant:se(g.status),children:g.status||"unknown"})}),e.jsx(Ie,{className:"text-center",children:((D=g.results)==null?void 0:D.length)||0}),e.jsx(Ie,{className:"text-center",children:((O=g.stats)==null?void 0:O.length)||0}),e.jsx(Ie,{onClick:X=>X.stopPropagation(),children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(F,{variant:"ghost",size:"sm",onClick:()=>Ne(g.id),title:"상세 보기",children:e.jsx(xs,{className:"h-4 w-4"})}),e.jsxs(Is,{children:[e.jsx(Rs,{asChild:!0,children:e.jsx(F,{variant:"ghost",size:"sm",title:"삭제",children:e.jsx(_s,{className:"h-4 w-4 text-destructive"})})}),e.jsxs(As,{children:[e.jsxs(Ps,{children:[e.jsx($s,{children:"분석 결과 삭제"}),e.jsx(Os,{children:"이 분석 결과를 삭제하시겠습니까? 이 작업은 되돌릴 수 없습니다."})]}),e.jsxs(Es,{children:[e.jsx(Fs,{children:"취소"}),e.jsx(Ms,{onClick:()=>fe(g.id),children:"삭제"})]})]})]})]})})]},g.id)})})]})}),N&&!n&&!p&&e.jsx("div",{className:"p-6 text-center border-t",children:e.jsxs(F,{variant:"outline",onClick:W,disabled:n,children:[n?e.jsx(Le,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(ms,{className:"h-4 w-4 mr-2"}),"더 보기"]})})]})}),e.jsx(Vs,{isOpen:ee.isOpen,onClose:Ce,resultIds:ee.resultIds,mode:ee.mode})]})},Wt=c.memo(Vt),Qt=Object.freeze(Object.defineProperty({__proto__:null,default:Wt},Symbol.toStringTag,{value:"Module"}));export{Zt as R,Qt as a};
