import{j as e,r as c,b as xe,a as Ye}from"./chunk-CTtn32jH.js";import{c as ce,p as Ks,n as fs,C as pe,a as we,b as ye,B as Y,f as F,e as je,L as We,q as Qs,m as gs,g as es,h as ss,i as ts,j as rs,k as ae,D as Ns,r as vs,s as bs,t as ws,v as Xs,w as Ys,d as ys}from"./chunk-DX3kcswl.js";import{G as et,H as st,J as tt,K as rt,M as at,N as nt,Q as lt,U as ct,W as it}from"./chunk-BBx_fWpL.js";import{I as Be,C as ot,a as dt,b as mt,S as ks}from"./chunk-DAqvpfSU.js";import{t as ds,X as Re,a as ms,c as ht,u as xt,v as ut,d as hs,m as xs,w as gt,E as pt,M as jt,x as ft,y as He,L as Le,f as Ue,R as Nt,G as vt,e as us,z as Fe,A as os,k as bt,s as Cs,Z as wt,b as yt,C as kt,T as _s,D as Ct,H as Ss}from"./chunk-M6kWLAXF.js";function _t({className:l,...n}){return e.jsx("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:e.jsx("table",{"data-slot":"table",className:ce("w-full caption-bottom text-sm",l),...n})})}function St({className:l,...n}){return e.jsx("thead",{"data-slot":"table-header",className:ce("[&_tr]:border-b",l),...n})}function Dt({className:l,...n}){return e.jsx("tbody",{"data-slot":"table-body",className:ce("[&_tr:last-child]:border-0",l),...n})}function Ds({className:l,...n}){return e.jsx("tr",{"data-slot":"table-row",className:ce("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",l),...n})}function De({className:l,...n}){return e.jsx("th",{"data-slot":"table-head",className:ce("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",l),...n})}function Ie({className:l,...n}){return e.jsx("td",{"data-slot":"table-cell",className:ce("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",l),...n})}function Is({...l}){return e.jsx(et,{"data-slot":"alert-dialog",...l})}function Rs({...l}){return e.jsx(st,{"data-slot":"alert-dialog-trigger",...l})}function It({...l}){return e.jsx(ct,{"data-slot":"alert-dialog-portal",...l})}function Rt({className:l,...n}){return e.jsx(it,{"data-slot":"alert-dialog-overlay",className:ce("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",l),...n})}function As({className:l,...n}){return e.jsxs(It,{children:[e.jsx(Rt,{}),e.jsx(tt,{"data-slot":"alert-dialog-content",className:ce("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",l),...n})]})}function Ps({className:l,...n}){return e.jsx("div",{"data-slot":"alert-dialog-header",className:ce("flex flex-col gap-2 text-center sm:text-left",l),...n})}function Es({className:l,...n}){return e.jsx("div",{"data-slot":"alert-dialog-footer",className:ce("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",l),...n})}function $s({className:l,...n}){return e.jsx(rt,{"data-slot":"alert-dialog-title",className:ce("text-lg font-semibold",l),...n})}function Os({className:l,...n}){return e.jsx(at,{"data-slot":"alert-dialog-description",className:ce("text-muted-foreground text-sm",l),...n})}function Ms({className:l,...n}){return e.jsx(lt,{className:ce(Ks(),l),...n})}function Fs({className:l,...n}){return e.jsx(nt,{className:ce(Ks({variant:"outline"}),l),...n})}const At=({initialLimit:l=20,autoFetch:n=!0,initialFilters:p={}}={})=>{const[_,N]=c.useState([]),[G,S]=c.useState(!1),[U,ne]=c.useState(null),[V,H]=c.useState(!0),[W,q]=c.useState({limit:l,skip:0,total:0}),[y,b]=c.useState({neId:"",cellId:"",startDate:null,endDate:null,status:"",...p}),x=c.useCallback((T,se={})=>{console.log(`[useAnalysisResults] ${T}`,se)},[]),Z=c.useCallback((T,se)=>{console.error(`[useAnalysisResults] ${T}`,se)},[]),E=c.useRef(null),Q=c.useRef(null),ee=c.useRef(!0),A=c.useRef(!1),a=c.useCallback(async({limit:T=W.limit,skip:se=0,append:ie=!1,showToast:g=!0}={})=>{var D,O,X,K,oe,me,Oe,ue,Ee,Me,Te,Ke,ze;try{if(!ee.current)return x("ì»´í¬ë„ŒíŠ¸ê°€ ì–¸ë§ˆìš´íŠ¸ë˜ì–´ API ìš”ì²­ì„ ê±´ë„ˆëœë‹ˆë‹¤"),[];if(A.current)return x("ì´ë¯¸ ìš”ì²­ ì¤‘ì´ë¯€ë¡œ ìƒˆ ìš”ì²­ì„ ê±´ë„ˆëœë‹ˆë‹¤"),[];A.current=!0,x("ìš”ì²­ ìƒíƒœ: ì‹œì‘"),Q.current&&(x("ì´ì „ ìš”ì²­ ì·¨ì†Œ ì‹œë„"),Q.current.abort()),Q.current=new AbortController,x("ìƒˆë¡œìš´ AbortController ìƒì„±"),S(!0),ne(null),x("ë¶„ì„ ê²°ê³¼ ì¡°íšŒ ì‹œì‘",{limit:T,skip:se,filters:y});const j={limit:T,skip:se};(D=y.neId)!=null&&D.trim()&&(j.ne_id=y.neId.trim()),(O=y.cellId)!=null&&O.trim()&&(j.cell_id=y.cellId.trim()),y.startDate&&(j.date_from=y.startDate),y.endDate&&(j.date_to=y.endDate),(X=y.status)!=null&&X.trim()&&(j.status=y.status.trim());const ve=await fs.get("/api/analysis/results",{params:j,signal:Q.current.signal});x("ë¶„ì„ ê²°ê³¼ ì¡°íšŒ ì„±ê³µ",{resultCount:((oe=(K=ve.data)==null?void 0:K.items)==null?void 0:oe.length)||0,total:((me=ve.data)==null?void 0:me.total)||0,totalRequested:T});const _e=(((Oe=ve.data)==null?void 0:Oe.items)||[]).filter(de=>((de==null?void 0:de.analysis_type)||(de==null?void 0:de.analysisType))==="llm_analysis");return N(ie?de=>[...de,..._e]:_e),q(de=>{var Ge;return{...de,skip:ie?de.skip+_e.length:se+_e.length,total:((Ge=ve.data)==null?void 0:Ge.total)||0}}),H(((ue=ve.data)==null?void 0:ue.has_next)||!1),g&&!ie&&xe.success(`${_e.length}ê°œì˜ ë¶„ì„ ê²°ê³¼ë¥¼ ë¶ˆëŸ¬ì™”ìŠµë‹ˆë‹¤.`),_e}catch(j){if(x("API ì˜¤ë¥˜ ìƒì„¸ ì •ë³´",{name:j.name,code:j.code,message:j.message,stack:j.stack,isCancel:Ye.isCancel?Ye.isCancel(j):"axios.isCancel not available"}),j.name==="AbortError"||j.code==="ERR_CANCELED"||(Ee=j.message)!=null&&Ee.toLowerCase().includes("canceled")||(Me=j.message)!=null&&Me.toLowerCase().includes("cancel")||Ye.isCancel&&Ye.isCancel(j))return x("API ìš”ì²­ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤",{reason:j.message}),A.current=!1,[];const ve=((ze=(Ke=(Te=j==null?void 0:j.response)==null?void 0:Te.data)==null?void 0:Ke.error)==null?void 0:ze.message)||(j==null?void 0:j.message)||"ë¶„ì„ ê²°ê³¼ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.";return Z("ë¶„ì„ ê²°ê³¼ ì¡°íšŒ ì‹¤íŒ¨",j),ne(ve),g&&xe.error(`ë°ì´í„° ì¡°íšŒ ì‹¤íŒ¨: ${ve}`),[]}finally{S(!1),A.current=!1,x("ìš”ì²­ ìƒíƒœ: ì™„ë£Œ")}},[W.limit,JSON.stringify(y),x,Z]),C=c.useCallback((T,se=1e3)=>{if(x("í•„í„° ì—…ë°ì´íŠ¸",{ì´ì „:y,ìƒˆë¡œìš´:T}),!ee.current){x("ì»´í¬ë„ŒíŠ¸ ì–¸ë§ˆìš´íŠ¸ ìƒíƒœì—ì„œ í•„í„° ì—…ë°ì´íŠ¸ ë¬´ì‹œ");return}E.current&&clearTimeout(E.current),E.current=setTimeout(()=>{if(!ee.current){x("ë””ë°”ìš´ìŠ¤ ì‹¤í–‰ ì‹œì ì— ì»´í¬ë„ŒíŠ¸ê°€ ì–¸ë§ˆìš´íŠ¸ë¨");return}b(ie=>({...ie,...T})),q(ie=>({...ie,skip:0})),x("í•„í„° ì—…ë°ì´íŠ¸ ì™„ë£Œ",{ì ìš©ëœí•„í„°:{...y,...T}})},se)},[y,x]),P=c.useCallback(()=>{x("í•„í„° ì´ˆê¸°í™”"),b({neId:"",cellId:"",startDate:null,endDate:null,status:""}),q(T=>({...T,skip:0}))},[x]),$=c.useCallback(async()=>{if(G||!V){x("ì¶”ê°€ ë¡œë”© ê±´ë„ˆëœ€",{loading:G,hasMore:V});return}x("ì¶”ê°€ ê²°ê³¼ ë¡œë”© ì‹œì‘"),await a({skip:W.skip,append:!0,showToast:!1})},[G,V,a,W.skip,x]),ke=c.useCallback(async()=>{x("ë°ì´í„° ìƒˆë¡œê³ ì¹¨ ì‹œì‘"),q(T=>({...T,skip:0})),await a({skip:0,append:!1})},[a,x]),fe=c.useCallback(async T=>{var se,ie,g;try{x("ë¶„ì„ ê²°ê³¼ ì‚­ì œ ì‹œì‘",{resultId:T}),await fs.delete(`/api/analysis/results/${T}`),N(D=>D.filter(O=>O.id!==T)),x("ë¶„ì„ ê²°ê³¼ ì‚­ì œ ì„±ê³µ",{resultId:T}),xe.success("ë¶„ì„ ê²°ê³¼ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.")}catch(D){const O=((g=(ie=(se=D==null?void 0:D.response)==null?void 0:se.data)==null?void 0:ie.error)==null?void 0:g.message)||(D==null?void 0:D.message)||"ë¶„ì„ ê²°ê³¼ ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.";Z("ë¶„ì„ ê²°ê³¼ ì‚­ì œ ì‹¤íŒ¨",D),xe.error(`ì‚­ì œ ì‹¤íŒ¨: ${O}`)}},[x,Z]);c.useEffect(()=>{n&&ee.current&&(x("ì»´í¬ë„ŒíŠ¸ ë§ˆìš´íŠ¸ - ìë™ ë°ì´í„° ì¡°íšŒ ì‹œì‘"),a({skip:0,append:!1,showToast:!1}))},[n,x,a]),c.useEffect(()=>{n&&ee.current&&(x("í•„í„° ë³€ê²½ ê°ì§€ - ë°ì´í„° ì¬ì¡°íšŒ",{filters:JSON.stringify(y)}),a({skip:0,append:!1,showToast:!1}))},[n,JSON.stringify(y),x,a]);const Ae=c.useMemo(()=>!G&&_.length===0,[G,_.length]),Ne=c.useMemo(()=>Object.values(y).some(T=>T!=null&&T!==""),[y]),Pe=c.useMemo(()=>_.length,[_.length]),Ce=c.useMemo(()=>({resultCount:Pe,loading:G,hasMore:V,isEmpty:Ae,isFiltered:Ne,pagination:W,filters:y,error:U}),[Pe,G,V,Ae,Ne,W,y,U]);return c.useEffect(()=>{},[Ce]),c.useEffect(()=>()=>{ee.current=!1,A.current=!1,E.current&&clearTimeout(E.current),Q.current&&Q.current.abort()},[]),{results:_,loading:G,error:U,isEmpty:Ae,hasMore:V,isFiltered:Ne,resultCount:Pe,pagination:W,filters:y,updateFilters:C,clearFilters:P,fetchResults:a,refresh:ke,loadMore:$,deleteResult:fe,debugInfo:Ce}},Pt=({filters:l={},onFilterChange:n,onClearFilters:p,isCollapsed:_=!1,onToggleCollapse:N,showActiveCount:G=!0})=>{const S=c.useCallback((a,C={})=>{console.log(`[ResultFilter] ${a}`,C)},[]),{neId:U="",cellId:ne="",startDate:V=null,endDate:H=null,status:W=""}=l,q={...U&&{"NE ID":U},...ne&&{"Cell ID":ne},...V&&{ì‹œì‘ì¼:new Date(V).toLocaleDateString("ko-KR")},...H&&{ì¢…ë£Œì¼:new Date(H).toLocaleDateString("ko-KR")},...W&&{ìƒíƒœ:W}},y=Object.keys(q).length,b=y>0,x=c.useCallback((a,C)=>{S("í•„í„° ë³€ê²½",{key:a,value:C}),n&&n(a,C)},[n,S]),Z=c.useCallback(a=>{S("ê°œë³„ í•„í„° ì´ˆê¸°í™”",{key:a}),x(a,a==="startDate"||a==="endDate"?null:"")},[x,S]),E=c.useCallback(()=>{S("ì „ì²´ í•„í„° ì´ˆê¸°í™”"),p&&p()},[p,S]),Q=c.useCallback(a=>{if(!a)return"";try{return new Date(a).toISOString().split("T")[0]}catch{return""}},[]),ee=c.useCallback(a=>{if(!a)return null;try{return new Date(a).toISOString()}catch{return null}},[]),A=c.useCallback(()=>{S("í•„í„° íŒ¨ë„ í† ê¸€",{isCollapsed:!_}),N&&N()},[_,N,S]);return e.jsxs(pe,{className:"w-full",children:[e.jsxs(we,{className:"pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(ye,{className:"text-lg flex items-center gap-2",children:[e.jsx(ds,{className:"h-5 w-5"}),"í•„í„°"]}),G&&b&&e.jsxs(Y,{variant:"secondary",className:"text-xs",children:[y,"ê°œ í™œì„±"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[b&&e.jsxs(F,{variant:"ghost",size:"sm",onClick:E,className:"text-destructive hover:text-destructive",children:[e.jsx(Re,{className:"h-4 w-4 mr-1"}),"ì „ì²´ ì´ˆê¸°í™”"]}),e.jsx(F,{variant:"ghost",size:"sm",onClick:A,children:_?e.jsx(ms,{className:"h-4 w-4"}):e.jsx(ht,{className:"h-4 w-4"})})]})]}),b&&!_&&e.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:Object.entries(q).map(([a,C])=>e.jsxs(Y,{variant:"outline",className:"flex items-center gap-1 pr-1",children:[e.jsxs("span",{className:"text-xs",children:[a,": ",C]}),e.jsx(F,{variant:"ghost",size:"sm",className:"h-4 w-4 p-0 hover:bg-destructive hover:text-destructive-foreground",onClick:()=>{const $={"NE ID":"neId","Cell ID":"cellId",ì‹œì‘ì¼:"startDate",ì¢…ë£Œì¼:"endDate",ìƒíƒœ:"status"}[a];$&&Z($)},children:e.jsx(Re,{className:"h-3 w-3"})})]},a))})]}),!_&&e.jsxs(je,{className:"pt-0",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(We,{htmlFor:"filter-ne",className:"flex items-center gap-2",children:[e.jsx(xt,{className:"h-4 w-4"}),"NE ID"]}),e.jsxs("div",{className:"relative",children:[e.jsx(Be,{id:"filter-ne",placeholder:"NE ID ê²€ìƒ‰...",value:U,onChange:a=>x("neId",a.target.value),className:"pr-8"}),U&&e.jsx(F,{variant:"ghost",size:"sm",className:"absolute right-1 top-1/2 -translate-y-1/2 h-6 w-6 p-0",onClick:()=>Z("neId"),children:e.jsx(Re,{className:"h-3 w-3"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(We,{htmlFor:"filter-cell",className:"flex items-center gap-2",children:[e.jsx(ut,{className:"h-4 w-4"}),"Cell ID"]}),e.jsxs("div",{className:"relative",children:[e.jsx(Be,{id:"filter-cell",placeholder:"Cell ID ê²€ìƒ‰...",value:ne,onChange:a=>x("cellId",a.target.value),className:"pr-8"}),ne&&e.jsx(F,{variant:"ghost",size:"sm",className:"absolute right-1 top-1/2 -translate-y-1/2 h-6 w-6 p-0",onClick:()=>Z("cellId"),children:e.jsx(Re,{className:"h-3 w-3"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(We,{htmlFor:"filter-start",className:"flex items-center gap-2",children:[e.jsx(hs,{className:"h-4 w-4"}),"ì‹œì‘ ë‚ ì§œ"]}),e.jsxs("div",{className:"relative",children:[e.jsx(Be,{id:"filter-start",type:"date",value:Q(V),onChange:a=>x("startDate",ee(a.target.value)),className:"pr-8"}),V&&e.jsx(F,{variant:"ghost",size:"sm",className:"absolute right-1 top-1/2 -translate-y-1/2 h-6 w-6 p-0",onClick:()=>Z("startDate"),children:e.jsx(Re,{className:"h-3 w-3"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(We,{htmlFor:"filter-end",className:"flex items-center gap-2",children:[e.jsx(hs,{className:"h-4 w-4"}),"ì¢…ë£Œ ë‚ ì§œ"]}),e.jsxs("div",{className:"relative",children:[e.jsx(Be,{id:"filter-end",type:"date",value:Q(H),onChange:a=>x("endDate",ee(a.target.value)),className:"pr-8"}),H&&e.jsx(F,{variant:"ghost",size:"sm",className:"absolute right-1 top-1/2 -translate-y-1/2 h-6 w-6 p-0",onClick:()=>Z("endDate"),children:e.jsx(Re,{className:"h-3 w-3"})})]})]})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t",children:[e.jsx(We,{className:"text-sm font-medium mb-3 block",children:"ë¹ ë¥¸ ë‚ ì§œ ì„ íƒ"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:[{label:"ì˜¤ëŠ˜",days:0},{label:"ì–´ì œ",days:1},{label:"ìµœê·¼ 7ì¼",days:7},{label:"ìµœê·¼ 30ì¼",days:30},{label:"ìµœê·¼ 90ì¼",days:90}].map(({label:a,days:C})=>e.jsx(F,{variant:"outline",size:"sm",onClick:()=>{const P=new Date,$=new Date;C===0?($.setHours(0,0,0,0),P.setHours(23,59,59,999)):C===1?($.setDate($.getDate()-1),$.setHours(0,0,0,0),P.setDate(P.getDate()-1),P.setHours(23,59,59,999)):($.setDate($.getDate()-C),$.setHours(0,0,0,0),P.setHours(23,59,59,999)),x("startDate",$.toISOString()),x("endDate",P.toISOString()),S("ë¹ ë¥¸ ë‚ ì§œ ì„ íƒ",{label:a,startDate:$,endDate:P})},children:a},a))})]})]})]})},Et=c.memo(Pt),$t=(l,n,p=null)=>{const N=`[AnalysisSection:${new Date().toISOString()}]`;switch(l){case"info":console.log(`${N} ${n}`,p);break;case"error":console.error(`${N} ${n}`,p);break;case"warn":console.warn(`${N} ${n}`,p);break;case"debug":console.debug(`${N} ${n}`,p);break;default:console.log(`${N} ${n}`,p)}},as=({title:l,defaultOpen:n=!0,actions:p=null,className:_="",children:N,"data-testid":G})=>{$t("debug","ë Œë”ë§",{title:l,defaultOpen:n});const U=`${c.useId()}-panel`,[ne,V]=c.useState(!!n),H=c.useCallback(()=>{V(q=>!q)},[]),W=c.useCallback(q=>{(q.key==="Enter"||q.key===" ")&&(q.preventDefault(),H())},[H]);return e.jsx(ot,{defaultOpen:n,"data-testid":G,children:e.jsxs(pe,{className:ce("w-full",_),children:[e.jsx(we,{className:"border-b dark:border-border/60",children:e.jsxs(ye,{className:"flex items-center justify-between",children:[e.jsx(dt,{className:"text-left w-full focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-blue-500 rounded",role:"button",tabIndex:0,"aria-expanded":ne,"aria-controls":U,onClick:H,onKeyDown:W,children:e.jsxs("span",{className:"inline-flex items-center gap-2",children:[e.jsx("span",{className:"i-lucide-chevron-down mr-1 transition-transform data-[state=open]:rotate-180"}),e.jsx("span",{className:"text-foreground dark:text-foreground",children:l})]})}),p?e.jsx(Qs,{children:p}):null]})}),e.jsx(mt,{id:U,children:e.jsx(je,{className:"py-4 text-foreground/90 dark:text-foreground/90",children:N})})]})})},Ot=(l,n,p=null)=>{const N=`[AnalysisStatusIndicator:${new Date().toISOString()}]`;switch(l){case"info":console.log(`${N} ${n}`,p);break;case"error":console.error(`${N} ${n}`,p);break;case"warn":console.warn(`${N} ${n}`,p);break;case"debug":console.debug(`${N} ${n}`,p);break;default:console.log(`${N} ${n}`,p)}},zs=({status:l,className:n=""})=>{const _={OK:{label:"OK",variant:"outline",className:"border-green-600 text-green-700 dark:border-green-400 dark:text-green-300"},NOK:{label:"NOK",variant:"destructive",className:"dark:text-destructive-foreground"},PARTIAL_OK:{label:"Partial",variant:"secondary",className:"text-amber-800 dark:text-amber-200"}}[l]||{label:String(l||"N/A"),variant:"outline",className:""};return Ot("debug","ìƒíƒœ ë Œë”ë§",{status:l}),e.jsx(Y,{variant:_.variant,className:`${_.className} ${n}`,children:_.label})},qe={ERROR:0,WARNING:1,INFO:2,DEBUG:3},Mt=()=>qe.WARNING,ns=Mt(),ls=(l,n,p=null)=>{const N={timestamp:new Date().toISOString(),level:l,message:n,component:"PreferenceSync"};return p!=null&&(N.data=p),N},cs=(l,n)=>{const p=`ğŸ”„ [${n.timestamp}] ${l.toUpperCase()}:`;switch(l){case"error":console.error(p,n.message,n.data||"");break;case"warning":console.warn(p,n.message,n.data||"");break;case"info":console.info(p,n.message,n.data||"");break;case"debug":console.log(p,n.message,n.data||"");break;default:console.log(p,n.message,n.data||"")}},Ls=(l,n=null)=>{if(ns>=qe.ERROR){const p=ls("error",l,n);cs("error",p),n instanceof Error&&console.trace("Error stack trace:",n)}},Ft=(l,n=null)=>{if(ns>=qe.WARNING){const p=ls("warning",l,n);cs("warning",p)}},Ts=(l,n=null)=>{if(ns>=qe.INFO){const p=ls("info",l,n);cs("info",p)}},Lt=(l,n=null)=>{if(ns>=qe.DEBUG){const p=ls("debug",l,n);cs("debug",p)}};function Gs(){const{settings:l,updateSettings:n}=gs()||{settings:{selectedPegs:[]},updateSettings:()=>{}};try{Lt("usePegPreferences í›… ì´ˆê¸°í™”",{hasSettings:!!l,hasUpdate:typeof n=="function"})}catch{}const p=c.useMemo(()=>Array.isArray(l==null?void 0:l.selectedPegs)?l.selectedPegs:[],[l==null?void 0:l.selectedPegs]);c.useEffect(()=>{try{Ts("PEG ì„ íƒ ëª©ë¡ ë³€ê²½",{count:Array.isArray(p)?p.length:0})}catch{}},[p]);const _=c.useCallback(N=>{if(!Array.isArray(N)){try{Ls("setPreferredPegs ì…ë ¥ì´ ë°°ì—´ì´ ì•„ë‹˜",{received:N})}catch{}return}if(!N.every(S=>typeof S=="string")){try{Ft("setPreferredPegs: ë¬¸ìì—´ ë°°ì—´ì´ ì•„ë‹˜",{pegs:N})}catch{}return}try{n({selectedPegs:N});try{Ts("PEG ì„ íƒ ëª©ë¡ ì—…ë°ì´íŠ¸",{count:N.length})}catch{}}catch(S){try{Ls("PEG ì„ íƒ ëª©ë¡ ì—…ë°ì´íŠ¸ ì‹¤íŒ¨",S)}catch{}}},[n]);return{preferredPegs:p,setPreferredPegs:_}}const Tt=(l,n,p=null)=>{const N=`[PEGAnalysisDisplay:${new Date().toISOString()}]`;console.debug(`${N} ${n}`,p)},Kt=(l,n)=>l==="all"?!0:l==="high"?(n||0)>=8:l==="medium"?(n||0)>=6&&(n||0)<8:l==="low"?(n||0)<6:!0;function zt({results:l=[]}){const{settings:n,updateSettings:p}=gs()||{settings:{pegSearch:"",pegSort:"weight_desc"},updateSettings:()=>{}},{preferredPegs:_,setPreferredPegs:N}=Gs(),[G,S]=c.useState((n==null?void 0:n.pegSearch)||""),[U,ne]=c.useState((n==null?void 0:n.pegSort)||"weight_desc"),[V,H]=c.useState("all"),[W,q]=c.useState("all"),[y,b]=c.useState(0),[x,Z]=c.useState(10),E=c.useMemo(()=>[...(l||[]).filter(P=>{const $=!G||String(P.peg_name).toLowerCase().includes(G.toLowerCase()),ke=Kt(V,P.weight||0),fe=W==="all"?!0:P.trend===W;return $&&ke&&fe})].sort((P,$)=>{switch(U){case"weight_asc":return(P.weight||0)-($.weight||0);case"change_desc":return($.change_percent||0)-(P.change_percent||0);case"change_asc":return(P.change_percent||0)-($.change_percent||0);case"name_asc":return String(P.peg_name).localeCompare(String($.peg_name));case"name_desc":return String($.peg_name).localeCompare(String(P.peg_name));case"weight_desc":default:return($.weight||0)-(P.weight||0)}}),[l,G,V,W,U]),Q=Math.max(1,Math.ceil(E.length/x)),ee=c.useMemo(()=>{const a=y*x;return E.slice(a,a+x)},[E,y,x]);if(Tt("debug","render",{total:l==null?void 0:l.length,filtered:E.length,page:y}),!Array.isArray(l)||l.length===0)return e.jsx("div",{className:"text-center text-muted-foreground",children:"PEG ë¹„êµ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤."});const A=E.map(a=>a.peg_name);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center p-3 bg-blue-50 dark:bg-blue-950/40 rounded-lg",children:[e.jsx("div",{className:"text-lg font-bold text-blue-600 dark:text-blue-300",children:l.length}),e.jsx("div",{className:"text-xs text-muted-foreground dark:text-muted-foreground/80",children:"ì´ PEG ìˆ˜"})]}),e.jsxs("div",{className:"text-center p-3 bg-green-50 dark:bg-green-950/40 rounded-lg",children:[e.jsx("div",{className:"text-lg font-bold text-green-600 dark:text-green-300",children:l.filter(a=>a.trend==="up").length}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"ê°œì„  PEG"})]}),e.jsxs("div",{className:"text-center p-3 bg-red-50 dark:bg-red-950/40 rounded-lg",children:[e.jsx("div",{className:"text-lg font-bold text-red-600 dark:text-red-300",children:l.filter(a=>a.trend==="down").length}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"í•˜ë½ PEG"})]}),e.jsxs("div",{className:"text-center p-3 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[e.jsx("div",{className:"text-lg font-bold text-gray-600 dark:text-gray-300",children:l.filter(a=>a.trend==="stable").length}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"ì•ˆì • PEG"})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 justify-between px-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx(xs,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(Be,{placeholder:"PEG ì´ë¦„ ê²€ìƒ‰...",value:G,onChange:a=>{const C=a.target.value;S(C),p({pegSearch:C}),b(0)},className:"pl-8"})]}),e.jsxs(es,{value:V,onValueChange:a=>{H(a),b(0)},children:[e.jsx(ss,{className:"w-[140px]",children:e.jsx(ts,{placeholder:"ê°€ì¤‘ì¹˜"})}),e.jsxs(rs,{children:[e.jsx(ae,{value:"all",children:"ê°€ì¤‘ì¹˜ ì „ì²´"}),e.jsx(ae,{value:"high",children:"ë†’ìŒ(â‰¥8)"}),e.jsx(ae,{value:"medium",children:"ì¤‘ê°„(6~7.9)"}),e.jsx(ae,{value:"low",children:"ë‚®ìŒ(<6)"})]})]}),e.jsxs(es,{value:W,onValueChange:a=>{q(a),b(0)},children:[e.jsx(ss,{className:"w-[140px]",children:e.jsx(ts,{placeholder:"íŠ¸ë Œë“œ"})}),e.jsxs(rs,{children:[e.jsx(ae,{value:"all",children:"íŠ¸ë Œë“œ ì „ì²´"}),e.jsx(ae,{value:"up",children:"ê°œì„ "}),e.jsx(ae,{value:"down",children:"í•˜ë½"}),e.jsx(ae,{value:"stable",children:"ì•ˆì •"})]})]}),e.jsxs(es,{value:U,onValueChange:a=>{ne(a),p({pegSort:a}),b(0)},children:[e.jsx(ss,{className:"w-[165px]",children:e.jsx(ts,{placeholder:"ì •ë ¬"})}),e.jsxs(rs,{children:[e.jsx(ae,{value:"weight_desc",children:"ê°€ì¤‘ì¹˜ â†“"}),e.jsx(ae,{value:"weight_asc",children:"ê°€ì¤‘ì¹˜ â†‘"}),e.jsx(ae,{value:"change_desc",children:"ë³€í™”ìœ¨ â†“"}),e.jsx(ae,{value:"change_asc",children:"ë³€í™”ìœ¨ â†‘"}),e.jsx(ae,{value:"name_asc",children:"ì´ë¦„ Aâ†’Z"}),e.jsx(ae,{value:"name_desc",children:"ì´ë¦„ Zâ†’A"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(Y,{variant:"outline",className:"text-xs",children:["ì„ íƒ ",_.length," / ì´ ",l.length]}),e.jsx(F,{variant:"outline",size:"sm",onClick:()=>N(Array.from(new Set([..._||[],...A]))),children:"ì„ íƒ ëª¨ë‘"}),e.jsx(F,{variant:"ghost",size:"sm",onClick:()=>N([]),children:"ì„ íƒ í•´ì œ"}),e.jsxs(es,{value:String(x),onValueChange:a=>{Z(parseInt(a)),b(0)},children:[e.jsx(ss,{className:"w-[110px]",children:e.jsx(ts,{placeholder:"í˜ì´ì§€ í¬ê¸°"})}),e.jsxs(rs,{children:[e.jsx(ae,{value:"10",children:"10ê°œ"}),e.jsx(ae,{value:"20",children:"20ê°œ"}),e.jsx(ae,{value:"50",children:"50ê°œ"})]})]}),e.jsx(F,{variant:"outline",size:"sm",onClick:()=>b(Math.max(0,y-1)),disabled:y===0,children:e.jsx(gt,{className:"h-4 w-4"})}),e.jsxs("span",{className:"text-sm",children:[y+1," / ",Q||1]}),e.jsx(F,{variant:"outline",size:"sm",onClick:()=>b(Math.min(Q-1,y+1)),disabled:y>=Q-1,children:"â–¶"})]})]}),e.jsx("div",{className:"border rounded-lg overflow-hidden",children:e.jsx("div",{className:"max-h-96 overflow-y-auto overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-muted/50 dark:bg-muted/20 sticky top-0",children:e.jsxs("tr",{className:"text-left text-sm font-medium",children:[e.jsx("th",{scope:"col",className:"p-3",children:"PEG ì´ë¦„"}),e.jsx("th",{scope:"col",className:"p-3 text-center",children:"ì„ íƒ"}),e.jsx("th",{scope:"col",className:"p-3 text-center",children:"ê°€ì¤‘ì¹˜"}),e.jsx("th",{scope:"col",className:"p-3 text-center",children:"N-1 í‰ê· "}),e.jsx("th",{scope:"col",className:"p-3 text-center",children:"N í‰ê· "}),e.jsx("th",{scope:"col",className:"p-3 text-center",children:"N-1 RSD"}),e.jsx("th",{scope:"col",className:"p-3 text-center",children:"N RSD"}),e.jsx("th",{scope:"col",className:"p-3 text-center",children:"ë³€í™”ìœ¨"}),e.jsx("th",{scope:"col",className:"p-3 text-center",children:"íŠ¸ë Œë“œ"}),e.jsx("th",{scope:"col",className:"p-3 text-center",children:"ìƒíƒœ"})]})}),e.jsx("tbody",{children:ee.map((a,C)=>e.jsxs("tr",{className:"border-t hover:bg-muted/30",children:[e.jsx("td",{className:"p-3 font-medium",children:a.peg_name}),e.jsx("td",{className:"p-3 text-center",children:e.jsx("input",{type:"checkbox",checked:_.includes(a.peg_name),"aria-label":`${a.peg_name} ì„ íƒ`,onChange:P=>{const $=P.target.checked?Array.from(new Set([..._||[],a.peg_name])):_.filter(ke=>ke!==a.peg_name);N($)}})}),e.jsx("td",{className:"p-3 text-center",children:e.jsx(Y,{variant:"outline",children:a.weight})}),e.jsx("td",{className:"p-3 text-center font-mono",children:a.n1_avg.toFixed(2)}),e.jsx("td",{className:"p-3 text-center font-mono",children:a.n_avg.toFixed(2)}),e.jsxs("td",{className:"p-3 text-center font-mono",children:[a.n1_rsd.toFixed(1),"%"]}),e.jsxs("td",{className:"p-3 text-center font-mono",children:[a.n_rsd.toFixed(1),"%"]}),e.jsx("td",{className:"p-3 text-center",children:e.jsxs(Y,{variant:a.significance==="high"?"destructive":a.significance==="medium"?"secondary":"outline",className:a.significance==="high"?"":a.significance==="medium"?"text-slate-800":"text-slate-700 border-slate-400",children:[a.change_percent>0?"+":"",a.change_percent.toFixed(1),"%"]})}),e.jsx("td",{className:"p-3 text-center",children:e.jsxs(Y,{variant:a.trend==="up"?"default":a.trend==="down"?"destructive":"secondary",children:[a.trend==="up"?"ğŸ“ˆ":a.trend==="down"?"ğŸ“‰":"â¡ï¸",a.trend==="up"?"ê°œì„ ":a.trend==="down"?"í•˜ë½":"ì•ˆì •"]})}),e.jsx("td",{className:"p-3 text-center",children:(()=>{const P=a.trend==="up"?"OK":a.trend==="down"?"NOK":"PARTIAL_OK";return e.jsx(zs,{status:P})})()})]},C))})]})})})]})}const Gt=({isOpen:l,onClose:n,resultIds:p=[],mode:_="single"})=>{const[N,G]=c.useState([]),[S,U]=c.useState(!1),[ne,V]=c.useState(null),[H,W]=c.useState(!1),[q,y]=c.useState("absent"),[b,x]=c.useState(null),[Z,E]=c.useState(null),[Q,ee]=c.useState(!1),[A,a]=c.useState(null),[C,P]=c.useState({isOpen:!1,algorithm:null});c.useEffect(()=>{const s=t=>{t.key==="F11"?(t.preventDefault(),W(r=>!r)):t.key==="Escape"&&H&&W(!1)};if(l)return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[l,H]);const[$,ke]=c.useState(0),[fe,Ae]=c.useState(10),[Ne,Pe]=c.useState((O==null?void 0:O.pegSearch)||""),[Ce,T]=c.useState("all"),[se,ie]=c.useState("all"),[g,D]=c.useState((O==null?void 0:O.pegSort)||"weight_desc"),{settings:O}=gs()||{settings:{pegSearch:"",pegSort:"weight_desc"}};Gs();const[X]=c.useState(50),K=_==="compare"&&p.length>1;_==="single"&&p.length;const oe=async s=>{var i;U(!0),V(null),ue.current&&(console.log("â¹ï¸ ì´ì „ ìš”ì²­ ì·¨ì†Œ"),ue.current.abort());const t=new AbortController;ue.current=t;const r=t.signal;try{console.log("ğŸ“Š ë¶„ì„ ê²°ê³¼ ìƒì„¸ ì •ë³´ ìš”ì²­:",s);const d=s.filter(u=>{if(!u||typeof u!="string"&&typeof u!="number")return console.warn("âš ï¸ ì˜ëª»ëœ ID í˜•ì‹ ê°ì§€:",u,typeof u),!1;const k=String(u).trim();return!k||k==="undefined"||k==="null"?(console.warn("âš ï¸ ë¹ˆ ID ê°ì§€:",u),!1):/^[a-zA-Z0-9_-]+$/.test(k)&&k.length>0&&k.length<=100?!0:(console.warn("âš ï¸ ì˜ëª»ëœ ID í˜•ì‹:",k),!1)}).map(u=>String(u).trim());if(d.length===0)throw new Error("ìœ íš¨í•œ ê²°ê³¼ IDê°€ ì—†ìŠµë‹ˆë‹¤.");d.length!==s.length&&console.warn(`âš ï¸ ${s.length-d.length}ê°œì˜ ì˜ëª»ëœ IDê°€ ì œê±°ë˜ì—ˆìŠµë‹ˆë‹¤.`),console.log("ğŸ“Š ìœ íš¨í•œ ID ëª©ë¡:",d);const m=[],h=Math.min(X,3);for(let u=0;u<d.length;u+=h)m.push(d.slice(u,u+h));console.log(`ğŸ“Š ì²­í¬ ì²˜ë¦¬ ì •ë³´: ì´ ${d.length}ê°œ í•­ëª©ì„ ${m.length}ê°œ ì²­í¬ë¡œ ë¶„í•  (ì²­í¬ë‹¹ ìµœëŒ€ ${h}ê°œ)`);let o=[];for(const u of m){const k=u.map(async v=>{var I,R,B,re,L,le,$e,f,M,Se,ge,Qe,Xe,ps,js;try{if(r.aborted)throw new Error("ìš”ì²­ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤");let w=0;const he=2;let be=null;for(;w<=he;)try{console.log(`ğŸŒ API ìš”ì²­(getDetailedResult): ${v}`);const J=await Ys(v);if(!J)throw new Error("ì„œë²„ì—ì„œ ë¹ˆ ì‘ë‹µì„ ë°˜í™˜í–ˆìŠµë‹ˆë‹¤.");return console.log(`âœ… ê²°ê³¼ ${v} ë¡œë”© ì„±ê³µ (ì‹œë„ ${w+1}/${he+1})`),{...J,id:v}}catch(J){if(be=J,r.aborted)throw new Error("ìš”ì²­ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤");if((J.code==="NETWORK_ERROR"||(I=J.message)!=null&&I.includes("Network Error"))&&(console.warn(`ğŸŒ ë„¤íŠ¸ì›Œí¬ ì—ëŸ¬ - ê²°ê³¼ ${v}:`,J.message),w<he)){w++;const Ve=2e3;console.warn(`âš ï¸ ë„¤íŠ¸ì›Œí¬ ì—ëŸ¬ë¡œ ì¸í•œ ì¬ì‹œë„, ${Ve}ms í›„ ì¬ì‹œë„ (${w}/${he})`),await new Promise(is=>setTimeout(is,Ve));continue}if(((R=J==null?void 0:J.response)==null?void 0:R.status)===500&&w<he){w++;const Ve=Math.min(1e3*Math.pow(2,w-1),5e3);console.warn(`âš ï¸ ê²°ê³¼ ${v} 500 ì—ëŸ¬ ë°œìƒ, ${Ve}ms í›„ ì¬ì‹œë„ (${w}/${he})`),await new Promise(is=>setTimeout(is,Ve));continue}throw((B=J==null?void 0:J.response)==null?void 0:B.status)===404?(console.warn(`âš ï¸ ê²°ê³¼ ${v}ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤ (404)`),new Error(`ë¶„ì„ ê²°ê³¼ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤ (ID: ${v})`)):J}throw be}catch(w){if(r.aborted)return console.log(`â¹ï¸ ê²°ê³¼ ${v} ìš”ì²­ ì·¨ì†Œë¨`),null;const he={id:v,status:(re=w==null?void 0:w.response)==null?void 0:re.status,message:w.message,url:(L=w==null?void 0:w.config)==null?void 0:L.url,method:(le=w==null?void 0:w.config)==null?void 0:le.method,retryAttempts:maxRetries+1,timestamp:new Date().toISOString()};(($e=w==null?void 0:w.response)==null?void 0:$e.status)===500?console.error(`âŒ ê²°ê³¼ ${v} ì„œë²„ ë‚´ë¶€ ì˜¤ë¥˜ (500) - ì¬ì‹œë„ ì‹¤íŒ¨:`,he):((f=w==null?void 0:w.response)==null?void 0:f.status)===404?console.warn(`âš ï¸ ê²°ê³¼ ${v}ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ (404):`,he):((M=w==null?void 0:w.response)==null?void 0:M.status)===400?console.warn(`âš ï¸ ê²°ê³¼ ${v} ì˜ëª»ëœ ìš”ì²­ (400):`,he):w.code==="NETWORK_ERROR"||(Se=w.message)!=null&&Se.includes("Network Error")?console.error(`ğŸŒ ê²°ê³¼ ${v} ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜:`,he):console.error(`âŒ ê²°ê³¼ ${v} ë¡œë”© ì‹¤íŒ¨:`,he);let be="ë¡œë”© ì‹¤íŒ¨",J="unknown_error";return((ge=w==null?void 0:w.response)==null?void 0:ge.status)===500?(be="ì„œë²„ ë‚´ë¶€ ì˜¤ë¥˜ (ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”)",J="server_error"):((Qe=w==null?void 0:w.response)==null?void 0:Qe.status)===404?(be="ë¶„ì„ ê²°ê³¼ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤",J="not_found"):((Xe=w==null?void 0:w.response)==null?void 0:Xe.status)===400?(be="ì˜ëª»ëœ ìš”ì²­ì…ë‹ˆë‹¤",J="bad_request"):w.code==="NETWORK_ERROR"||(ps=w.message)!=null&&ps.includes("Network Error")?(be="ë„¤íŠ¸ì›Œí¬ ì—°ê²° ì˜¤ë¥˜",J="network_error"):(js=w.message)!=null&&js.includes("timeout")?(be="ìš”ì²­ ì‹œê°„ ì´ˆê³¼",J="timeout_error"):(be=w.message||"ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤",J="client_error"),{id:v,error:be,analysisDate:new Date().toISOString(),neId:"-",cellId:"-",status:"error",errorType:J,errorDetails:he}}}),te=(await Promise.all(k)).filter(v=>v!==null);o=[...o,...te],typeof window<"u"&&window.gc&&window.gc(),m.indexOf(u)<m.length-1&&(console.log("â³ ì„œë²„ ë¶€í•˜ ë¶„ì‚°ì„ ìœ„í•´ 200ms ëŒ€ê¸° ì¤‘..."),await new Promise(I=>setTimeout(I,200)))}if(r.aborted)console.log("â¹ï¸ ìš”ì²­ì´ ì·¨ì†Œë˜ì–´ ê²°ê³¼ ì„¤ì •ì„ ê±´ë„ˆëœ€");else{G(o);const u=o.reduce((k,z)=>(z.error?(k.totalErrors++,z.errorType==="server_error"?k.serverErrors++:k.clientErrors++):k.successCount++,k),{totalErrors:0,serverErrors:0,clientErrors:0,successCount:0});console.log("âœ… ë¶„ì„ ê²°ê³¼ ìƒì„¸ ì •ë³´ ë¡œë”© ì™„ë£Œ:",{totalItems:o.length,successCount:u.successCount,errorCount:u.totalErrors,serverErrors:u.serverErrors,clientErrors:u.clientErrors,successRate:`${(u.successCount/o.length*100).toFixed(1)}%`}),u.serverErrors>0&&u.serverErrors/o.length*100>30&&xe.warning(`ì¼ë¶€ ë°ì´í„° ë¡œë”©ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤ (ì„œë²„ ì—ëŸ¬: ${u.serverErrors}ê°œ). ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.`)}if(o.length>0){const u=o[0];console.log("ğŸ“‹ ì²« ë²ˆì§¸ ê²°ê³¼ ìƒì„¸ êµ¬ì¡°:",{id:u.id,hasKpiResults:!!u.kpiResults,hasStats:!!u.stats,kpiResultsType:typeof u.kpiResults,statsType:typeof u.stats,statsIsArray:Array.isArray(u.stats),allKeys:Object.keys(u),kpiResultsKeys:u.kpiResults?Object.keys(u.kpiResults):"N/A",statsLength:((i=u.stats)==null?void 0:i.length)||"N/A"})}}catch(d){if(r.aborted){console.log("â¹ï¸ ìš”ì²­ì´ ì·¨ì†Œë˜ì–´ ì—ëŸ¬ ì²˜ë¦¬ ê±´ë„ˆëœ€");return}console.error("âŒ ë¶„ì„ ê²°ê³¼ ìƒì„¸ ì •ë³´ ë¡œë”© ì‹¤íŒ¨:",d),V(d.message||"ë°ì´í„° ë¡œë”©ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤"),xe.error("ë¶„ì„ ê²°ê³¼ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤")}finally{r.aborted||U(!1)}};c.useCallback((s,t)=>{try{const r=[...s,...t],i=r.slice().sort((B,re)=>B-re),d=r.map(B=>{const re=i.indexOf(B)+1,L=r.filter($e=>$e===B).length,le=i.indexOf(B);return L>1?(le+1+le+L)/2:re}),m=s.length,h=t.length,u=s.reduce((B,re,L)=>{const le=r.indexOf(re);return B+d[le]},0)-m*(m+1)/2,k=m*h-u,z=Math.min(u,k),te=m*h/2,v=Math.sqrt(m*h*(m+h+1)/12),I=(z-te)/v,R=2*(1-Math.abs(I)/Math.sqrt(2*Math.PI)*Math.exp(-I*I/2));return{U:z,zScore:I,pValue:Math.min(R,1),significant:R<.05,effectSize:Math.abs(I)/Math.sqrt(m+h)}}catch(r){return console.error("Mann-Whitney U Test ì˜¤ë¥˜:",r),{error:"í†µê³„ í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨"}}},[]),c.useCallback((s,t)=>{try{const r=s.slice().sort((I,R)=>I-R),i=t.slice().sort((I,R)=>I-R),d=r.length,m=i.length;let h=0,o=0,u=0;const k=[...new Set([...r,...i])].sort((I,R)=>I-R);for(const I of k){for(;o<d&&r[o]<=I;)o++;const R=o/d;for(;u<m&&i[u]<=I;)u++;const B=u/m,re=Math.abs(R-B);re>h&&(h=re)}const z=h,te=z*Math.sqrt(d*m/(d+m)),v=2*Math.exp(-2*te*te);return{D:z,lambda:te,pValue:Math.min(v,1),significant:v<.05,distributionDifference:z>.1?"large":z>.05?"medium":"small"}}catch(r){return console.error("Kolmogorov-Smirnov Test ì˜¤ë¥˜:",r),{error:"ë¶„í¬ í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨"}}},[]);const me=c.useCallback(async s=>{try{console.log("ğŸ§® ë§ˆí• ë¼ë…¸ë¹„ìŠ¤ ê±°ë¦¬ ê³„ì‚° ì‹œì‘ - ë°±ì—”ë“œ API í˜¸ì¶œ",s);const t=await Me({kpiData:s,timestamps:[],periodLabels:[]},{threshold:.1,sampleSize:10,significanceLevel:.05});return console.log("âœ… ë§ˆí• ë¼ë…¸ë¹„ìŠ¤ ê±°ë¦¬ ê³„ì‚° ë° í†µê³„ í…ŒìŠ¤íŠ¸ ì™„ë£Œ (ë°±ì—”ë“œ API)",t),t.success===!1?{error:t.message||"ë°±ì—”ë“œ ë¶„ì„ ì‹¤íŒ¨",timestamp:new Date().toISOString()}:t.data}catch(t){return console.error("âŒ ë§ˆí• ë¼ë…¸ë¹„ìŠ¤ ê±°ë¦¬ ê³„ì‚° ì‹¤íŒ¨ (ë°±ì—”ë“œ API)",t),{error:t.message||"ê³„ì‚° ì¤‘ ì˜¤ë¥˜ ë°œìƒ",timestamp:new Date().toISOString()}}},[]),Oe=c.useCallback(s=>{try{if(console.log("ğŸ“Š PEG ë¹„êµ ê²°ê³¼ ê³„ì‚° ì‹œì‘",s),!(s!=null&&s.stats)||!Array.isArray(s.stats))return null;const t=s.stats,r={};t.forEach(m=>{var o,u,k;const h=m.kpi_name;r[h]||(r[h]={peg_name:h,n1_values:[],n_values:[],weight:((k=(u=(o=s.request_params)==null?void 0:o.peg_definitions)==null?void 0:u[h])==null?void 0:k.weight)||5}),m.period==="N-1"?r[h].n1_values.push(m.avg):m.period==="N"&&r[h].n_values.push(m.avg)});const d=Object.values(r).map(m=>{const h=m.n1_values.length>0?m.n1_values.reduce((v,I)=>v+I,0)/m.n1_values.length:0,o=m.n_values.length>0?m.n_values.reduce((v,I)=>v+I,0)/m.n_values.length:0,u=m.n1_values.length>1?Math.sqrt(m.n1_values.reduce((v,I)=>v+Math.pow(I-h,2),0)/(m.n1_values.length-1))/Math.abs(h)*100:0,k=m.n_values.length>1?Math.sqrt(m.n_values.reduce((v,I)=>v+Math.pow(I-o,2),0)/(m.n_values.length-1))/Math.abs(o)*100:0,z=h!==0?(o-h)/h*100:0,te=z>5?"up":z<-5?"down":"stable";return{...m,n1_avg:h,n_avg:o,n1_rsd:u,n_rsd:k,change_percent:z,trend:te,significance:Math.abs(z)>10?"high":Math.abs(z)>5?"medium":"low"}}).sort((m,h)=>(h.weight||0)-(m.weight||0));return console.log("âœ… PEG ë¹„êµ ê²°ê³¼ ê³„ì‚° ì™„ë£Œ",d),d}catch(t){return console.error("âŒ PEG ë¹„êµ ê²°ê³¼ ê³„ì‚° ì‹¤íŒ¨",t),null}},[]),ue=c.useRef(null),Ee=c.useCallback(()=>{console.log("ğŸ”„ ëª¨ë“  ìƒíƒœ ì´ˆê¸°í™” ì‹œì‘"),ue.current&&(console.log("â¹ï¸ ì´ì „ ìš”ì²­ ì·¨ì†Œ"),ue.current.abort(),ue.current=null),G([]),U(!1),V(null),y("absent"),x(null),E(null),ke(0),Ae(10),Pe(""),T("all"),ie("all"),W(!1),P({isOpen:!1,algorithm:null}),console.log("âœ… ëª¨ë“  ìƒíƒœ ì´ˆê¸°í™” ì™„ë£Œ")},[]);c.useEffect(()=>(l&&p.length>0&&(console.log("ğŸ“Š ìƒˆë¡œìš´ ê²°ê³¼ IDë¡œ ì „í™˜:",p),Ee(),oe(p)),()=>{ue.current&&(console.log("ğŸ§¹ useEffect cleanup: ì´ì „ ìš”ì²­ ì·¨ì†Œ"),ue.current.abort(),ue.current=null)}),[l,p,Ee]);const Me=c.useCallback(async()=>{if(!j.length||!j[0].stats){console.log("ğŸ“Š ë§ˆí• ë¼ë…¸ë¹„ìŠ¤ ë¶„ì„: ë°ì´í„°ê°€ ë¶€ì¡±í•©ë‹ˆë‹¤");return}const s=j[0].id,t=btoa(JSON.stringify(j[0].stats)).slice(0,16);if(b&&b._cacheKey===`${s}-${t}`){console.log("âš¡ ë§ˆí• ë¼ë…¸ë¹„ìŠ¤ ë¶„ì„: ìºì‹œëœ ê²°ê³¼ ì‚¬ìš©");return}try{console.log("ğŸ§® ë§ˆí• ë¼ë…¸ë¹„ìŠ¤ ê±°ë¦¬ ë¶„ì„ ì‹œì‘"),x(null);const r={};(j[0].stats||[]).forEach(h=>{const o=h.kpi_name;r[o]||(r[o]=[]),r[o].push(h.avg)});const d=Object.keys(r).filter(h=>r[h].length>=2);if(d.length===0)throw new Error("ë¶„ì„ ê°€ëŠ¥í•œ KPI ë°ì´í„°ê°€ ë¶€ì¡±í•©ë‹ˆë‹¤.");console.log(`ğŸ“Š ë¶„ì„í•  KPI ìˆ˜: ${d.length}ê°œ`);const m=await me(r);m._cacheKey=`${s}-${t}`,console.log("âœ… ë§ˆí• ë¼ë…¸ë¹„ìŠ¤ ë¶„ì„ ì™„ë£Œ:",m),x(m)}catch(r){console.error("âŒ ë§ˆí• ë¼ë…¸ë¹„ìŠ¤ ë¶„ì„ ì‹¤íŒ¨:",r),x({error:r.message||"ë¶„ì„ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.",timestamp:new Date().toISOString(),_cacheKey:`${s}-${t}`})}},[j,me,b]),Te=c.useCallback(()=>{if(!j.length||!j[0].stats){console.log("ğŸ“Š PEG ë¹„êµ ë¶„ì„: ë°ì´í„°ê°€ ë¶€ì¡±í•©ë‹ˆë‹¤");return}try{console.log("ğŸ“Š PEG ë¹„êµ ë¶„ì„ ì‹œì‘");const s=Oe(j[0]);console.log("âœ… PEG ë¹„êµ ë¶„ì„ ì™„ë£Œ:",s),E(s)}catch(s){console.error("âŒ PEG ë¹„êµ ë¶„ì„ ì‹¤íŒ¨:",s),E(null)}},[j]);c.useEffect(()=>{j.length>0&&!S&&(console.log("ğŸ”¬ ë°ì´í„° ë¡œë”© ì™„ë£Œ, ë¶„ì„ ì‹œì‘"),Me(),Te())},[j,S,Me,Te]),c.useEffect(()=>{l||(console.log("ğŸšª ëª¨ë‹¬ì´ ë‹«í˜€ì„œ ëª¨ë“  ìƒíƒœ ì •ë¦¬"),Ee())},[l,Ee]),c.useEffect(()=>{var t;console.log("ğŸ” ë§ˆí• ë¼ë…¸ë¹„ìŠ¤ ë¶„ì„ ë””ë²„ê¹…:",{resultsLength:N.length,loading:S,processedResults:N.filter(r=>!r.error).length});const s=N.filter(r=>!r.error);if(s.length>0&&!S){const r=s[0];if(console.log("ğŸ“Š ì²« ë²ˆì§¸ ê²°ê³¼ ë°ì´í„° êµ¬ì¡°:",{hasKpiResults:!!(r!=null&&r.kpiResults),hasStats:!!(r!=null&&r.stats),kpiResultsKeys:r!=null&&r.kpiResults?Object.keys(r.kpiResults):[],statsLength:((t=r==null?void 0:r.stats)==null?void 0:t.length)||0,fullResult:r}),r!=null&&r.kpiResults||r!=null&&r.stats){const i=r.kpiResults||r.stats;console.log("ğŸ§® ë§ˆí• ë¼ë…¸ë¹„ìŠ¤ ê³„ì‚°ìš© ë°ì´í„°:",i);try{const d=me(i);console.log("âœ… ë§ˆí• ë¼ë…¸ë¹„ìŠ¤ ê³„ì‚° ê²°ê³¼:",d),x(d)}catch(d){console.error("âŒ ë§ˆí• ë¼ë…¸ë¹„ìŠ¤ ê³„ì‚° ì˜¤ë¥˜:",d),x({error:"ê³„ì‚° ì¤‘ ì˜¤ë¥˜ ë°œìƒ: "+d.message})}}else console.warn("âš ï¸ ë§ˆí• ë¼ë…¸ë¹„ìŠ¤ ê³„ì‚°ì„ ìœ„í•œ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤:",{kpiResults:r==null?void 0:r.kpiResults,stats:r==null?void 0:r.stats}),x({error:"ë¶„ì„ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤"});if(r!=null&&r.stats){const i=Oe(r);E(i)}}else console.log("â³ ë§ˆí• ë¼ë…¸ë¹„ìŠ¤ ë¶„ì„ ëŒ€ê¸° ì¤‘:",{hasResults:s.length>0,isLoading:S})},[N,S,me,Oe]);const Ke=s=>{switch(s==null?void 0:s.toLowerCase()){case"success":return"default";case"error":case"failed":return"destructive";case"warning":return"secondary";case"pending":case"processing":return"outline";default:return"secondary"}},ze=s=>{try{return new Date(s).toLocaleString("ko-KR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",weekday:"short"})}catch{return s||"-"}},j=c.useMemo(()=>N.filter(s=>!s.error),[N]);c.useMemo(()=>{var t,r;return K?(((r=(t=j[0])==null?void 0:t.kpiResults)==null?void 0:r.map(i=>i.name))||[]).map(i=>{const d={name:i};return j.forEach((m,h)=>{var u;const o=(u=m.kpiResults)==null?void 0:u.find(k=>k.name===i);d[`ê²°ê³¼${h+1}`]=parseFloat((o==null?void 0:o.value)||0)}),d}):null},[j,K]),c.useMemo(()=>{var $e;if(K||!j.length||!j[0].stats)return{kpiResults:[],sortedKpiResults:[],filteredResults:[],dataWithTrends:[],trendFilteredResults:[],totalPages:0,paginatedResults:[],data:[],summaryStats:{improved:0,declined:0,stable:0,avgChange:0,weightedAvgChange:0}};const s=j[0],t=s.stats||[],r={};t.forEach(f=>{const M=f.kpi_name;r[M]||(r[M]={peg_name:M,weight:5}),f.period==="N-1"?r[M]["N-1"]=f.avg:f.period==="N"&&(r[M].N=f.avg)});const i=(($e=s.request_params)==null?void 0:$e.peg_definitions)||{};Object.keys(r).forEach(f=>{var M;(M=i[f])!=null&&M.weight&&(r[f].weight=i[f].weight)});const d=Object.values(r).filter(f=>f["N-1"]!==void 0&&f.N!==void 0),m=g,h=[...d].sort((f,M)=>{switch(m){case"weight_asc":return(f.weight||0)-(M.weight||0);case"change_desc":return(M.change_percent||0)-(f.change_percent||0);case"change_asc":return(f.change_percent||0)-(M.change_percent||0);case"name_asc":return String(f.peg_name).localeCompare(String(M.peg_name));case"name_desc":return String(M.peg_name).localeCompare(String(f.peg_name));case"weight_desc":default:return(M.weight||0)-(f.weight||0)}}),o=h.filter(f=>{const M=!Ne||f.peg_name.toLowerCase().includes(Ne.toLowerCase()),Se=f.weight||0;let ge=!0;return Ce==="high"?ge=Se>=8:Ce==="medium"?ge=Se>=6&&Se<8:Ce==="low"&&(ge=Se<6),M&&ge}),u=o.map(f=>{const M=f["N-1"]||0,ge=(f.N||0)-M,Qe=M!==0?ge/M*100:0,Xe=ge>0?"up":ge<0?"down":"stable";return{...f,change:ge,changePercent:Qe,trend:Xe}}),k=u.filter(f=>se==="all"?!0:f.trend===se),z=Math.ceil(k.length/fe),te=k.slice($*fe,($+1)*fe),v=te.map(f=>({name:f.peg_name,"N-1":f["N-1"]||0,N:f.N||0,change:f.change,changePercent:f.changePercent,trend:f.trend,weight:f.weight,unit:"%",peg:f.weight||0})),I=v.filter(f=>f.trend==="up").length,R=v.filter(f=>f.trend==="down").length,B=v.filter(f=>f.trend==="stable").length,re=v.length>0?v.reduce((f,M)=>f+M.change,0)/v.length:0,L=v.length>0?v.reduce((f,M)=>f+M.change*M.weight,0)/v.reduce((f,M)=>f+M.weight,0):0;return{kpiResults:d,sortedKpiResults:h,filteredResults:o,dataWithTrends:u,trendFilteredResults:k,totalPages:z,paginatedResults:te,data:v,summaryStats:{improved:I,declined:R,stable:B,avgChange:re,weightedAvgChange:L}}},[K,j,Ne,Ce,se,$,fe]);const ve=s=>{var r,i,d,m,h,o,u;const t={hasDirectAnalysis:!!(s!=null&&s.analysis),hasDataAnalysis:!!((r=s==null?void 0:s.data)!=null&&r.analysis),hasNestedDataAnalysis:!!((d=(i=s==null?void 0:s.data)==null?void 0:i.data)!=null&&d.analysis),dataKeys:s?Object.keys(s):[],nestedDataKeys:s!=null&&s.data?Object.keys(s.data):[],doubleNestedKeys:(m=s==null?void 0:s.data)!=null&&m.data?Object.keys(s.data.data):[],structureType:"unknown",recommendedPath:""};return(o=(h=s==null?void 0:s.data)==null?void 0:h.data)!=null&&o.analysis?(t.structureType="triple_nested",t.recommendedPath="data.data.analysis"):(u=s==null?void 0:s.data)!=null&&u.analysis?(t.structureType="double_nested",t.recommendedPath="data.analysis"):s!=null&&s.analysis&&(t.structureType="single_level",t.recommendedPath="analysis"),t},Je=s=>{var d,m,h;let t,r,i;return(d=s==null?void 0:s.data)!=null&&d.analysis&&typeof s.data.analysis=="object"&&!Array.isArray(s.data.analysis)?(t=s.data,r=t.analysis,i="data.analysis (Backend í‘œì¤€ êµ¬ì¡° - LLM ê²°ê³¼ ìœ„ì¹˜)",console.log("âœ… ìš°ì„ ìˆœìœ„ 1: data.analysis êµ¬ì¡° ì‚¬ìš© (Backend í‘œì¤€ - LLM ê²°ê³¼ ìœ„ì¹˜)")):s!=null&&s.data&&typeof s.data=="object"&&!Array.isArray(s.data)?s.data.executive_summary!==void 0||s.data.overall_summary!==void 0||s.data.comprehensive_summary!==void 0||s.data.diagnostic_findings!==void 0?(t=s,r=t.data,i="data (Backend í‘œì¤€ êµ¬ì¡° - LLM ê²°ê³¼ ì§ì ‘ ìœ„ì¹˜)",console.log("âœ… ìš°ì„ ìˆœìœ„ 2: data êµ¬ì¡° ì‚¬ìš© (Backend í‘œì¤€ - LLM ê²°ê³¼ ì§ì ‘ ìœ„ì¹˜)")):(t=s,r={},i="data (LLM í•„ë“œ ì—†ìŒ)",console.log("âš ï¸ data êµ¬ì¡°ì— LLM í•„ë“œê°€ ì—†ìŠµë‹ˆë‹¤")):(h=(m=s==null?void 0:s.data)==null?void 0:m.data)!=null&&h.analysis?(t=s.data.data,r=t.analysis,i="data.data.analysis (ê¸°ì¡´ ì¤‘ì²© êµ¬ì¡°)",console.log("âš ï¸ ìš°ì„ ìˆœìœ„ 3: data.data.analysis êµ¬ì¡° ì‚¬ìš© (ì¤‘ì²© êµ¬ì¡°)")):s!=null&&s.analysis?(t=s,r=t.analysis,i="analysis (ì§ì ‘ êµ¬ì¡°)",console.log("ğŸ“‹ ìš°ì„ ìˆœìœ„ 4: analysis ì§ì ‘ êµ¬ì¡° ì‚¬ìš©")):(t=s||{},r={},i="empty (ë°ì´í„° ì—†ìŒ)",console.warn("âŒ ëª¨ë“  ìš°ì„ ìˆœìœ„ ì‹¤íŒ¨: ë¶„ì„ ë°ì´í„°ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤")),{doc:t,analysis:r,dataStructure:i}},_e=s=>{const t={isValid:!1,errors:[],warnings:[]};return s?typeof s!="object"?(t.errors.push("analysisê°€ ê°ì²´ íƒ€ì…ì´ ì•„ë‹™ë‹ˆë‹¤"),t):(s.executive_summary!==void 0&&(typeof s.executive_summary=="string"?t.isValid=!0:t.warnings.push("executive_summaryê°€ ë¬¸ìì—´ íƒ€ì…ì´ ì•„ë‹™ë‹ˆë‹¤")),["overall_summary","comprehensive_summary"].forEach(d=>{s[d]!==void 0&&typeof s[d]!="string"&&t.warnings.push(`${d}ê°€ ë¬¸ìì—´ íƒ€ì…ì´ ì•„ë‹™ë‹ˆë‹¤`)}),["diagnostic_findings","recommended_actions"].forEach(d=>{s[d]===void 0&&t.warnings.push(`ì„ íƒì  í•„ë“œ ${d}ê°€ ì—†ìŠµë‹ˆë‹¤`)}),t.errors.length===0&&(t.isValid=!0),t):(t.errors.push("analysis ê°ì²´ê°€ ì—†ìŠµë‹ˆë‹¤"),t)},de=s=>{let t="ìš”ì•½ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.",r="none";if(!s)return{summaryText:t,selectedField:r};const i=["executive_summary","overall_summary","comprehensive_summary","summary","conclusion","result","description","analysis_summary","key_findings","recommendations","insights","overview"];for(const d of i){const m=s[d];if(m){if(typeof m=="string"&&m.trim()){t=m.trim(),r=d,console.log(`âœ… ${d} í•„ë“œ ì‚¬ìš© (ë¬¸ìì—´)`);break}else if(Array.isArray(m)&&m.length>0){const h=m[0];if(typeof h=="string"&&h.trim()){t=h.trim(),r=`${d}[0]`,console.log(`ğŸ“ ${d} ë°°ì—´ì˜ ì²« ë²ˆì§¸ ìš”ì†Œ ì‚¬ìš©`);break}else if(typeof h=="object"&&h){const o=["text","content","summary","description","message"];for(const u of o)if(h[u]&&typeof h[u]=="string"){t=h[u].trim(),r=`${d}[0].${u}`,console.log(`ğŸ“ ${d}[0].${u} í•„ë“œ ì‚¬ìš©`);break}if(r!=="none")break}}else if(typeof m=="object"){const h=["text","content","summary","description","message"];for(const o of h)if(m[o]&&typeof m[o]=="string"){t=m[o].trim(),r=`${d}.${o}`,console.log(`ğŸ“ ${d}.${o} í•„ë“œ ì‚¬ìš©`);break}if(r!=="none")break}}}return r==="none"&&(console.warn("âš ï¸ ëª¨ë“  ìš”ì•½ í•„ë“œê°€ ë¹„ì–´ìˆê±°ë‚˜ ìœ íš¨í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤"),console.log("ğŸ” ì‚¬ìš© ê°€ëŠ¥í•œ í•„ë“œë“¤:",Object.keys(s))),{summaryText:t,selectedField:r}},Ge=s=>{var v,I;const t=(s==null?void 0:s[0])||{},r=ve(t);console.log("ğŸ” LLM ë¶„ì„ ê²°ê³¼ ë””ë²„ê¹…:",r);const{analysis:i,dataStructure:d}=Je(t),m=_e(i);console.log("ğŸ“Š ë¶„ì„ ê°ì²´ êµ¬ì¡°:",{analysis:i,analysisKeys:Object.keys(i||{}),dataStructure:d,validationResult:m,availableSummaries:{executive_summary:!!(i!=null&&i.executive_summary),overall_summary:!!(i!=null&&i.overall_summary),comprehensive_summary:!!(i!=null&&i.comprehensive_summary)},originalDataKeys:Object.keys(t||{}),hasDataField:"data"in(t||{}),dataFieldKeys:t!=null&&t.data?Object.keys(t.data):[],hasAnalysisInData:((v=t==null?void 0:t.data)==null?void 0:v.analysis)!==void 0,analysisInDataKeys:(I=t==null?void 0:t.data)!=null&&I.analysis?Object.keys(t.data.analysis):[],llmFieldsCheck:{executive_summary:{exists:(i==null?void 0:i.executive_summary)!==void 0,type:typeof(i==null?void 0:i.executive_summary),value:i==null?void 0:i.executive_summary},overall_summary:{exists:(i==null?void 0:i.overall_summary)!==void 0,type:typeof(i==null?void 0:i.overall_summary),value:i==null?void 0:i.overall_summary},comprehensive_summary:{exists:(i==null?void 0:i.comprehensive_summary)!==void 0,type:typeof(i==null?void 0:i.comprehensive_summary),value:i==null?void 0:i.comprehensive_summary}}});const{summaryText:h,selectedField:o}=de(i);console.log("ğŸ“ ìµœì¢… ìš”ì•½ í…ìŠ¤íŠ¸:",{summaryText:(h==null?void 0:h.substring(0,200))+"..."||"ì—†ìŒ",selectedField:o,textLength:(h==null?void 0:h.length)||0,isValid:!!h&&h!=="ìš”ì•½ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤."});const k=(R=>{const B=["diagnostic_findings","key_findings","findings","observations","insights"];for(const re of B){const L=R[re];if(Array.isArray(L)&&L.length>0){if(typeof L[0]=="object"&&L[0])return L;if(typeof L[0]=="string")return L.map(le=>({primary_hypothesis:String(le)}))}}return[]})(i),te=(R=>{const B=["recommended_actions","recommendations","actions","suggestions"];for(const re of B){const L=R[re];if(Array.isArray(L)&&L.length>0)return L.map(le=>le&&typeof le=="object"?le:{priority:"",action:String(le||""),details:""});if(L&&typeof L=="object")return[{priority:L.priority||"",action:L.action||String(L),details:L.details||""}];if(typeof L=="string"&&L.trim())return[{priority:"",action:L.trim(),details:""}]}return[]})(i);return e.jsxs("div",{className:"space-y-4 max-w-full overflow-hidden",children:[e.jsxs(pe,{className:"w-full overflow-hidden",children:[e.jsx(we,{children:e.jsx(ye,{children:"ì¢…í•© ë¶„ì„ ìš”ì•½"})}),e.jsx(je,{className:"w-full overflow-hidden",children:e.jsx("div",{className:"text-sm text-muted-foreground whitespace-pre-wrap break-words w-full",children:h})})]}),k.length>0&&e.jsxs(pe,{className:"w-full overflow-hidden",children:[e.jsx(we,{children:e.jsx(ye,{children:"í•µì‹¬ ê´€ì°° ì‚¬í•­"})}),e.jsx(je,{className:"max-w-full overflow-hidden",children:e.jsx("div",{className:"space-y-3",children:k.map((R,B)=>e.jsxs("div",{className:"space-y-1",children:[R.primary_hypothesis&&e.jsxs("div",{className:"text-sm break-words whitespace-pre-wrap",children:[e.jsxs("span",{className:"font-semibold",children:["ê°€ì„¤ ",B+1,":"]})," ",R.primary_hypothesis]}),R.supporting_evidence&&e.jsxs("div",{className:"text-xs text-muted-foreground break-words whitespace-pre-wrap",children:["ì¦ê±°: ",R.supporting_evidence]}),R.confounding_factors_assessment&&e.jsxs("div",{className:"text-xs text-muted-foreground break-words whitespace-pre-wrap",children:["êµë€ ë³€ìˆ˜ í‰ê°€: ",R.confounding_factors_assessment]})]},B))})})]}),te.length>0&&e.jsxs(pe,{className:"w-full overflow-hidden",children:[e.jsx(we,{children:e.jsx(ye,{children:"ê¶Œì¥ ì¡°ì¹˜"})}),e.jsx(je,{className:"max-w-full overflow-hidden",children:e.jsx("div",{className:"space-y-3 max-w-full overflow-hidden",children:te.map((R,B)=>e.jsxs("div",{className:"flex items-start gap-3 max-w-full overflow-hidden",children:[e.jsx("div",{className:"mt-0.5 flex-shrink-0",children:e.jsx(bt,{className:"h-5 w-5 text-green-500"})}),e.jsxs("div",{className:"flex-1 min-w-0 max-w-full overflow-hidden",children:[e.jsxs("div",{className:"flex items-center gap-2 max-w-full overflow-hidden",children:[R.priority&&e.jsx(Y,{variant:"outline",className:"flex-shrink-0",children:R.priority}),e.jsx("div",{className:"text-sm font-medium break-words whitespace-pre-wrap min-w-0 max-w-full",children:R.action||"-"})]}),R.details&&e.jsx("div",{className:"text-xs text-muted-foreground mt-1 whitespace-pre-wrap break-words max-w-full",children:R.details})]})]},B))})})]})]})},Ws=()=>e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-semibold",children:[j.length,"ê°œ ê²°ê³¼ ë¹„êµ"]}),e.jsx("div",{className:"flex gap-2",children:j.map((s,t)=>e.jsxs(Y,{variant:"outline",className:"gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:`hsl(${t*60}, 70%, 50%)`}}),"ê²°ê³¼ ",t+1]},s.id))})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:j.map((s,t)=>e.jsx(pe,{className:"border-l-4",style:{borderLeftColor:`hsl(${t*60}, 70%, 50%)`},children:e.jsx(je,{className:"pt-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"font-medium",children:["ê²°ê³¼ ",t+1]}),e.jsx(Y,{variant:Ke(s.status),children:s.status})]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:ze(s.analysisDate)}),e.jsxs("div",{className:"text-sm",children:["NE: ",s.neId," | Cell: ",s.cellId]})]})})},s.id))})]}),Hs=s=>e.jsx("div",{className:"space-y-4 max-w-full overflow-hidden",children:e.jsxs(pe,{className:"border-l-4 border-l-blue-500 w-full overflow-hidden",children:[e.jsx(we,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ye,{className:"text-lg",children:"ë¶„ì„ ê²°ê³¼ ìƒì„¸ ì •ë³´"}),e.jsx(Y,{variant:Ke(s.status),children:s.status})]})}),e.jsxs(je,{className:"space-y-4 max-w-full overflow-hidden",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-sm font-medium text-muted-foreground",children:"ë¶„ì„ ë‚ ì§œ"}),e.jsx("div",{className:"text-sm",children:ze(s.analysisDate)})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-sm font-medium text-muted-foreground",children:"NE ID"}),e.jsx("div",{className:"text-sm",children:s.neId})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-sm font-medium text-muted-foreground",children:"Cell ID"}),e.jsx("div",{className:"text-sm",children:s.cellId})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-sm font-medium text-muted-foreground",children:"LLM ëª¨ë¸"}),e.jsx("div",{className:"text-sm",children:s.llmModel||"N/A"})]})]}),(()=>{const{analysis:t}=Je(s),{summaryText:r}=de(t);return typeof r=="string"&&r.trim()&&r!=="ìš”ì•½ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤."?e.jsxs("div",{className:"space-y-2 max-w-full overflow-hidden",children:[e.jsx("div",{className:"text-sm font-medium text-muted-foreground",children:"ë¶„ì„ ê²°ê³¼"}),e.jsx("div",{className:"text-sm bg-muted p-3 rounded-md max-h-48 overflow-y-auto break-words whitespace-pre-wrap w-full",children:r})]}):null})(),(()=>{const{analysis:t}=Je(s);let r=[];return Array.isArray(t==null?void 0:t.recommended_actions)?r=t.recommended_actions:typeof(t==null?void 0:t.recommended_actions)=="string"&&t.recommended_actions.trim()?r=[t.recommended_actions]:Array.isArray(t==null?void 0:t.recommendations)?r=t.recommendations:typeof(t==null?void 0:t.recommendations)=="string"&&t.recommendations.trim()&&(r=[t.recommendations]),r.length?e.jsxs("div",{className:"space-y-2 max-w-full overflow-hidden",children:[e.jsx("div",{className:"text-sm font-medium text-muted-foreground",children:"ê¶Œì¥ ì‚¬í•­"}),e.jsx("div",{className:"space-y-1 max-w-full overflow-hidden",children:r.map((i,d)=>e.jsx("div",{className:"text-sm bg-green-50 dark:bg-green-900/20 p-2 rounded border-l-2 border-l-green-500 break-words whitespace-pre-wrap max-w-full",children:typeof i=="string"?i:JSON.stringify(i)},d))})]}):null})()]})]})}),Bs=()=>e.jsxs(pe,{className:"border-l-4 border-l-purple-500",children:[e.jsxs(we,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(ye,{className:"flex items-center gap-2",children:[e.jsx(os,{className:"h-5 w-5 text-purple-600"}),"Choi ì•Œê³ ë¦¬ì¦˜ íŒì • ê²°ê³¼",A?e.jsx(Y,{variant:"outline",className:"text-purple-600",children:"ì™„ë£Œ"}):Q?e.jsx(Y,{variant:"outline",className:"text-purple-600",children:"ì‹¤í–‰ ì¤‘"}):e.jsx(Y,{variant:"outline",className:"text-purple-600",children:"ëŒ€ê¸°"})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[!Q&&e.jsx(F,{variant:"secondary",size:"sm",onClick:async()=>{var s;try{ee(!0),y("running");const t=j==null?void 0:j[0],r=((t==null?void 0:t.stats)||[]).map(h=>h==null?void 0:h.cell_id).filter(Boolean).slice(0,5),i={input_data:{},cell_ids:r.length?Array.from(new Set(r)):["cell_001"],time_range:{pre_start:new Date(Date.now()-7200*1e3).toISOString(),pre_end:new Date(Date.now()-3600*1e3).toISOString(),post_start:new Date(Date.now()-1800*1e3).toISOString(),post_end:new Date().toISOString()},compare_mode:!0},d=await runChoiAnalysis(i),m=d!=null&&d.kpi_judgement?{overall:d.kpi_judgement.overall,reasons:d.kpi_judgement.reasons||[],by_kpi:d.kpi_judgement.by_kpi||{},warnings:d.processing_warnings||[]}:((s=d==null?void 0:d.peg_analysis)==null?void 0:s.choi_judgement)||null;a(m),y("done")}catch(t){console.error("Choi ë¶„ì„ ì‹¤íŒ¨",t),y("error")}finally{ee(!1)}},className:"text-purple-600 border-purple-200 hover:bg-purple-50",children:A?"ì¬ì‹¤í–‰":"ë¶„ì„ ì‹¤í–‰"}),e.jsx(F,{variant:"ghost",size:"sm",onClick:()=>Ze("choi"),className:"text-purple-600 hover:text-purple-700 hover:bg-purple-50",children:e.jsx(He,{className:"h-4 w-4"})})]})]}),e.jsx(ys,{children:"Choi ì•Œê³ ë¦¬ì¦˜ ë¬¸ì„œ ê¸°ë°˜ì˜ í’ˆì§ˆ íŒì • ê²°ê³¼ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤."})]}),e.jsxs(je,{children:[Q&&e.jsxs("div",{className:"flex items-center justify-center gap-2 py-6",children:[e.jsx(Le,{className:"h-4 w-4 animate-spin"}),e.jsx("p",{className:"text-muted-foreground",children:"ë¶„ì„ ì‹¤í–‰ ì¤‘..."})]}),!Q&&A&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"ì „ì²´ íŒì •"}),e.jsx(Y,{variant:"outline",className:"text-purple-700",children:A.overall||"N/A"})]}),Array.isArray(A.reasons)&&A.reasons.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium mb-2",children:"ì‚¬ìœ "}),e.jsx("ul",{className:"list-disc pl-5 text-sm text-muted-foreground",children:A.reasons.map((s,t)=>e.jsx("li",{children:typeof s=="string"?s:JSON.stringify(s)},t))})]}),A.by_kpi&&Object.keys(A.by_kpi).length>0&&e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left text-muted-foreground",children:[e.jsx("th",{className:"px-2 py-1",children:"KPI"}),e.jsx("th",{className:"px-2 py-1",children:"Status"})]})}),e.jsx("tbody",{children:Object.entries(A.by_kpi).map(([s,t])=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"px-2 py-1 whitespace-nowrap",children:s}),e.jsx("td",{className:"px-2 py-1",children:t&&t.status||"N/A"})]},s))})]})}),Array.isArray(A.warnings)&&A.warnings.length>0&&e.jsxs("div",{className:"text-xs text-yellow-700 bg-yellow-50 border border-yellow-200 rounded p-2",children:["ê²½ê³ : ",A.warnings.join(", ")]})]}),!Q&&!A&&e.jsxs("div",{className:"text-center py-8",children:[e.jsxs("div",{className:"relative mb-4",children:[e.jsx(os,{className:"h-12 w-12 text-purple-400 mx-auto"}),e.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-purple-500 rounded-full animate-pulse"})]}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"ì•Œê³ ë¦¬ì¦˜ ì‹¤í–‰ ëŒ€ê¸°"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"ë²„íŠ¼ì„ ëˆŒëŸ¬ Choi ì•Œê³ ë¦¬ì¦˜ íŒì •ì„ ì‹¤í–‰í•˜ì„¸ìš”."}),e.jsx("div",{className:"bg-purple-50 dark:bg-purple-900/20 border border-purple-200 dark:border-purple-800 rounded-lg p-4",children:e.jsxs("p",{className:"text-purple-800 dark:text-purple-200 text-sm",children:[e.jsx("strong",{children:"í˜„ì¬ ìƒíƒœ:"})," ",q]})})]})]})]}),Us=()=>{var r,i,d,m,h;if(console.log("ğŸ¨ ë§ˆí• ë¼ë…¸ë¹„ìŠ¤ ë Œë”ë§ ìƒíƒœ:",{mahalanobisResult:b,loading:S,resultsLength:N.length}),!b)return e.jsxs(pe,{className:"border-l-4 border-l-orange-500",children:[e.jsx(we,{children:e.jsxs(ye,{className:"flex items-center gap-2",children:[e.jsx(Fe,{className:"h-5 w-5 text-orange-600"}),"ë§ˆí• ë¼ë…¸ë¹„ìŠ¤ ê±°ë¦¬ ë¶„ì„"]})}),e.jsx(je,{children:e.jsx("div",{className:"text-center py-4",children:S?e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(Le,{className:"h-4 w-4 animate-spin"}),e.jsx("p",{className:"text-muted-foreground",children:"ë¶„ì„ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘..."})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-muted-foreground",children:"ë¶„ì„ ë°ì´í„°ë¥¼ ê¸°ë‹¤ë¦¬ëŠ” ì¤‘..."}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["ê²°ê³¼: ",N.length,"ê°œ, ë¡œë”©: ",S?"ì˜ˆ":"ì•„ë‹ˆì˜¤"]})]})})})]});if(b.error)return e.jsxs(pe,{className:"border-l-4 border-l-red-500",children:[e.jsx(we,{children:e.jsxs(ye,{className:"flex items-center gap-2",children:[e.jsx(Fe,{className:"h-5 w-5 text-red-600"}),"ë§ˆí• ë¼ë…¸ë¹„ìŠ¤ ê±°ë¦¬ ë¶„ì„"]})}),e.jsx(je,{children:e.jsxs("div",{className:"text-center py-4",children:[e.jsx(Ue,{className:"h-8 w-8 text-red-500 mx-auto mb-2"}),e.jsx("p",{className:"text-red-600",children:b.error})]})})]});const s=o=>{switch(o){case"critical":return"text-red-600 bg-red-50 border-red-200";case"warning":return"text-orange-600 bg-orange-50 border-orange-200";case"caution":return"text-yellow-600 bg-yellow-50 border-yellow-200";default:return"text-green-600 bg-green-50 border-green-200"}},t=o=>{switch(o){case"critical":return e.jsx(Cs,{className:"h-5 w-5"});case"warning":return e.jsx(Ue,{className:"h-5 w-5"});case"caution":return e.jsx(kt,{className:"h-5 w-5"});default:return e.jsx(yt,{className:"h-5 w-5"})}};return e.jsxs(pe,{className:"border-l-4 border-l-orange-500",children:[e.jsxs(we,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(ye,{className:"flex items-center gap-2",children:[e.jsx(Fe,{className:"h-5 w-5 text-orange-600"}),"ë§ˆí• ë¼ë…¸ë¹„ìŠ¤ ê±°ë¦¬ ë¶„ì„ ê²°ê³¼"]})}),e.jsx(F,{variant:"ghost",size:"sm",onClick:()=>Ze("mahalanobis"),className:"text-orange-600 hover:text-orange-700 hover:bg-orange-50",children:e.jsx(He,{className:"h-4 w-4"})})]}),e.jsx(ys,{children:"1ì°¨ ìŠ¤í¬ë¦¬ë‹: ì¢…í•© ê±´ê°• ìƒíƒœ ì§„ë‹¨ ë° 2ì°¨ ì‹¬ì¸µ ë¶„ì„ ê²°ê³¼"})]}),e.jsxs(je,{className:"space-y-6",children:[e.jsxs("div",{className:`p-4 rounded-lg border ${s(b.alarmLevel)}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[t(b.alarmLevel),e.jsx("span",{className:"font-semibold",children:"ì¢…í•© ê±´ê°• ìƒíƒœ"})]}),e.jsx(Y,{variant:b.alarmLevel==="normal"?"default":"destructive",children:b.alarmLevel==="normal"?"ì •ìƒ":b.alarmLevel==="caution"?"ì£¼ì˜":b.alarmLevel==="warning"?"ê²½ê³ ":"ì‹¬ê°"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"ì´ KPI ìˆ˜:"}),e.jsxs("div",{className:"font-medium",children:[b.totalKpis,"ê°œ"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"ì´ìƒ KPI ìˆ˜:"}),e.jsxs("div",{className:"font-medium",children:[b.abnormalKpis.length,"ê°œ"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"ì´ìƒ ì ìˆ˜:"}),e.jsxs("div",{className:"font-medium",children:[(b.abnormalScore*100).toFixed(1),"%"]})]})]}),e.jsxs("div",{className:"mt-2 text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"íŒì •:"}),e.jsx("span",{className:"ml-1",children:b.analysis.screening.description})]})]}),b.abnormalKpis.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold mb-3 flex items-center gap-2",children:[e.jsx(Cs,{className:"h-4 w-4"}),"ì´ìƒ ê°ì§€ëœ KPI ëª©ë¡"]}),e.jsx("div",{className:"space-y-2",children:b.abnormalKpis.slice(0,5).map((o,u)=>{var k,z;return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/30 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:o.kpiName}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["N-1: ",(k=o.n1Value)==null?void 0:k.toFixed(2)," â†’ N:"," ",(z=o.nValue)==null?void 0:z.toFixed(2)]})]}),e.jsx("div",{className:"text-right",children:e.jsxs(Y,{variant:o.severity==="critical"?"destructive":o.severity==="warning"?"secondary":"outline",children:[(o.changeRate*100).toFixed(1),"%"]})})]},u)})})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsxs("h4",{className:"font-semibold mb-3 flex items-center gap-2",children:[e.jsx(wt,{className:"h-4 w-4"}),"2ì°¨ ì‹¬ì¸µ ë¶„ì„ ê²°ê³¼"]}),((i=(r=b.analysis)==null?void 0:r.drilldown)==null?void 0:i.summary)&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4 p-3 bg-muted/30 rounded-lg",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold text-blue-600",children:b.analysis.drilldown.summary.totalAnalyzed}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"ë¶„ì„ëœ KPI"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold text-green-600",children:b.analysis.drilldown.summary.statisticallySignificant}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"í†µê³„ì  ìœ ì˜ì„±"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold text-orange-600",children:b.analysis.drilldown.summary.highConfidenceFindings}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"ê³ ì‹ ë¢°ë„ ë°œê²¬"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold text-purple-600",children:b.analysis.drilldown.summary.distributionChanges}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"ë¶„í¬ ë³€í™”"})]})]}),((h=(m=(d=b.analysis)==null?void 0:d.drilldown)==null?void 0:m.statisticalAnalysis)==null?void 0:h.length)>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h5",{className:"font-medium text-sm",children:"ê°œë³„ KPI í†µê³„ ë¶„ì„ ê²°ê³¼"}),b.analysis.drilldown.statisticalAnalysis.map((o,u)=>{var k,z,te,v,I,R;return e.jsxs("div",{className:"border rounded-lg p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:o.kpiName}),e.jsx(Y,{variant:o.severity==="critical"?"destructive":o.severity==="warning"?"secondary":"outline",children:o.severity}),e.jsxs(Y,{variant:o.confidence==="high"?"default":o.confidence==="medium"?"secondary":"outline",children:["ì‹ ë¢°ë„: ",o.confidence]})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["ë³€í™”ìœ¨: ",(o.changeRate*100).toFixed(1),"%"]})]}),!o.statisticalTests.error&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h6",{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(Fe,{className:"h-3 w-3"}),"Mann-Whitney U Test"]}),e.jsx(F,{variant:"ghost",size:"sm",onClick:()=>Ze("mann-whitney"),className:"text-blue-600 hover:text-blue-700 hover:bg-blue-50 h-6 w-6 p-0",children:e.jsx(He,{className:"h-3 w-3"})})]}),e.jsxs("div",{className:"text-xs space-y-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"U í†µê³„ëŸ‰:"}),e.jsx("span",{className:"font-mono",children:(k=o.statisticalTests.mannWhitney.U)==null?void 0:k.toFixed(2)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Z-score:"}),e.jsx("span",{className:"font-mono",children:(z=o.statisticalTests.mannWhitney.zScore)==null?void 0:z.toFixed(3)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"p-value:"}),e.jsx("span",{className:`font-mono ${o.statisticalTests.mannWhitney.significant?"text-red-600 font-bold":"text-green-600"}`,children:(te=o.statisticalTests.mannWhitney.pValue)==null?void 0:te.toFixed(4)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"íš¨ê³¼ í¬ê¸°:"}),e.jsx("span",{className:"font-mono",children:(v=o.statisticalTests.mannWhitney.effectSize)==null?void 0:v.toFixed(3)})]})]}),e.jsx("div",{className:`text-xs p-2 rounded ${o.statisticalTests.mannWhitney.significant?"bg-red-50 text-red-700 border border-red-200":"bg-green-50 text-green-700 border border-green-200"}`,children:o.statisticalTests.mannWhitney.interpretation})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h6",{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(us,{className:"h-3 w-3"}),"Kolmogorov-Smirnov Test"]}),e.jsx(F,{variant:"ghost",size:"sm",onClick:()=>Ze("ks-test"),className:"text-green-600 hover:text-green-700 hover:bg-green-50 h-6 w-6 p-0",children:e.jsx(He,{className:"h-3 w-3"})})]}),e.jsxs("div",{className:"text-xs space-y-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"D í†µê³„ëŸ‰:"}),e.jsx("span",{className:"font-mono",children:(I=o.statisticalTests.kolmogorovSmirnov.D)==null?void 0:I.toFixed(4)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"p-value:"}),e.jsx("span",{className:`font-mono ${o.statisticalTests.kolmogorovSmirnov.significant?"text-red-600 font-bold":"text-green-600"}`,children:(R=o.statisticalTests.kolmogorovSmirnov.pValue)==null?void 0:R.toFixed(4)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"ë¶„í¬ ì°¨ì´:"}),e.jsx("span",{className:"font-mono",children:o.statisticalTests.kolmogorovSmirnov.distributionDifference})]})]}),e.jsx("div",{className:`text-xs p-2 rounded ${o.statisticalTests.kolmogorovSmirnov.significant?"bg-red-50 text-red-700 border border-red-200":"bg-green-50 text-green-700 border border-green-200"}`,children:o.statisticalTests.kolmogorovSmirnov.interpretation})]})]}),o.statisticalTests.error&&e.jsx("div",{className:"text-xs p-2 bg-red-50 text-red-700 border border-red-200 rounded",children:o.statisticalTests.error})]},u)})]}),e.jsxs("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx("h6",{className:"text-sm font-medium text-blue-800 mb-2",children:"ë³€í™”ì  íƒì§€ ì•Œê³ ë¦¬ì¦˜"}),e.jsxs("div",{className:"text-xs text-blue-700 space-y-1",children:[e.jsx("div",{children:"â€¢ Cusum ì•Œê³ ë¦¬ì¦˜ì„ í†µí•œ ë³€í™”ì  ìë™ íƒì§€ ì˜ˆì •"}),e.jsx("div",{children:"â€¢ ì •í™•í•œ ë¬¸ì œ ë°œìƒ ì‹œê° íŠ¹ì • ë° ì›ì¸ ë¶„ì„"}),e.jsx("div",{children:"â€¢ ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§ì„ í†µí•œ ì‚¬ì „ ê²½ê³  ì‹œìŠ¤í…œ êµ¬ì¶•"})]})]})]})]})]})},qs=()=>S?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Le,{className:"h-5 w-5 animate-spin text-primary"}),e.jsx("p",{className:"text-muted-foreground dark:text-muted-foreground/80",children:"ë¶„ì„ ê²°ê³¼ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘..."})]}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"bg-card/40 dark:bg-card/20 border rounded-lg p-4",children:[e.jsx("div",{className:"h-5 w-48 bg-accent/60 dark:bg-accent/30 animate-pulse rounded mb-3"}),e.jsx("div",{className:"h-4 w-full bg-accent/60 dark:bg-accent/30 animate-pulse rounded mb-2"}),e.jsx("div",{className:"h-4 w-5/6 bg-accent/60 dark:bg-accent/30 animate-pulse rounded"})]}),e.jsxs("div",{className:"bg-card/40 dark:bg-card/20 border rounded-lg p-4",children:[e.jsx("div",{className:"h-5 w-56 bg-accent/60 dark:bg-accent/30 animate-pulse rounded mb-3"}),e.jsx("div",{className:"h-48 w-full bg-accent/60 dark:bg-accent/30 animate-pulse rounded"})]})]})]}):ne?e.jsx("div",{className:"max-w-xl mx-auto",children:e.jsx("div",{className:"border rounded-lg p-6 bg-background dark:bg-background/60",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Ue,{className:"h-5 w-5 text-destructive mt-0.5"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-semibold",children:"ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:ne}),e.jsx("div",{className:"pt-1",children:e.jsxs(F,{variant:"outline",onClick:()=>oe(p),children:[e.jsx(Nt,{className:"h-4 w-4 mr-2"})," ë‹¤ì‹œ ì‹œë„"]})})]})]})})}):j.length===0?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Ue,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"ë¶„ì„ ê²°ê³¼ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"space-y-6",children:K?Ws():Hs(j[0])}),e.jsx(as,{title:"LLM ë¶„ì„ ë¦¬í¬íŠ¸",defaultOpen:!0,"data-testid":"section-llm",children:Ge(j)}),A&&e.jsx(as,{title:e.jsxs("span",{className:"inline-flex items-center gap-2",children:["Choi ì•Œê³ ë¦¬ì¦˜ íŒì •",(A==null?void 0:A.overall)&&e.jsx(zs,{status:A.overall})]}),defaultOpen:!0,"data-testid":"section-choi",children:Bs()}),b&&e.jsx(as,{title:"ë§ˆí• ë¼ë…¸ë¹„ìŠ¤ ë¶„ì„",defaultOpen:!0,"data-testid":"section-mahalanobis",children:Us()}),Z&&e.jsx(as,{title:"PEG ë¹„êµ ë¶„ì„",defaultOpen:!0,"data-testid":"section-peg",children:e.jsx(zt,{results:Z})})]}),Ze=c.useCallback(s=>{P({isOpen:!0,algorithm:s})},[]),Js=c.useCallback(()=>{P({isOpen:!1,algorithm:null})},[]),Zs=()=>{switch(C.algorithm){case"choi":return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx(os,{className:"h-12 w-12 text-purple-600 mx-auto mb-2"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Choi ì•Œê³ ë¦¬ì¦˜ ë„ì›€ë§"})]}),e.jsxs("div",{className:"space-y-4 text-sm",children:[e.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg border border-purple-200",children:[e.jsx("h4",{className:"font-semibold text-purple-800 mb-2",children:"ğŸ” ì•Œê³ ë¦¬ì¦˜ ê°œìš”"}),e.jsx("p",{className:"text-purple-700",children:"Choi ì•Œê³ ë¦¬ì¦˜ì€ í’ˆì§ˆ ì €í•˜ íŒì •ì„ ìœ„í•œ íŠ¹í™”ëœ ì•Œê³ ë¦¬ì¦˜ì…ë‹ˆë‹¤. í˜„ì¬ ì¤€ë¹„ ë‹¨ê³„ë¡œ, í–¥í›„ íŠ¹ì • KPI íŒ¨í„´ì„ ë¶„ì„í•˜ì—¬ í’ˆì§ˆ ë¬¸ì œë¥¼ ì§„ë‹¨í•©ë‹ˆë‹¤."})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[e.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:"ğŸ“Š ì‹ ë¢°ì„± ê¸°ì¤€"}),e.jsxs("div",{className:"space-y-2 text-blue-700",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"ì¤€ë¹„ ë‹¨ê³„:"})," í˜„ì¬ absent ìƒíƒœë¡œ í‘œì‹œë©ë‹ˆë‹¤."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"í–¥í›„ ê¸°ì¤€:"})," êµ¬í˜„ ì‹œ í’ˆì§ˆ ì €í•˜ íŒì • ì •í™•ë„ 85% ì´ìƒ ëª©í‘œ"]})]})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:[e.jsx("h4",{className:"font-semibold text-green-800 mb-2",children:"ğŸ’¡ í•´ì„ ë°©ë²•"}),e.jsxs("div",{className:"space-y-2 text-green-700",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"ì •ìƒ:"})," í’ˆì§ˆ ë¬¸ì œê°€ ê°ì§€ë˜ì§€ ì•ŠìŒ"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"ì£¼ì˜:"})," ì ì¬ì  í’ˆì§ˆ ì €í•˜ ê°€ëŠ¥ì„±"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"ê²½ê³ :"})," ì¦‰ê°ì ì¸ ì¡°ì¹˜ í•„ìš”"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"ì‹¬ê°:"})," ê¸´ê¸‰ ëŒ€ì‘ ìš”êµ¬"]})]})]}),e.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg border border-yellow-200",children:[e.jsx("h4",{className:"font-semibold text-yellow-800 mb-2",children:"âš ï¸ ì£¼ì˜ì‚¬í•­"}),e.jsxs("div",{className:"space-y-1 text-yellow-700 text-xs",children:[e.jsx("p",{children:"â€¢ í˜„ì¬ êµ¬í˜„ ì¤€ë¹„ ë‹¨ê³„ì…ë‹ˆë‹¤."}),e.jsx("p",{children:"â€¢ Choi ì•Œê³ ë¦¬ì¦˜ ë¬¸ì„œì— ë”°ë¼ êµ¬í˜„ë  ì˜ˆì •ì…ë‹ˆë‹¤."}),e.jsx("p",{children:"â€¢ ë„ë©”ì¸ ì „ë¬¸ê°€ì˜ ê²€í† ê°€ í•„ìš”í•©ë‹ˆë‹¤."})]})]})]})]});case"mahalanobis":return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx(Fe,{className:"h-12 w-12 text-orange-600 mx-auto mb-2"}),e.jsx("h3",{className:"text-lg font-semibold",children:"ë§ˆí• ë¼ë…¸ë¹„ìŠ¤ ê±°ë¦¬ ë¶„ì„ ë„ì›€ë§"})]}),e.jsxs("div",{className:"space-y-4 text-sm",children:[e.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg border border-orange-200",children:[e.jsx("h4",{className:"font-semibold text-orange-800 mb-2",children:"ğŸ” ì•Œê³ ë¦¬ì¦˜ ê°œìš”"}),e.jsx("p",{className:"text-orange-700",children:"ë‹¤ì°¨ì› ë°ì´í„°ì—ì„œ ì´ìƒì¹˜ë¥¼ íƒì§€í•˜ëŠ” í†µê³„ì  ë°©ë²•ì…ë‹ˆë‹¤. ì—¬ëŸ¬ KPIë¥¼ ë™ì‹œì— ê³ ë ¤í•˜ì—¬ ì¢…í•©ì ì¸ ê±´ê°• ìƒíƒœë¥¼ í‰ê°€í•©ë‹ˆë‹¤."})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[e.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:"ğŸ“Š ì‹ ë¢°ì„± ê¸°ì¤€"}),e.jsxs("div",{className:"space-y-2 text-blue-700",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"ì´ìƒ ì ìˆ˜ ë²”ìœ„:"})," 0.0 ~ 1.0"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"ì£¼ì˜ ì„ê³„ì¹˜:"})," 0.1 (10% ì´ìƒ KPI ì´ìƒ)"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"ê²½ê³  ì„ê³„ì¹˜:"})," 0.2 (20% ì´ìƒ KPI ì´ìƒ)"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"ì‹¬ê° ì„ê³„ì¹˜:"})," 0.3 (30% ì´ìƒ KPI ì´ìƒ)"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"ì‹ ë¢°ë„:"})," 95% ì´ìƒì˜ ì •í™•ë„ ëª©í‘œ"]})]})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:[e.jsx("h4",{className:"font-semibold text-green-800 mb-2",children:"ğŸ’¡ í•´ì„ ë°©ë²•"}),e.jsxs("div",{className:"space-y-2 text-green-700",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"ì •ìƒ (Normal):"})," ì´ìƒ ì ìˆ˜ê°€ ë‚®ì•„ ì•ˆì •ì  ìƒíƒœ"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"ì£¼ì˜ (Caution):"})," ì¼ë¶€ KPIì—ì„œ ë³€í™” ê°ì§€, ëª¨ë‹ˆí„°ë§ í•„ìš”"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"ê²½ê³  (Warning):"})," ë‹¤ìˆ˜ KPI ì´ìƒ, ì¦‰ê°ì  ê²€í†  í•„ìš”"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"ì‹¬ê° (Critical):"})," ì‹¬ê°í•œ ì´ìƒ íŒ¨í„´, ê¸´ê¸‰ ì¡°ì¹˜ ìš”êµ¬"]})]})]}),e.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg border border-yellow-200",children:[e.jsx("h4",{className:"font-semibold text-yellow-800 mb-2",children:"âš ï¸ ì£¼ì˜ì‚¬í•­"}),e.jsxs("div",{className:"space-y-1 text-yellow-700 text-xs",children:[e.jsx("p",{children:"â€¢ ë‹¤ì°¨ì› ë°ì´í„°ì˜ ìƒê´€ê´€ê³„ë¥¼ ê³ ë ¤í•©ë‹ˆë‹¤."}),e.jsx("p",{children:"â€¢ ê°œë³„ KPI ë³€í™”ìœ¨ 10% ì´ìƒì„ ì´ìƒìœ¼ë¡œ ê°„ì£¼í•©ë‹ˆë‹¤."}),e.jsx("p",{children:"â€¢ í†µê³„ì  ìœ ì˜ì„±ì„ ê³ ë ¤í•˜ì—¬ íŒì •í•©ë‹ˆë‹¤."}),e.jsx("p",{children:"â€¢ ë„ë©”ì¸ ì§€ì‹ê³¼ í•¨ê»˜ í•´ì„í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤."})]})]})]})]});case"mann-whitney":return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx(Fe,{className:"h-12 w-12 text-blue-600 mx-auto mb-2"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Mann-Whitney U Test ë„ì›€ë§"})]}),e.jsxs("div",{className:"space-y-4 text-sm",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[e.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:"ğŸ” ì•Œê³ ë¦¬ì¦˜ ê°œìš”"}),e.jsx("p",{className:"text-blue-700",children:"ë‘ ë…ë¦½ì ì¸ ê·¸ë£¹ ê°„ì˜ ì°¨ì´ë¥¼ ë¹„êµí•˜ëŠ” ë¹„ëª¨ìˆ˜ì  í†µê³„ ê²€ì •ì…ë‹ˆë‹¤. ë°ì´í„°ì˜ ì •ê·œì„± ê°€ì • ì—†ì´ í‰ê·  ì°¨ì´ì˜ í†µê³„ì  ìœ ì˜ì„±ì„ ê²€ì •í•©ë‹ˆë‹¤."})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:[e.jsx("h4",{className:"font-semibold text-green-800 mb-2",children:"ğŸ“Š ì‹ ë¢°ì„± ê¸°ì¤€"}),e.jsxs("div",{className:"space-y-2 text-green-700",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"p-value:"})," 0.05 ë¯¸ë§Œì´ë©´ í†µê³„ì ìœ¼ë¡œ ìœ ì˜í•¨"]}),e.jsx("p",{children:e.jsx("strong",{children:"íš¨ê³¼ í¬ê¸° (Effect Size):"})}),e.jsxs("ul",{className:"ml-4 space-y-1",children:[e.jsx("li",{children:"â€¢ 0.2: ì‘ì€ íš¨ê³¼"}),e.jsx("li",{children:"â€¢ 0.5: ì¤‘ê°„ íš¨ê³¼"}),e.jsx("li",{children:"â€¢ 0.8: í° íš¨ê³¼"})]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Z-score:"})," Â±1.96 ì´ìƒì´ë©´ 95% ì‹ ë¢°ìˆ˜ì¤€ì—ì„œ ìœ ì˜í•¨"]})]})]}),e.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg border border-purple-200",children:[e.jsx("h4",{className:"font-semibold text-purple-800 mb-2",children:"ğŸ’¡ í•´ì„ ë°©ë²•"}),e.jsxs("div",{className:"space-y-2 text-purple-700",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"p < 0.05:"})," ë‘ ê·¸ë£¹ ê°„ì— í†µê³„ì ìœ¼ë¡œ ìœ ì˜í•œ ì°¨ì´ê°€ ìˆìŒ"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"p â‰¥ 0.05:"})," ìš°ì—°ì— ì˜í•œ ì°¨ì´ì¼ ê°€ëŠ¥ì„±ì´ ë†’ìŒ"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"í° íš¨ê³¼ í¬ê¸°:"})," ì‹¤ì§ˆì ìœ¼ë¡œ ì˜ë¯¸ ìˆëŠ” ì°¨ì´"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"ì‘ì€ íš¨ê³¼ í¬ê¸°:"})," í†µê³„ì  ìœ ì˜ì„±ì€ ìˆì§€ë§Œ ì‹¤ì§ˆì  ì°¨ì´ëŠ” ë¯¸ë¯¸"]})]})]}),e.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg border border-yellow-200",children:[e.jsx("h4",{className:"font-semibold text-yellow-800 mb-2",children:"âš ï¸ ì£¼ì˜ì‚¬í•­"}),e.jsxs("div",{className:"space-y-1 text-yellow-700 text-xs",children:[e.jsx("p",{children:"â€¢ ë°ì´í„°ì˜ ë…ë¦½ì„± ê°€ì •ì„ ë§Œì¡±í•´ì•¼ í•©ë‹ˆë‹¤."}),e.jsx("p",{children:"â€¢ í‘œë³¸ í¬ê¸°ê°€ ì‘ìœ¼ë©´ ê²€ì •ë ¥ì´ ë‚®ì•„ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤."}),e.jsx("p",{children:"â€¢ ì´ìƒì¹˜ì— ëœ ë¯¼ê°í•˜ì§€ë§Œ, ë¶„í¬ ëª¨ì–‘ì„ ê³ ë ¤í•´ì•¼ í•©ë‹ˆë‹¤."}),e.jsx("p",{children:"â€¢ p-valueë§Œìœ¼ë¡œ ê²°ë¡ ì„ ë‚´ë¦¬ì§€ ë§ê³  íš¨ê³¼ í¬ê¸°ë„ ê³ ë ¤í•˜ì„¸ìš”."})]})]})]})]});case"ks-test":return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx(us,{className:"h-12 w-12 text-green-600 mx-auto mb-2"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Kolmogorov-Smirnov Test ë„ì›€ë§"})]}),e.jsxs("div",{className:"space-y-4 text-sm",children:[e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:[e.jsx("h4",{className:"font-semibold text-green-800 mb-2",children:"ğŸ” ì•Œê³ ë¦¬ì¦˜ ê°œìš”"}),e.jsx("p",{className:"text-green-700",children:"ë‘ ìƒ˜í”Œì˜ ë¶„í¬ê°€ ê°™ì€ì§€ ë¹„êµí•˜ëŠ” ë¹„ëª¨ìˆ˜ì  ê²€ì •ì…ë‹ˆë‹¤. ëˆ„ì ë¶„í¬í•¨ìˆ˜(CDF)ì˜ ìµœëŒ€ ì°¨ì´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë¶„í¬ ì°¨ì´ë¥¼ ê²€ì •í•©ë‹ˆë‹¤."})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[e.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:"ğŸ“Š ì‹ ë¢°ì„± ê¸°ì¤€"}),e.jsxs("div",{className:"space-y-2 text-blue-700",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"D í†µê³„ëŸ‰:"})," ë‘ CDF ê°„ ìµœëŒ€ ì°¨ì´ (0~1 ë²”ìœ„)"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"p-value:"})," 0.05 ë¯¸ë§Œì´ë©´ ë¶„í¬ ì°¨ì´ê°€ ìœ ì˜í•¨"]}),e.jsx("p",{children:e.jsx("strong",{children:"ë¶„í¬ ì°¨ì´ ì •ë„:"})}),e.jsxs("ul",{className:"ml-4 space-y-1",children:[e.jsx("li",{children:"â€¢ Small (D < 0.1): ë¯¸ë¯¸í•œ ì°¨ì´"}),e.jsx("li",{children:"â€¢ Medium (0.1 â‰¤ D < 0.2): ì¤‘ê°„ ì •ë„ ì°¨ì´"}),e.jsx("li",{children:"â€¢ Large (D â‰¥ 0.2): í° ì°¨ì´"})]})]})]}),e.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg border border-purple-200",children:[e.jsx("h4",{className:"font-semibold text-purple-800 mb-2",children:"ğŸ’¡ í•´ì„ ë°©ë²•"}),e.jsxs("div",{className:"space-y-2 text-purple-700",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"p < 0.05:"})," ë‘ ê·¸ë£¹ì˜ ë¶„í¬ê°€ í†µê³„ì ìœ¼ë¡œ ë‹¤ë¦„"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"p â‰¥ 0.05:"})," ë‘ ê·¸ë£¹ì˜ ë¶„í¬ê°€ ë¹„ìŠ·í•¨"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"D ê°’ì´ í¼:"})," ë¶„í¬ ëª¨ì–‘ì˜ ì°¨ì´ê°€ í¼"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"D ê°’ì´ ì‘ìŒ:"})," ë¶„í¬ê°€ ì„œë¡œ ìœ ì‚¬í•¨"]})]})]}),e.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg border border-yellow-200",children:[e.jsx("h4",{className:"font-semibold text-yellow-800 mb-2",children:"âš ï¸ ì£¼ì˜ì‚¬í•­"}),e.jsxs("div",{className:"space-y-1 text-yellow-700 text-xs",children:[e.jsx("p",{children:"â€¢ ë¶„í¬ì˜ ëª¨ì–‘, ìœ„ì¹˜, ì‚°í¬ë„ ì°¨ì´ë¥¼ ëª¨ë‘ ê³ ë ¤í•©ë‹ˆë‹¤."}),e.jsx("p",{children:"â€¢ í‘œë³¸ í¬ê¸°ê°€ ì‘ìœ¼ë©´ ê²€ì •ë ¥ì´ ë‚®ì•„ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤."}),e.jsx("p",{children:"â€¢ ì´ìƒì¹˜ì— ë¯¼ê°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤."}),e.jsx("p",{children:"â€¢ p-valueì™€ D í†µê³„ëŸ‰ì„ í•¨ê»˜ ê³ ë ¤í•˜ì—¬ í•´ì„í•˜ì„¸ìš”."})]})]})]})]});case"peg-comparison":return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx(vt,{className:"h-12 w-12 text-teal-600 mx-auto mb-2"}),e.jsx("h3",{className:"text-lg font-semibold",children:"PEG ë¹„êµ ë¶„ì„ ë„ì›€ë§"})]}),e.jsxs("div",{className:"space-y-4 text-sm",children:[e.jsxs("div",{className:"bg-teal-50 p-4 rounded-lg border border-teal-200",children:[e.jsx("h4",{className:"font-semibold text-teal-800 mb-2",children:"ğŸ” ì•Œê³ ë¦¬ì¦˜ ê°œìš”"}),e.jsx("p",{className:"text-teal-700",children:"N-1 ê¸°ê°„ê³¼ N ê¸°ê°„ì˜ PEGë³„ ì„±ëŠ¥ì„ ë¹„êµí•˜ëŠ” ë¶„ì„ì…ë‹ˆë‹¤. í‰ê· , í‘œì¤€í¸ì°¨, ë³€í™”ìœ¨ì„ ê³„ì‚°í•˜ì—¬ ì„±ëŠ¥ íŠ¸ë Œë“œë¥¼ ë¶„ì„í•©ë‹ˆë‹¤."})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[e.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:"ğŸ“Š ì‹ ë¢°ì„± ê¸°ì¤€"}),e.jsxs("div",{className:"space-y-2 text-blue-700",children:[e.jsx("p",{children:e.jsx("strong",{children:"ë³€í™”ìœ¨:"})}),e.jsxs("ul",{className:"ml-4 space-y-1",children:[e.jsx("li",{children:"â€¢ Â±5%: ì•ˆì • ë²”ìœ„"}),e.jsx("li",{children:"â€¢ Â±5~10%: ì£¼ì˜ ë²”ìœ„"}),e.jsx("li",{children:"â€¢ Â±10% ì´ˆê³¼: ì´ìƒ ë²”ìœ„"})]}),e.jsx("p",{children:e.jsx("strong",{children:"RSD (ìƒëŒ€ í‘œì¤€í¸ì°¨):"})}),e.jsxs("ul",{className:"ml-4 space-y-1",children:[e.jsx("li",{children:"â€¢ < 10%: ë§¤ìš° ì•ˆì •ì "}),e.jsx("li",{children:"â€¢ 10~20%: ë³´í†µ ì•ˆì •ì„±"}),e.jsx("li",{children:"â€¢ > 20%: ë¶ˆì•ˆì •ì "})]}),e.jsxs("p",{children:[e.jsx("strong",{children:"ê°€ì¤‘ì¹˜:"})," 1~10 ë²”ìœ„ë¡œ PEG ì¤‘ìš”ë„ ë°˜ì˜"]})]})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:[e.jsx("h4",{className:"font-semibold text-green-800 mb-2",children:"ğŸ’¡ í•´ì„ ë°©ë²•"}),e.jsxs("div",{className:"space-y-2 text-green-700",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"ê°œì„  (Up):"})," N ê¸°ê°„ ì„±ëŠ¥ì´ í–¥ìƒëœ PEG"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"í•˜ë½ (Down):"})," N ê¸°ê°„ ì„±ëŠ¥ì´ ì €í•˜ëœ PEG"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"ì•ˆì • (Stable):"})," í° ë³€í™” ì—†ëŠ” PEG"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"ì‹ ë¢°ë„:"})," í†µê³„ í…ŒìŠ¤íŠ¸ ê²°ê³¼ì— ë”°ë¥¸ ë¶„ì„ ì‹ ë¢°ë„"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"RSD ë¹„êµ:"})," ê¸°ê°„ë³„ ë³€ë™ì„± ë¹„êµ"]})]})]}),e.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg border border-yellow-200",children:[e.jsx("h4",{className:"font-semibold text-yellow-800 mb-2",children:"âš ï¸ ì£¼ì˜ì‚¬í•­"}),e.jsxs("div",{className:"space-y-1 text-yellow-700 text-xs",children:[e.jsx("p",{children:"â€¢ ë°ì´í„°ì˜ ì—°ì†ì„±ê³¼ ì™„ì „ì„±ì„ í™•ì¸í•˜ì„¸ìš”."}),e.jsx("p",{children:"â€¢ ê³„ì ˆì /ì£¼ê¸°ì  íŒ¨í„´ì„ ê³ ë ¤í•˜ì—¬ ë¶„ì„í•˜ì„¸ìš”."}),e.jsx("p",{children:"â€¢ ì´ìƒì¹˜ê°€ ë¶„ì„ ê²°ê³¼ì— ë¯¸ì¹˜ëŠ” ì˜í–¥ì„ ê²€í† í•˜ì„¸ìš”."}),e.jsx("p",{children:"â€¢ ë„ë©”ì¸ ì „ë¬¸ê°€ì˜ ì˜ê²¬ê³¼ í•¨ê»˜ í•´ì„í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤."})]})]})]})]});default:return e.jsx("div",{children:"ì•Œê³ ë¦¬ì¦˜ì„ ì„ íƒí•´ì£¼ì„¸ìš”."})}};return e.jsxs(e.Fragment,{children:[e.jsx(Ns,{open:l,onOpenChange:n,children:e.jsxs(vs,{className:`transition-all duration-500 ease-in-out transform overflow-hidden ${H?"max-w-[99vw] h-[98vh] w-[99vw] scale-100":"max-w-6xl max-h-[90vh] w-auto min-w-[80vw] scale-100"}`,children:[e.jsxs(bs,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(ws,{className:"flex items-center gap-2",children:[e.jsx(pt,{className:"h-5 w-5"}),K?"ë¶„ì„ ê²°ê³¼ ë¹„êµ":"ë¶„ì„ ê²°ê³¼ ìƒì„¸"]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(F,{variant:"ghost",size:"sm",onClick:()=>W(!H),className:"transition-all duration-200 hover:scale-110 hover:bg-accent",title:H?"ì›ë˜ í¬ê¸°ë¡œ (ESC)":"ìµœëŒ€í™” (F11)",children:H?e.jsx(jt,{className:"h-4 w-4"}):e.jsx(ft,{className:"h-4 w-4"})})})]}),e.jsx(Xs,{className:"sr-only",children:K?`${j.length}ê°œì˜ ë¶„ì„ ê²°ê³¼ë¥¼ ë¹„êµí•˜ê³  ì•Œê³ ë¦¬ì¦˜ ë¶„ì„ ê²°ê³¼ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.`:"ë‹¨ì¼ ë¶„ì„ ê²°ê³¼ì˜ ìƒì„¸ ì •ë³´ë¥¼ í™•ì¸í•˜ê³  Choi ì•Œê³ ë¦¬ì¦˜, ë§ˆí• ë¼ë…¸ë¹„ìŠ¤ ê±°ë¦¬, PEG ë¹„êµ ë¶„ì„ ê²°ê³¼ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤."})]}),e.jsx(ks,{className:`transition-all duration-300 overflow-hidden ${H?"h-[85vh]":"max-h-[75vh] min-h-[400px]"}`,children:e.jsx("div",{className:"px-1 w-full max-w-full overflow-hidden",children:qs()})})]})}),e.jsx(Ns,{open:C.isOpen,onOpenChange:Js,children:e.jsxs(vs,{className:"max-w-4xl max-h-[80vh]",children:[e.jsx(bs,{children:e.jsxs(ws,{className:"flex items-center gap-2",children:[e.jsx(He,{className:"h-5 w-5"}),"ì•Œê³ ë¦¬ì¦˜ ë„ì›€ë§"]})}),e.jsx(ks,{className:"max-h-[60vh]",children:e.jsx("div",{className:"p-4",children:Zs()})})]})})]})},Vs=c.memo(Gt),Zt=Object.freeze(Object.defineProperty({__proto__:null,default:Vs},Symbol.toStringTag,{value:"Module"})),Vt=()=>{const{results:l,loading:n,error:p,isEmpty:_,hasMore:N,isFiltered:G,resultCount:S,filters:U,updateFilters:ne,clearFilters:V,refresh:H,loadMore:W,deleteResult:q}=At({initialLimit:20,autoFetch:!0}),[y,b]=c.useState(!1),[x,Z]=c.useState(new Set),[E,Q]=c.useState({key:"analysisDate",direction:"desc"}),[ee,A]=c.useState({isOpen:!1,resultIds:[],mode:"single"}),a=c.useCallback((g,D={})=>{console.log(`[ResultsList] ${g}`,D)},[]),C=c.useMemo(()=>l!=null&&l.length?[...l].sort((D,O)=>{const X=D[E.key],K=O[E.key];if(X==null)return 1;if(K==null)return-1;if(E.key==="analysisDate"){const oe=new Date(X),me=new Date(K);return E.direction==="asc"?oe-me:me-oe}if(typeof X=="string"&&typeof K=="string"){const oe=X.localeCompare(K);return E.direction==="asc"?oe:-oe}return typeof X=="number"&&typeof K=="number"?E.direction==="asc"?X-K:K-X:0}):[],[l,E]),P=c.useCallback(g=>{Q(D=>{const O=D.key===g&&D.direction==="asc"?"desc":"asc";return a("ì •ë ¬ ë³€ê²½",{key:g,direction:O}),{key:g,direction:O}})},[a]),$=c.useCallback(g=>{Z(D=>{const O=new Set(D);return O.has(g)?O.delete(g):O.add(g),O})},[]),ke=c.useCallback(()=>{x.size===C.length?Z(new Set):Z(new Set(C.map(g=>g.id)))},[x.size,C]),fe=c.useCallback(async g=>{try{a("ë¶„ì„ ê²°ê³¼ ì‚­ì œ ì‹œì‘",{resultId:g}),await q(g),Z(D=>{const O=new Set(D);return O.delete(g),O})}catch(D){a("ë¶„ì„ ê²°ê³¼ ì‚­ì œ ì‹¤íŒ¨",{resultId:g,error:D})}},[q,a]),Ae=c.useCallback(async()=>{if(x.size!==0)try{a("ë²Œí¬ ì‚­ì œ ì‹œì‘",{count:x.size});const g=Array.from(x).map(D=>q(D));await Promise.all(g),Z(new Set),xe.success(`${x.size}ê°œì˜ ê²°ê³¼ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.`)}catch(g){a("ë²Œí¬ ì‚­ì œ ì‹¤íŒ¨",{error:g}),xe.error("ì¼ë¶€ ê²°ê³¼ ì‚­ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}},[x,q,a]),Ne=c.useCallback(g=>{a("ìƒì„¸ ë³´ê¸° ìš”ì²­",{resultId:g}),A({isOpen:!0,resultIds:[g],mode:"single"})},[a]),Pe=c.useCallback(()=>{if(x.size<2){xe.error("ë¹„êµí•  ê²°ê³¼ë¥¼ 2ê°œ ì´ìƒ ì„ íƒí•´ì£¼ì„¸ìš”");return}if(x.size>5){xe.error("ìµœëŒ€ 5ê°œê¹Œì§€ë§Œ ë¹„êµí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤");return}const g=Array.from(x);a("ë¹„êµ ë³´ê¸° ìš”ì²­",{resultIds:g,count:g.length}),A({isOpen:!0,resultIds:g,mode:"compare"})},[x,a]),Ce=c.useCallback(()=>{A({isOpen:!1,resultIds:[],mode:"single"})},[]),T=c.useCallback(()=>{if(!(C!=null&&C.length)){xe.error("ë‚´ë³´ë‚¼ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.");return}try{a("ë°ì´í„° ë‚´ë³´ë‚´ê¸° ì‹œì‘",{count:C.length});const g=C.map(K=>{var oe,me;return{"ë¶„ì„ ë‚ ì§œ":new Date(K.analysisDate).toLocaleString("ko-KR"),"NE ID":K.neId,"Cell ID":K.cellId,ìƒíƒœ:K.status,"ê²°ê³¼ ìˆ˜":((oe=K.results)==null?void 0:oe.length)||0,"í†µê³„ ìˆ˜":((me=K.stats)==null?void 0:me.length)||0}}),D=[Object.keys(g[0]).join(","),...g.map(K=>Object.values(K).join(","))].join(`
`),O=new Blob([D],{type:"text/csv;charset=utf-8;"}),X=document.createElement("a");X.href=URL.createObjectURL(O),X.download=`analysis_results_${new Date().toISOString().split("T")[0]}.csv`,X.click(),xe.success("ë°ì´í„°ê°€ ë‚´ë³´ë‚´ê¸° ë˜ì—ˆìŠµë‹ˆë‹¤."),a("ë°ì´í„° ë‚´ë³´ë‚´ê¸° ì™„ë£Œ")}catch(g){a("ë°ì´í„° ë‚´ë³´ë‚´ê¸° ì‹¤íŒ¨",{error:g}),xe.error("ë°ì´í„° ë‚´ë³´ë‚´ê¸°ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}},[C,a]),se=c.useCallback(g=>{switch(g==null?void 0:g.toLowerCase()){case"success":return"default";case"error":case"failed":return"destructive";case"warning":return"secondary";case"pending":case"processing":return"outline";default:return"secondary"}},[]),ie=c.useCallback(g=>{try{return new Date(g).toLocaleString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}catch{return g||"-"}},[]);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold",children:"LLM ë¶„ì„ ê²°ê³¼"}),e.jsxs("p",{className:"text-muted-foreground",children:["ì´ ",S,"ê°œì˜ ë¶„ì„ ê²°ê³¼",G&&" (í•„í„° ì ìš©ë¨)"]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[x.size>0&&e.jsxs(e.Fragment,{children:[x.size>=2&&e.jsxs(F,{variant:"default",size:"sm",onClick:Pe,children:[e.jsx(us,{className:"h-4 w-4 mr-2"}),"ë¹„êµí•˜ê¸° (",x.size,")"]}),e.jsxs(Is,{children:[e.jsx(Rs,{asChild:!0,children:e.jsxs(F,{variant:"destructive",size:"sm",children:[e.jsx(_s,{className:"h-4 w-4 mr-2"}),"ì„ íƒ ì‚­ì œ (",x.size,")"]})}),e.jsxs(As,{children:[e.jsxs(Ps,{children:[e.jsx($s,{children:"ì„ íƒëœ ê²°ê³¼ ì‚­ì œ"}),e.jsxs(Os,{children:["ì„ íƒëœ ",x.size,"ê°œì˜ ë¶„ì„ ê²°ê³¼ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? ì´ ì‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."]})]}),e.jsxs(Es,{children:[e.jsx(Fs,{children:"ì·¨ì†Œ"}),e.jsx(Ms,{onClick:Ae,children:"ì‚­ì œ"})]})]})]})]}),e.jsxs(F,{variant:"outline",size:"sm",onClick:T,disabled:!(C!=null&&C.length),children:[e.jsx(Ct,{className:"h-4 w-4 mr-2"}),"ë‚´ë³´ë‚´ê¸°"]}),e.jsxs(F,{variant:"outline",size:"sm",onClick:()=>b(!y),children:[e.jsx(ds,{className:"h-4 w-4 mr-2"}),"í•„í„°",e.jsx(ms,{className:`h-4 w-4 ml-2 transition-transform ${y?"rotate-180":""}`})]}),e.jsxs(F,{variant:"outline",size:"sm",onClick:H,disabled:n,children:[e.jsx(Ss,{className:`h-4 w-4 mr-2 ${n?"animate-spin":""}`}),"ìƒˆë¡œê³ ì¹¨"]})]})]}),y&&e.jsx(Et,{filters:U,onFilterChange:(g,D)=>ne({[g]:D}),onClearFilters:V,isCollapsed:!1,onToggleCollapse:()=>b(!1),showActiveCount:!0}),e.jsx(pe,{children:e.jsxs(je,{className:"p-0",children:[p&&e.jsx("div",{className:"p-6 text-center border border-destructive/20 rounded-lg bg-destructive/5",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsxs("div",{className:"relative mb-4",children:[e.jsx(Ue,{className:"h-12 w-12 text-destructive"}),e.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-destructive rounded-full animate-pulse"})]}),e.jsx("h3",{className:"text-lg font-semibold mb-2 text-destructive",children:"ë°ì´í„° ë¡œë”© ì˜¤ë¥˜"}),e.jsx("p",{className:"text-muted-foreground mb-4 max-w-md",children:p}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(F,{onClick:H,variant:"outline",size:"sm",children:[e.jsx(Ss,{className:"h-4 w-4 mr-2"}),"ë‹¤ì‹œ ì‹œë„"]}),e.jsxs(F,{onClick:V,variant:"ghost",size:"sm",children:[e.jsx(Re,{className:"h-4 w-4 mr-2"}),"í•„í„° ì´ˆê¸°í™”"]})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-3",children:"ë¬¸ì œê°€ ì§€ì†ë˜ë©´ ê´€ë¦¬ìì—ê²Œ ë¬¸ì˜í•´ì£¼ì„¸ìš”"})]})}),n&&_&&e.jsxs("div",{className:"p-12 text-center",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Le,{className:"h-8 w-8 animate-spin mx-auto mb-4 text-primary"}),e.jsx("div",{className:"absolute inset-0 rounded-full border-2 border-primary/20 animate-pulse"})]}),e.jsx("p",{className:"text-muted-foreground mb-2",children:"ë¶„ì„ ê²°ê³¼ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘..."}),e.jsx("p",{className:"text-xs text-muted-foreground/70",children:"ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”"})]}),n&&!_&&e.jsxs("div",{className:"flex items-center justify-center py-4 border-t bg-muted/30",children:[e.jsx(Le,{className:"h-4 w-4 animate-spin mr-2 text-primary"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"ë” ë§ì€ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘..."})]}),!n&&_&&!p&&e.jsxs("div",{className:"p-12 text-center",children:[e.jsxs("div",{className:"relative mb-6",children:[e.jsx(xs,{className:"h-12 w-12 text-muted-foreground mx-auto"}),e.jsx("div",{className:"absolute -bottom-2 left-1/2 transform -translate-x-1/2 w-16 h-1 bg-muted-foreground/20 rounded-full"})]}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:G?"ğŸ” ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤":"ğŸ“Š ë¶„ì„ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤"}),e.jsx("p",{className:"text-muted-foreground mb-6 max-w-md",children:G?"í˜„ì¬ í•„í„° ì¡°ê±´ì— ë§ëŠ” ë¶„ì„ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤. ë‹¤ë¥¸ ì¡°ê±´ìœ¼ë¡œ ê²€ìƒ‰í•´ë³´ì„¸ìš”.":""}),e.jsx("div",{className:"flex flex-col sm:flex-row gap-2 justify-center",children:G?e.jsxs(e.Fragment,{children:[e.jsxs(F,{onClick:V,variant:"outline",children:[e.jsx(Re,{className:"h-4 w-4 mr-2"}),"í•„í„° ì´ˆê¸°í™”"]}),e.jsxs(F,{onClick:()=>b(!0),variant:"default",children:[e.jsx(ds,{className:"h-4 w-4 mr-2"}),"í•„í„° ìˆ˜ì •"]})]}):null})]}),!_&&!p&&e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(_t,{children:[e.jsx(St,{children:e.jsxs(Ds,{children:[e.jsx(De,{className:"w-12",children:e.jsx("input",{type:"checkbox",checked:x.size===C.length&&C.length>0,onChange:ke,className:"rounded border-gray-300"})}),e.jsxs(De,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>P("analysisDate"),children:["ë¶„ì„ ë‚ ì§œ",E.key==="analysisDate"&&e.jsx("span",{className:"ml-2",children:E.direction==="asc"?"â†‘":"â†“"})]}),e.jsxs(De,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>P("neId"),children:["NE ID",E.key==="neId"&&e.jsx("span",{className:"ml-2",children:E.direction==="asc"?"â†‘":"â†“"})]}),e.jsxs(De,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>P("cellId"),children:["Cell ID",E.key==="cellId"&&e.jsx("span",{className:"ml-2",children:E.direction==="asc"?"â†‘":"â†“"})]}),e.jsx(De,{children:"ìƒíƒœ"}),e.jsx(De,{className:"text-center",children:"ê²°ê³¼ ìˆ˜"}),e.jsx(De,{className:"text-center",children:"í†µê³„ ìˆ˜"}),e.jsx(De,{className:"w-20",children:"ì‘ì—…"})]})}),e.jsx(Dt,{children:C.map(g=>{var D,O;return e.jsxs(Ds,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>Ne(g.id),children:[e.jsx(Ie,{onClick:X=>X.stopPropagation(),children:e.jsx("input",{type:"checkbox",checked:x.has(g.id),onChange:()=>$(g.id),className:"rounded border-gray-300"})}),e.jsx(Ie,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(hs,{className:"h-4 w-4 text-muted-foreground"}),ie(g.analysisDate)]})}),e.jsx(Ie,{className:"font-medium",children:g.neId||"-"}),e.jsx(Ie,{className:"font-medium",children:g.cellId||"-"}),e.jsx(Ie,{children:e.jsx(Y,{variant:se(g.status),children:g.status||"unknown"})}),e.jsx(Ie,{className:"text-center",children:((D=g.results)==null?void 0:D.length)||0}),e.jsx(Ie,{className:"text-center",children:((O=g.stats)==null?void 0:O.length)||0}),e.jsx(Ie,{onClick:X=>X.stopPropagation(),children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(F,{variant:"ghost",size:"sm",onClick:()=>Ne(g.id),title:"ìƒì„¸ ë³´ê¸°",children:e.jsx(xs,{className:"h-4 w-4"})}),e.jsxs(Is,{children:[e.jsx(Rs,{asChild:!0,children:e.jsx(F,{variant:"ghost",size:"sm",title:"ì‚­ì œ",children:e.jsx(_s,{className:"h-4 w-4 text-destructive"})})}),e.jsxs(As,{children:[e.jsxs(Ps,{children:[e.jsx($s,{children:"ë¶„ì„ ê²°ê³¼ ì‚­ì œ"}),e.jsx(Os,{children:"ì´ ë¶„ì„ ê²°ê³¼ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? ì´ ì‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."})]}),e.jsxs(Es,{children:[e.jsx(Fs,{children:"ì·¨ì†Œ"}),e.jsx(Ms,{onClick:()=>fe(g.id),children:"ì‚­ì œ"})]})]})]})]})})]},g.id)})})]})}),N&&!n&&!p&&e.jsx("div",{className:"p-6 text-center border-t",children:e.jsxs(F,{variant:"outline",onClick:W,disabled:n,children:[n?e.jsx(Le,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(ms,{className:"h-4 w-4 mr-2"}),"ë” ë³´ê¸°"]})})]})}),e.jsx(Vs,{isOpen:ee.isOpen,onClose:Ce,resultIds:ee.resultIds,mode:ee.mode})]})},Wt=c.memo(Vt),Qt=Object.freeze(Object.defineProperty({__proto__:null,default:Wt},Symbol.toStringTag,{value:"Module"}));export{Zt as R,Qt as a};
